<!DOCTYPE html>
<script src="/js/src/clicklove.js"></script>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>贾志翔的博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta property="og:type" content="website">
<meta property="og:title" content="贾志翔的博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="贾志翔的博客">
<meta property="og:description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="贾志翔的博客">
<meta name="twitter:description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="贾志翔的博客" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">主页</a>
                
                <a class="navbar-item" href="/archives">归档</a>
                
                <a class="navbar-item" href="/tags">标签</a>
                
                <a class="navbar-item" href="/about">支持</a>
                
                <a class="navbar-item" href="http://www.tripwiremagazine.com/wp-content/uploads/images/stories/Articles/9_Funniest_JavaScript_effects/Unclosable%20Window.html">别点·有毒</a>
                
                <a class="navbar-item" href="http://fanfou.com/">饭否</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/jiaxiaochu/jiaxiaochu.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.395Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/计算机网络/">计算机网络</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1642 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-03-01-实验一：数据表示/"></a>
            
        </h1>
        <div class="content">
            <h1 id="实验题目"><a href="#实验题目" class="headerlink" title="实验题目"></a>实验题目</h1><p>数据表示实验</p>
<h1 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h1><p>掌握结构数据的保存和读取的方法。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>C语言函数分类：<a href="http://msdn.microsoft.com/zh-cn/library/2aza74he(v=vs.110).aspx" target="_blank" rel="noopener">http://msdn.microsoft.com/zh-cn/library/2aza74he(v=vs.110).aspx</a></li>
<li>C语言字符串函数：<a href="http://msdn.microsoft.com/zh-cn/library/f0151s4x(v=vs.110).aspx" target="_blank" rel="noopener">http://msdn.microsoft.com/zh-cn/library/f0151s4x(v=vs.110).aspx</a></li>
</ul>
<h1 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h1><ul>
<li>Windows + VS 2012  <a href="http://172.18.187.11/netdisk/default.aspx?vm=16net" target="_blank" rel="noopener">http://172.18.187.11/netdisk/default.aspx?vm=16net</a></li>
<li>Linux + gcc</li>
</ul>
<p>这里我使用的环境是Windows 10 + VSCode + gcc version 8.1.0 (x86_64-posix-sjlj-rev0, Built by MinGW-W64 project)</p>
<h1 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h1><h2 id="结构数据保存和读出"><a href="#结构数据保存和读出" class="headerlink" title="结构数据保存和读出"></a>结构数据保存和读出</h2><h3 id="实验要求："><a href="#实验要求：" class="headerlink" title="实验要求："></a>实验要求：</h3><p>循环输入员工(Person)的信息，每输入一个员工的信息，立即写入文件(Persons.stru)，直到输入的姓名为空时跳出循环。然后，读出该文件，显示每个Person的信息。<br>Person的信息表示：</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">  <span class="hljs-keyword">char</span> username[USER_NAME_LEN];      <span class="hljs-comment">// 员工名</span></span><br><span class="line">  <span class="hljs-keyword">int</span> level;                         <span class="hljs-comment">// 工资级别</span></span><br><span class="line">  <span class="hljs-keyword">char</span> email[EMAIL_LEN];             <span class="hljs-comment">// email地址</span></span><br><span class="line">  DWORD sendtime;                    <span class="hljs-comment">// 发送时间</span></span><br><span class="line">  <span class="hljs-keyword">time_t</span> regtime;                    <span class="hljs-comment">// 注册时间</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="截屏运行结果"><a href="#截屏运行结果" class="headerlink" title="截屏运行结果"></a>截屏运行结果</h3><h3 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h3><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> DWORD;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">CSV</span> //按照<span class="hljs-title">CSV</span>格式保存。</span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt; v;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">get</span><span class="hljs-params">(istream &amp;is)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-built_in">string</span> s;</span><br><span class="line">		<span class="hljs-keyword">for</span> (v.clear(); getline(is, s);)</span><br><span class="line">		&#123;</span><br><span class="line">			v.push_back(&#123;&#125;);</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-built_in">istringstream</span> <span class="hljs-built_in">sin</span>(s); getline(<span class="hljs-built_in">sin</span>, s, <span class="hljs-string">','</span>);)</span><br><span class="line">				v.back().push_back(s);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">put</span><span class="hljs-params">(ostream &amp;os)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; v.size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; v[i].size(); ++j)</span><br><span class="line">				os &lt;&lt; v[i][j] &lt;&lt; (j + <span class="hljs-number">1</span> &lt; v[i].size() ? <span class="hljs-string">','</span> : <span class="hljs-string">'\n'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Person</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">string</span> username;				   <span class="hljs-comment">// 员工名</span></span><br><span class="line">	<span class="hljs-keyword">int</span> level;						   <span class="hljs-comment">// 工资级别</span></span><br><span class="line">	<span class="hljs-built_in">string</span> email;					   <span class="hljs-comment">// email地址</span></span><br><span class="line">	DWORD sendtime;					   <span class="hljs-comment">// 发送时间</span></span><br><span class="line">	<span class="hljs-keyword">time_t</span> regtime;					   <span class="hljs-comment">// 注册时间</span></span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">get</span><span class="hljs-params">(istream &amp;is, ostream &amp;os)</span> <span class="hljs-comment">//从is中读入，并将提示信息写入os；若读入终止返回false</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		os &lt;&lt; <span class="hljs-string">"Input username: "</span>;</span><br><span class="line">		getline(is, username);</span><br><span class="line">		<span class="hljs-keyword">while</span> (!username.empty() &amp;&amp; username.back() == <span class="hljs-string">' '</span>)</span><br><span class="line">			username.pop_back(); <span class="hljs-comment">//删除多余空格</span></span><br><span class="line">		<span class="hljs-keyword">if</span> (username.empty())	<span class="hljs-comment">//读入空串，说明已经终止</span></span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">		os &lt;&lt; <span class="hljs-string">"Input level: "</span>;</span><br><span class="line">		is &gt;&gt; level;</span><br><span class="line">		os &lt;&lt; <span class="hljs-string">"Input email: "</span>;</span><br><span class="line">		is &gt;&gt; email;</span><br><span class="line">		os &lt;&lt; <span class="hljs-string">"Input sendtime: "</span>;</span><br><span class="line">		is &gt;&gt; sendtime;</span><br><span class="line">		os &lt;&lt; <span class="hljs-string">"Input regtime: "</span>;</span><br><span class="line">		is &gt;&gt; regtime;</span><br><span class="line">		<span class="hljs-built_in">string</span> s;</span><br><span class="line">		<span class="hljs-keyword">return</span> getline(is, s), <span class="hljs-number">1</span>; <span class="hljs-comment">//要读掉上一行的行末的回车，以免对下一次读入产生影响</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getCSV</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; &amp;v)</span> <span class="hljs-comment">//从CSV的某一行读入信息</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		username = v[<span class="hljs-number">0</span>];</span><br><span class="line">		level = stoi(v[<span class="hljs-number">1</span>]);</span><br><span class="line">		email = v[<span class="hljs-number">2</span>];</span><br><span class="line">		sendtime = stoull(v[<span class="hljs-number">3</span>]);</span><br><span class="line">		regtime = stoull(v[<span class="hljs-number">4</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">putFileCSV</span><span class="hljs-params">()</span> <span class="hljs-comment">//返回CSV格式的信息</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> username + <span class="hljs-string">","</span> + to_string(level) + <span class="hljs-string">","</span> + email + <span class="hljs-string">","</span> + to_string(sendtime) + <span class="hljs-string">","</span> + to_string(regtime) + <span class="hljs-string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">friend</span> ostream &amp;<span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;os, Person &amp;p) <span class="hljs-comment">//打印p的信息到os</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> os &lt;&lt; <span class="hljs-string">"username: "</span> &lt;&lt; p.username &lt;&lt; <span class="hljs-string">"\n"</span></span><br><span class="line">				  &lt;&lt; <span class="hljs-string">"level: "</span> &lt;&lt; p.level &lt;&lt; <span class="hljs-string">"\n"</span></span><br><span class="line">				  &lt;&lt; <span class="hljs-string">"email: "</span> &lt;&lt; p.email &lt;&lt; <span class="hljs-string">"\n"</span></span><br><span class="line">				  &lt;&lt; <span class="hljs-string">"sendtime: "</span> &lt;&lt; p.sendtime &lt;&lt; <span class="hljs-string">"\n"</span></span><br><span class="line">				  &lt;&lt; <span class="hljs-string">"regtime: "</span> &lt;&lt; p.regtime &lt;&lt; <span class="hljs-string">"\n\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(<span class="hljs-string">"Persons.stru"</span>)</span></span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (Person p; p.get(<span class="hljs-built_in">cin</span>, <span class="hljs-built_in">cout</span>);) <span class="hljs-comment">//从屏幕读入Person直到空</span></span><br><span class="line">		fout &lt;&lt; p.putFileCSV();		  <span class="hljs-comment">//以CSV格式写入文件</span></span><br><span class="line">	fout.close();</span><br><span class="line">	<span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(<span class="hljs-string">"Persons.stru"</span>)</span></span>;</span><br><span class="line">	CSV csv;</span><br><span class="line">	csv.get(fin); <span class="hljs-comment">//读入CSV文件</span></span><br><span class="line">	fin.close();</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> line : csv.v) <span class="hljs-comment">//对于读入的每一行信息</span></span><br><span class="line">	&#123;</span><br><span class="line">		Person p;</span><br><span class="line">		p.getCSV(line);</span><br><span class="line">		<span class="hljs-built_in">cout</span> &lt;&lt; p;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多文件合并保存和读出"><a href="#多文件合并保存和读出" class="headerlink" title="多文件合并保存和读出"></a>多文件合并保存和读出</h2><h3 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h3><p>循环输入多个文件名（不超过200MB，可以自己确定），每输入一个，就把该文件的文件名（最多300字节）、文件大小(long)和文件内容写入文件FileSet.pak中，输入文件名为空时跳出循环。然后，读FileSet.pak，每读出一个文件就把它原来的文件名加上一个序号保存起来。</p>
<p>合并时可以先取得文件大小，然后边读边写。</p>
<h3 id="截屏运行结果-1"><a href="#截屏运行结果-1" class="headerlink" title="截屏运行结果"></a>截屏运行结果</h3><h3 id="源代码-1"><a href="#源代码-1" class="headerlink" title="源代码"></a>源代码</h3><p>数据的交换格式格式使用JSON，正文内容使用Base64编码。</p>
<h4 id="encode-cpp"><a href="#encode-cpp" class="headerlink" title="encode.cpp"></a>encode.cpp</h4><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> BUFSIZE = <span class="hljs-number">200</span> &lt;&lt; <span class="hljs-number">20</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> CONVERT_TABLE =</span><br><span class="line">	<span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span></span><br><span class="line">	<span class="hljs-string">"abcdefghijklmnopqrstuvwxyz"</span></span><br><span class="line">	<span class="hljs-string">"0123456789+/"</span>;</span><br><span class="line"><span class="hljs-keyword">char</span> buf[BUFSIZE];</span><br><span class="line"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">base64Encode</span><span class="hljs-params">(<span class="hljs-keyword">char</span> sourcebuf[], <span class="hljs-keyword">int</span> buflen)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">string</span> ret;</span><br><span class="line">	<span class="hljs-keyword">char</span> split3[<span class="hljs-number">3</span>];</span><br><span class="line">	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> split4[<span class="hljs-number">4</span>], len = buflen, i = <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">while</span> (len--)</span><br><span class="line">	&#123;</span><br><span class="line">		split3[i++] = *(sourcebuf++);</span><br><span class="line">		<span class="hljs-keyword">if</span> (i == <span class="hljs-number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			split4[<span class="hljs-number">0</span>] = (split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xfc</span>) &gt;&gt; <span class="hljs-number">2</span>;							   <span class="hljs-comment">//第一个字节取前6位并将其右移2位</span></span><br><span class="line">			split4[<span class="hljs-number">1</span>] = ((split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x03</span>) &lt;&lt; <span class="hljs-number">4</span>) + ((split3[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0xf0</span>) &gt;&gt; <span class="hljs-number">4</span>); <span class="hljs-comment">//第一个字节取后2位并左移4位 + 第二个字节取前4位并右移4位</span></span><br><span class="line">			split4[<span class="hljs-number">2</span>] = ((split3[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x0f</span>) &lt;&lt; <span class="hljs-number">2</span>) + ((split3[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xc0</span>) &gt;&gt; <span class="hljs-number">6</span>); <span class="hljs-comment">//第二个字节取后4位并左移2位 + 第三个字节取前2位并右移6位</span></span><br><span class="line">			split4[<span class="hljs-number">3</span>] = (split3[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x3f</span>);									   <span class="hljs-comment">//第三个字节取后六位并且无需移位</span></span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; ++j)										   <span class="hljs-comment">//从Base64编码表中查询split对应元素索引的Base64编码</span></span><br><span class="line">				ret += CONVERT_TABLE[split4[j]];</span><br><span class="line">			i = <span class="hljs-number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">if</span> (i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			split4[<span class="hljs-number">0</span>] = (split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xfc</span>) &gt;&gt; <span class="hljs-number">2</span>;</span><br><span class="line">			split4[<span class="hljs-number">1</span>] = (split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x03</span> &lt;&lt; <span class="hljs-number">4</span>);</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">2</span>; ++j)</span><br><span class="line">				ret += CONVERT_TABLE[split4[j]];</span><br><span class="line">			ret += <span class="hljs-string">"=="</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			split4[<span class="hljs-number">0</span>] = (split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xfc</span>) &gt;&gt; <span class="hljs-number">2</span>;</span><br><span class="line">			split4[<span class="hljs-number">1</span>] = ((split3[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x03</span>) &lt;&lt; <span class="hljs-number">4</span>) + ((split3[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0xf0</span>) &gt;&gt; <span class="hljs-number">4</span>);</span><br><span class="line">			split4[<span class="hljs-number">2</span>] = ((split3[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x0f</span>) &lt;&lt; <span class="hljs-number">2</span>);</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)</span><br><span class="line">				ret += CONVERT_TABLE[split4[j]];</span><br><span class="line">			ret += <span class="hljs-string">"="</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(<span class="hljs-string">"FileSet.pak"</span>)</span></span>;</span><br><span class="line">	fout &lt;&lt; <span class="hljs-string">"&#123;\"data\": [\n"</span>;</span><br><span class="line">	<span class="hljs-keyword">int</span> first = <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">string</span> name; <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Input file name:"</span>, getline(<span class="hljs-built_in">cin</span>, name);)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(name, ios::binary)</span></span>;</span><br><span class="line">		<span class="hljs-keyword">if</span> (!fin.is_open())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Can not open "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">"\n"</span>;</span><br><span class="line">			<span class="hljs-keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		fin.read(buf, BUFSIZE);</span><br><span class="line">		<span class="hljs-keyword">if</span> (first)</span><br><span class="line">			first = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			fout &lt;&lt; <span class="hljs-string">" ,\n"</span>;</span><br><span class="line">		fout &lt;&lt; <span class="hljs-string">" &#123;\n"</span></span><br><span class="line">			 &lt;&lt; <span class="hljs-string">"  \"name\": \""</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">"\",\n"</span></span><br><span class="line">			 &lt;&lt; <span class="hljs-string">"  \"size\": \""</span> &lt;&lt; to_string(fin.gcount()) &lt;&lt; <span class="hljs-string">"\",\n"</span></span><br><span class="line">			 &lt;&lt; <span class="hljs-string">"  \"content\": \""</span> &lt;&lt; base64Encode(buf, fin.gcount()) &lt;&lt; <span class="hljs-string">"\"\n"</span></span><br><span class="line">			 &lt;&lt; <span class="hljs-string">" &#125;"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	fout &lt;&lt; <span class="hljs-string">"\n]&#125;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="decode-cpp"><a href="#decode-cpp" class="headerlink" title="decode.cpp"></a>decode.cpp</h4><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> CONVERT_TABLE =</span><br><span class="line">    <span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span></span><br><span class="line">    <span class="hljs-string">"abcdefghijklmnopqrstuvwxyz"</span></span><br><span class="line">    <span class="hljs-string">"0123456789+/"</span>;</span><br><span class="line"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">base64Decode</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> &amp;s)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">    <span class="hljs-built_in">string</span>::const_iterator sourcebuf = s.begin();</span><br><span class="line">    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> buflen = s.size();</span><br><span class="line">    <span class="hljs-built_in">string</span> ret;</span><br><span class="line">    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> split3[<span class="hljs-number">3</span>];</span><br><span class="line">    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> split4[<span class="hljs-number">4</span>];</span><br><span class="line">    <span class="hljs-keyword">int</span> len = buflen, ec = <span class="hljs-number">0</span>, seg = buflen / <span class="hljs-number">4</span>; <span class="hljs-comment">//计算共可以切成几组</span></span><br><span class="line">    <span class="hljs-keyword">while</span> (sourcebuf[--len] == <span class="hljs-string">'='</span>)             <span class="hljs-comment">//判断末尾有几个等号，由此可知最后四个字节该如何处理</span></span><br><span class="line">        ++ec;</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; seg; ++k)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; ++j) <span class="hljs-comment">//每四字节为一组进行处理</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="hljs-keyword">int</span> index = <span class="hljs-number">0</span>;</span><br><span class="line">            <span class="hljs-keyword">char</span> c = *(sourcebuf++);</span><br><span class="line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; CONVERT_TABLE.size(); ++i) <span class="hljs-comment">//由码索引数</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="hljs-keyword">if</span> (CONVERT_TABLE[i] == c)</span><br><span class="line">                &#123;</span><br><span class="line">                    index = i;</span><br><span class="line">                    <span class="hljs-keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            split4[j] = index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">if</span> (k + <span class="hljs-number">1</span> == seg)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="hljs-keyword">if</span> (ec == <span class="hljs-number">2</span>) <span class="hljs-comment">//当末尾有两个等号时的处理</span></span><br><span class="line">            &#123;</span><br><span class="line">                split3[<span class="hljs-number">0</span>] = (split4[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-number">2</span>) + ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x30</span>) &gt;&gt; <span class="hljs-number">4</span>);</span><br><span class="line">                ret += split3[<span class="hljs-number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ec == <span class="hljs-number">1</span>) <span class="hljs-comment">//当末尾有一个等号时的处理</span></span><br><span class="line">            &#123;</span><br><span class="line">                split3[<span class="hljs-number">0</span>] = (split4[<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-number">2</span>) + ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x30</span>) &gt;&gt; <span class="hljs-number">4</span>);</span><br><span class="line">                split3[<span class="hljs-number">1</span>] = ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x0f</span>) &lt;&lt; <span class="hljs-number">4</span>) + ((split4[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x3c</span>) &gt;&gt; <span class="hljs-number">2</span>);</span><br><span class="line">                ret += split3[<span class="hljs-number">0</span>];</span><br><span class="line">                ret += split3[<span class="hljs-number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="hljs-keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                split3[<span class="hljs-number">0</span>] = ((split4[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x3f</span>) &lt;&lt; <span class="hljs-number">2</span>) + ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x30</span>) &gt;&gt; <span class="hljs-number">4</span>);</span><br><span class="line">                split3[<span class="hljs-number">1</span>] = ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x0f</span>) &lt;&lt; <span class="hljs-number">4</span>) + ((split4[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x3c</span>) &gt;&gt; <span class="hljs-number">2</span>);</span><br><span class="line">                split3[<span class="hljs-number">2</span>] = ((split4[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x03</span>) &lt;&lt; <span class="hljs-number">6</span>) + split4[<span class="hljs-number">3</span>];</span><br><span class="line">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; ++j)</span><br><span class="line">                    ret += split3[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            split3[<span class="hljs-number">0</span>] = ((split4[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x3f</span>) &lt;&lt; <span class="hljs-number">2</span>) + ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x30</span>) &gt;&gt; <span class="hljs-number">4</span>);</span><br><span class="line">            split3[<span class="hljs-number">1</span>] = ((split4[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0x0f</span>) &lt;&lt; <span class="hljs-number">4</span>) + ((split4[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x3c</span>) &gt;&gt; <span class="hljs-number">2</span>);</span><br><span class="line">            split3[<span class="hljs-number">2</span>] = ((split4[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0x03</span>) &lt;&lt; <span class="hljs-number">6</span>) + split4[<span class="hljs-number">3</span>];</span><br><span class="line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; ++j)</span><br><span class="line">                ret += split3[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="hljs-keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">    <span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(<span class="hljs-string">"FileSet.pak"</span>)</span></span>;</span><br><span class="line">    <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; mp;</span><br><span class="line">    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>, tmp;</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">string</span> s; getline(fin, s);)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="hljs-keyword">if</span> (s.find(<span class="hljs-string">"["</span>) != s.npos)</span><br><span class="line">            <span class="hljs-keyword">continue</span>;</span><br><span class="line">        <span class="hljs-keyword">if</span> (s.find(<span class="hljs-string">"]"</span>) != s.npos)</span><br><span class="line">            <span class="hljs-keyword">break</span>;</span><br><span class="line">        <span class="hljs-keyword">if</span> (tmp = s.rfind(<span class="hljs-string">","</span>), tmp != s.npos)</span><br><span class="line">            s.erase(tmp);</span><br><span class="line">        <span class="hljs-keyword">if</span> (s.find(<span class="hljs-string">"&#125;"</span>) != s.npos)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(to_string(++cnt) + <span class="hljs-string">"."</span> + mp[<span class="hljs-string">"name"</span>])</span></span>;</span><br><span class="line">            fout &lt;&lt; base64Decode(mp[<span class="hljs-string">"content"</span>]);</span><br><span class="line">            mp.clear();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tmp = s.find(<span class="hljs-string">":"</span>), tmp != s.npos)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="hljs-built_in">string</span> t = s.substr(tmp + <span class="hljs-number">1</span>);</span><br><span class="line">            s.erase(tmp);</span><br><span class="line">            s.erase(s.find_last_not_of(<span class="hljs-string">"\" "</span>) + <span class="hljs-number">1</span>);</span><br><span class="line">            t.erase(t.find_last_not_of(<span class="hljs-string">"\" "</span>) + <span class="hljs-number">1</span>);</span><br><span class="line">            mp.insert(&#123;s.substr(s.find_first_not_of(<span class="hljs-string">"\" "</span>)), t.substr(t.find_first_not_of(<span class="hljs-string">"\" "</span>))&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="实验体会"><a href="#实验体会" class="headerlink" title="实验体会"></a>实验体会</h1><p>在结构数据保存和读出实验中，使用了CSV表格的格式来存储数据，然而这个格式操作有些繁琐，因此单独设计了一个struct对其进行操作，使得代码更加清晰易读。</p>
<p>在多文件的合并保存和读出实验中，使用了流行的JSON格式来保存数据。然而，使用JSON保存文件的正文时，很难区分JSON本身格式上的内容和文本文档的内容；并且很多文件是不可以按照ascii文本文档的方式打开的。解决方式是使用二进制方式打开文件，并对其内容使用Base64形式进行编码，最终得以解决问题。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.395Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/并行与分布式计算/">并行与分布式计算</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 分钟 读完 (大约 1411 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-03-04-并行与分布式计算（1）/"></a>
            
        </h1>
        <div class="content">
            <h1 id="课后作业"><a href="#课后作业" class="headerlink" title="课后作业"></a>课后作业</h1><blockquote>
<p>Write an essay describing a research problem in your major that would benefit from the use of parallel computing. Provide a rough outline of how parallelism would be used. Would you use task- or data-parallelism?</p>
</blockquote>
<p>一组数据是否适合使用并行计算，主要有三条判断标准：</p>
<ol>
<li>能否将工作分解成为方便同时处理的离散成分；</li>
<li>能否随时并且及时的执行多个程序指令；</li>
<li>多处理单元解决该问题的耗时小于单处理单元。</li>
</ol>
<p>满足上述三个条件，就可以使用并行计算，也就是说，在并行计算系统中，需要将一个应用分解成多个子任务，分配给不同的处理单元，各个处理单元之间相互协同，并行地执行子任务，从而达到加速的目的。</p>
<p>我想到的是在<strong>图像处理</strong>领域的应用。有个日本技术宅在GitHub上开源了一个项目<a href="https://github.com/nagadomi/waifu2x" target="_blank" rel="noopener">nagadomi/waifu2x</a>，获得了13k+的Stars；它使用卷积神经网络对动漫风格的图片进行放大操作（也支持照片），可以在<a href="http://waifu2x.udp.jp/" target="_blank" rel="noopener">官方网站</a>进行简单的体验，对于二次元图片来说，扩图降噪一次搞定，效果非常之好，可谓是神器了。原理是基于人工智能神经网络运算，作者将一堆 gal 的图片缩小再把他们的原图放到一起，让 waifu 去学习如何放大拉伸，所以一般 waifu 下来都有一个 model 文件夹，这东西就是他的训练集，相当于人的大脑。</p>
<p><img src="https://raw.githubusercontent.com/nagadomi/waifu2x/master/images/slide.png" alt="waifu2x简单示例"></p>
<p>每一幅图像，都可以理解为是一个或多个矩阵，而矩阵数据元素之间，从存储和处理上来看，本身就十分整齐，有很高的相关性，非常方便线程模型对其进行批量存取和处理；图像处理算法对于其中的像素点来说往往有较强的规律性，如果算法本身不是有很强的先后时序或逻辑上的先后依赖性，大多易于拆解为能够并行处理的若干单元，处理方法相同而只是像素数据不同；当要处理的点很多时，多处理单元的耗时往往远远小于单处理单元。</p>
<p>因此，图像数据几乎天生就适合使用并行计算来进行处理；使用并行计算来处理图像，最大的优势在于运算速度快。以上面举例的waifu2x算法为例，它同时有针对NVIDIA CUDA并行优化的版本和针对CPU的串行版本。理想情况下，假设现在CPU处理一个点的平均时间是1ms，而GPU每个线程处理一个点平均需要100ms。对于一个大小为$10\times 10$个点的任务，CPU依次处理完这些点需要100ms，GPU同时处理这100个点也需要100ms的时间，这时候，两者的区别不大。而当我们把任务换成$100\times 100$大小的时候，CPU需要10000ms来处理，而GPU依然是100ms，此时，GPU的优势就体现出来了。如果是大小为$1000\times 1000$的点，GPU的运算速度将比CPU快若干个数量级。实际情况下也是如此，我在自己的机器上测试，使用waifu2x的并行算法将一张图片拉到4k只需要几秒，而CPU跑了快五分钟。</p>
<p>当然，这并不是说所有图像并行计算速度都比串行计算快，由于受到处理器核心速度、缓存大小和单元间通信等条件影响，串行计算硬件的运算速度，往往要快于并行计算单个处理单元或处理线程的平均速度。对于要进行相同计算的点数量较少的图像，串行计算的速度或许具有一定优势，但是，当图像中需要处理的点超过一定数量时，并行计算的优势就体现出来了。可以说，要处理的点越多，并行计算的速度优势就越明显。</p>
<p>需要注意的是，这里所说的“点”并不一定是特指图像中的像素，也有可能是同样一套图像处理算法在某个位置的运算过程和结果。<strong>通常，在图像处理领域中更多使用的是数据并行。</strong></p>
<blockquote>
<p>Assume that you have the followiog mix of instructions with average CPIs:</p>
<table>
<thead>
<tr>
<th></th>
<th>% of Mix</th>
<th>Average CPI</th>
</tr>
</thead>
<tbody><tr>
<td>ALU</td>
<td>47%</td>
<td>6.7</td>
</tr>
<tr>
<td>Load</td>
<td>19%</td>
<td>7.9</td>
</tr>
<tr>
<td>Branch</td>
<td>20%</td>
<td>5.0</td>
</tr>
<tr>
<td>Store</td>
<td>14%</td>
<td>7.1</td>
</tr>
</tbody></table>
<p>The dock rate for this machine is 1 GHz.</p>
<p>You want to improve the performance of this machine, and are considering redesigning your multiplier to reduce the average CPI of multiply instructions. <strong>(Digress - why do multiplies take longer than adds?)</strong> If you make this change, the CPI of multiply instructions would drop to 6 (from 8). The percentage of ALU instructions that are multiply instructions is 23%. How much will perlormance improve by?</p>
</blockquote>
<p>乘法器慢于加法器，是因为乘法电路是由更基本加法电路组成的。</p>
<p>ALU除了乘法之外部分的平均CPI：$(6.7-8\times 23%)/77%\approx 6.3$</p>
<p>优化乘法之后ALU的平均CPI：$6.3\times 77%+6\times 23%\approx 6.24$</p>
<p>原先的平均CPI：$6.7\times 47%+7.9\times 19%+5.0\times 20%+7.1\times 14%=6.644$</p>
<p>优化乘法之后的平均CPI：$6.24\times 47%+7.9\times 19%+5.0\times 20%+7.1\times 14%=6.4278$</p>
<p>因此性能被优化了$(6.644-6.4278)/6.644\approx 3.25%$</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.394Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/程序设计/">程序设计</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15 分钟 读完 (大约 2319 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-02-27-STL简单整理/"></a>
            
        </h1>
        <div class="content">
            <blockquote>
<p>参考了<a href="https://zh.cppreference.com/w/cpp/named_req" target="_blank" rel="noopener">C++中文手册\具名要求</a>，感谢社区内的志愿者。</p>
</blockquote>
<p>STL的全称是Standard Template Library，即标准模板库。STL是C++标准程序库的核心，深刻影响了标准程序库的整体结构，STL内的所有组件都由模板（template）构成，旨在为问题提供最通用的容器和解决算法。</p>
<h1 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h1><p>大部分算法都定义在算法库<code>algorithm</code>中，另外还在<code>&lt;numberic&gt;</code>中定义了一些数值泛型算法。标准库中提供了上百种算法，然而，死记硬背是不需要的，算法库有一致的结构。除了少数特例之外，标准库都对一个迭代器范围内的元素进行操作，我们将这个元素范围称为“输入范围”。接受输入范围的元素总是是用左闭合区间来表示这个范围。</p>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><p>STL中大量使用迭代器（iterator）这一通用概念在一些数据结构内访问数据，下面先进行简要介绍。</p>
<h3 id="表示一个元素序列的几种方法"><a href="#表示一个元素序列的几种方法" class="headerlink" title="表示一个元素序列的几种方法"></a>表示一个元素序列的几种方法</h3><p>例如，有如下十个数线性排列，下标地址从<code>0</code>开始：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">40,41,42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure>

<h4 id="全闭合区间"><a href="#全闭合区间" class="headerlink" title="全闭合区间"></a>全闭合区间</h4><p>数学上的表示是$[left,right]$或$[first,last]$，用这个序列第一个和最后一个元素的地址表示一个区间内的所有元素，则$[2,9]$表示了序列</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">42,43,44,45,46,47,48,49</span><br></pre></td></tr></table></figure>

<p>在全闭合区间中，$first&gt;last$时表示一个空区间。</p>
<h4 id="左闭合区间"><a href="#左闭合区间" class="headerlink" title="左闭合区间"></a>左闭合区间</h4><p>数学上的表示是$[begin,end)$，用这个序列第一个和最后一个元素<strong>后一个</strong>的地址来表示一个区间内的左右元素，相当于全闭合区间里的$[begin,end-1]$。<code>end</code>可以指向一个不存在元素的地址，例如$[2,10)$同样表示了上面这个序列。</p>
<p>在左闭合区间中，$first=last$时表示一个空区间。</p>
<h4 id="子串区间"><a href="#子串区间" class="headerlink" title="子串区间"></a>子串区间</h4><p>数学上的表示是$[position,position+length)$，表示了从给定元素开始的若干元素。例如，$[2,2+8)$同样表示了上面这个序列。</p>
<p>C标准库的很多函数都是使用这一方法表示一个区间，例如<code>qsort</code>、<code>memset</code>等。</p>
<p>在子串区间中，<code>length=0</code>表示一个空区间。</p>
<h3 id="左闭合区间表示的优越性"><a href="#左闭合区间表示的优越性" class="headerlink" title="左闭合区间表示的优越性"></a>左闭合区间表示的优越性</h3><h4 id="访问方便，且对迭代器的要求较低"><a href="#访问方便，且对迭代器的要求较低" class="headerlink" title="访问方便，且对迭代器的要求较低"></a>访问方便，且对迭代器的要求较低</h4><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">for</span> (it=begin; it!=end; ++it) &#123;&#125; <span class="hljs-comment">// 使用左闭合区间</span></span><br><span class="line"><span class="hljs-keyword">for</span> (it=left; it&lt;=right; ++it) &#123;&#125; <span class="hljs-comment">// 使用全闭合区间</span></span><br><span class="line"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i!=length; ++i) &#123;&#125; <span class="hljs-comment">// 使用子串区间</span></span><br></pre></td></tr></table></figure>

<p>在遍历一个元素序列时，三种表示法通常像上面这样遍历。这时，全闭合区间使用了<code>&lt;=</code>运算，要求高于<code>!=</code>（通常，一个元素可以比较大小时一定可以判断相等与否；但反之不然）；子串区间需要额外维护一个计数器，对于很多不能按下标访问的数据结构来说显得不够方便。</p>
<h4 id="查找方便"><a href="#查找方便" class="headerlink" title="查找方便"></a>查找方便</h4><p>查找target，返回的位置==end，说明在范围内没有找到target。</p>
<h4 id="便于二分"><a href="#便于二分" class="headerlink" title="便于二分"></a>便于二分</h4><p>当需要取中间元素的时候，<code>mid=begin+end/2</code>的定位问题。如果区间元素的个数是奇数个，那么mid永远是指向中间的元素；如果区间元素是偶数个，那么mid永远指向后半段区间的首元素。这样做在二分查找等一些算法的实现上特别有优势。</p>
<p>mid的规范写法是<code>mid=begin+(end-begin)/2</code>。</p>
<h4 id="快速统计区间内元素"><a href="#快速统计区间内元素" class="headerlink" title="快速统计区间内元素"></a>快速统计区间内元素</h4><p>$end-begin=length$。推论是，如果$begin==end$那么表示的是一个空区间。</p>
<h3 id="五类迭代器"><a href="#五类迭代器" class="headerlink" title="五类迭代器"></a>五类迭代器</h3><blockquote>
<p>在C++17中，定义了第6类迭代器：相接迭代器（contiguous iterator），其所指向的逻辑相邻元素也在内存中物理上相邻。<br>指向数组元素的指针满足相接迭代器的所有要求，但容器<code>deque</code>不满足。</p>
</blockquote>
<blockquote>
<p>在C++20中，定义了第7类迭代器：常表达式迭代器（constexpr iterator）是能在常量表达式求值中使用的迭代器。</p>
</blockquote>
<blockquote>
<p>C++20 引入基于概念的新迭代器系统，它异于 C++17 及之前的迭代器。虽然基础分配法保持类似，但单独的迭代器类别的要求有些区别。</p>
</blockquote>
<p>在C++中，一图解释五类迭代器之间的继承关系：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">输入迭代器--&gt;前向迭代器</span><br><span class="line">输出迭代器--&gt;前向迭代器</span><br><span class="line">前向迭代器--&gt;双向迭代器</span><br><span class="line">双向迭代器--&gt;随机访问迭代器</span><br></pre></td></tr></table></figure>

<h4 id="输入迭代器（input-iterator）"><a href="#输入迭代器（input-iterator）" class="headerlink" title="输入迭代器（input iterator）"></a>输入迭代器（input iterator）</h4><p>只读，不写；单遍扫描，只能递增。</p>
<p>输入迭代器只支持顺序访问，通常用于读取序列中的元素。对于一个输入迭代器<code>it</code>，<code>*it++</code>保证是有效的，但递增它可能导致所有其他指向流的迭代器失效。其结果就是，不保证其状态可以保存下来并用来访问元素。因此，输入迭代器只能用于单遍扫描的算法。支持如下操作：</p>
<ul>
<li>相等（<code>==</code>）、不等（<code>!=</code>）比较。</li>
<li>用于推进迭代器的前置和后置递增（<code>++</code>）。</li>
<li>解引用（<code>*</code>），只能出现在赋值运算的右侧；箭头运算符（<code>-&gt;</code>），<code>it-&gt;member</code>等价于<code>(*it)-&gt;member</code>。</li>
</ul>
<p>算法<code>find</code>要求输入迭代器；而类型<code>istream_iterator</code>是一种输入迭代器。</p>
<h4 id="输出迭代器（output-iterator）"><a href="#输出迭代器（output-iterator）" class="headerlink" title="输出迭代器（output iterator）"></a>输出迭代器（output iterator）</h4><p>只写，不读；单遍扫描，只能递增。可以看作输入迭代器功能上的补集。</p>
<p>只能向解引用的输出迭代器赋值一次，类似输入迭代器，输出迭代器也只能用于单遍扫描的算法，通常用作算法的目标位置。支持如下操作：</p>
<ul>
<li>用于推进迭代器的前置和后置递增（<code>++</code>）。</li>
<li>解引用（<code>*</code>），只能出现在赋值运算的左侧。</li>
</ul>
<p>算法<code>fill</code>要求输出迭代器；而类型<code>ostream_iterator</code>是一种输出迭代器。</p>
<h4 id="前向迭代器（forward-iterator）"><a href="#前向迭代器（forward-iterator）" class="headerlink" title="前向迭代器（forward iterator）"></a>前向迭代器（forward iterator）</h4><p>可读写；多遍扫描，只能递增。</p>
<p>可以读写元素，只能在序列中沿着一个方向移动，支持所有输入迭代器和输出迭代器的操作，而且可以多次读写同一个元素。因此，可以保存前向迭代器的状态，使用前向迭代器的算法可以进行多遍扫描。</p>
<p>算法<code>replace</code>要求前向迭代器；容器<code>forward_list</code>上的迭代器是前向迭代器。</p>
<h4 id="双向迭代器（bidrectional-iterator）"><a href="#双向迭代器（bidrectional-iterator）" class="headerlink" title="双向迭代器（bidrectional iterator）"></a>双向迭代器（bidrectional iterator）</h4><p>可读写；多遍扫描，能递增递减。</p>
<p>可正向/反向读写序列中的元素。除支持所有前向迭代器的操作之外，双向迭代器还支持前置和后置递减（<code>--</code>）。</p>
<p>算法<code>reverse</code>要求双向迭代器；除了<code>forward_list</code>之外，其他标准库容器上的迭代器都是双向迭代器。</p>
<h4 id="随机访问迭代器（random-access-iterator）"><a href="#随机访问迭代器（random-access-iterator）" class="headerlink" title="随机访问迭代器（random-access iterator）"></a>随机访问迭代器（random-access iterator）</h4><p>可读写；多遍扫描，支持全部迭代器运算。</p>
<p>提供在常数时间内访问序列中任意元素的能力，除支持双向迭代器的所有操作外，还支持：</p>
<ul>
<li>用于比较两个迭代器的相对位置（<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code>）。</li>
<li>迭代器和一个整数值的加减运算（<code>+</code>、<code>+=</code>、<code>-</code>、<code>-=</code>），计算结果迭代器在序列中前进或后退给定整数后的迭代器。</li>
<li>迭代器之间的减法（<code>-</code>），得到两个迭代器之间的距离。</li>
<li>下标运算符（<code>[]</code>），<code>it[n]</code>与<code>*(it[n])</code>等价。</li>
</ul>
<p>算法<code>sort</code>要求随机访问迭代器；容器<code>vector</code>上的迭代器和用于访问内置数组的指针是随机访问迭代器。</p>
<h2 id="算法概览"><a href="#算法概览" class="headerlink" title="算法概览"></a><a href="https://zh.cppreference.com/w/cpp/algorithm" target="_blank" rel="noopener">算法概览</a></h2><h2 id="定制算法"><a href="#定制算法" class="headerlink" title="定制算法"></a>定制算法</h2><h3 id="谓词"><a href="#谓词" class="headerlink" title="谓词"></a><a href="https://zh.cppreference.com/w/cpp/named_req/Predicate" target="_blank" rel="noopener">谓词</a></h3><p>有单参数，且不修改它，返回值可转换为 bool 的函数对象。</p>
<h3 id="二元谓词"><a href="#二元谓词" class="headerlink" title="二元谓词"></a><a href="https://zh.cppreference.com/w/cpp/named_req/BinaryPredicate" target="_blank" rel="noopener">二元谓词</a></h3><p>有双参数，且不修改它，返回值可转换为 bool 的函数对象。</p>
<h4 id="比较"><a href="#比较" class="headerlink" title="比较"></a><a href="https://zh.cppreference.com/w/cpp/named_req/Compare" target="_blank" rel="noopener">比较</a></h4><p>建立顺序关系的二元谓词 (BinaryPredicate) 。应用到满足比较 (Compare) 类型对象的函数调用运算的返回值，在按语境转换成 bool 时，若此类型所引入的严格弱序关系中调用的第一参数先出现于第二参数，则生成 true ，否则生成 false 。</p>
<h1 id="容器"><a href="#容器" class="headerlink" title="容器"></a><a href="https://zh.cppreference.com/w/cpp/named_req/Container" target="_blank" rel="noopener">容器</a></h1><p>容器（Container）是用于存储其他对象，并管理<strong>其所容纳的对象所用的内存</strong>的对象。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.386Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/博客搭建/">博客搭建</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    18 分钟 读完 (大约 2743 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-01-18-基于Jekyll搭建个人博客/"></a>
            
        </h1>
        <div class="content">
            <h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>最开始我是在<a href="https://blog.csdn.net/w_weilan" target="_blank" rel="noopener">CSDN</a>上写博客的。博客写了一年多，访问量勉强破万，感觉其中至少有三成是自己贡献的。而且CSDN上的广告是越来越多，网页编辑器也是越来越不好用。</p>
<p>想要重新开始，和过去告别。也从此转移自己写博客的阵地。考虑过转投暂时还比较干净而且可以部分定义页面的博客园，但是最终还是决定在<a href="https://pages.github.com/" target="_blank" rel="noopener">Github Pages</a>上搭建属于自己的博客。</p>
<p>然后，翻了一些网上的教程，用<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a>框架和<a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">NexT</a>主题搭了一个比较素雅的符合个人审美的博客。然而，Hexo搭建的博客需要先在本地生成博客页面然后再上传到服务器上，每次发博客都需要在电脑重新生成页面并上传，感觉没有那么方便。在不同电脑上想要发博客更是十分困难，感觉如果胡乱操作后本地部署的文件发生了一定的错乱，恢复起来会十分麻烦。</p>
<p>后来发现，Github Pages原生支持<a href="https://www.jekyll.com.cn/" target="_blank" rel="noopener">Jekyll</a>，因此如果只需要推送文章可以直接在github的仓库里做。于是决定在期末考试后用Jekyll重新搭建个人博客。原来的博客不再维护。</p>
<h1 id="构思"><a href="#构思" class="headerlink" title="构思"></a>构思</h1><p>目前博客的demo如下：</p>
<!-- ![](/public/image/2019-01-18-1.jpg)

![](/public/image/2019-01-18-2.jpg) -->

<p>想搭建一个足够干净、页面几乎不要有多余元素的博客，同时博客的功能还要足够丰富，满足我以下的需求：</p>
<ul>
<li><input checked disabled type="checkbox"> 用Markdown写博客</li>
<li><input checked disabled type="checkbox"> 支持Latex公式</li>
<li><input checked disabled type="checkbox"> 支持mermaid等插件</li>
<li><input checked disabled type="checkbox"> 个性化Live2D</li>
<li><input checked disabled type="checkbox"> 分享一些我在其他网站的个人账号</li>
<li><input checked disabled type="checkbox"> 移动端适配</li>
<li><input checked disabled type="checkbox"> 足够快的加载速度</li>
<li><input checked disabled type="checkbox"> 访问量统计，评论互动</li>
<li><input disabled type="checkbox"> ……（需求是会逐渐增长的，参见<a href="https://wu-kan.github.io/about" target="_blank" rel="noopener">关于</a>）</li>
</ul>
<p>其中，Live2D是我某次访问别人的博客初次见到的，感觉非常吸引人。最终的目标是去掉网页上所有多余的元素，只剩下博文和Live2D看板娘，看板娘本身还可以作为博客访问的导航，感觉会十分有新意。</p>
<h1 id="搭建过程（不定期更新）"><a href="#搭建过程（不定期更新）" class="headerlink" title="搭建过程（不定期更新）"></a>搭建过程（不定期更新）</h1><p>我目前读的专业是计科超算方向，所以软件工程专业相关方面的基础几乎为0😌，大部分的内容都是参考网上教程慢慢摸索的，假如对某些过程有意见和建议欢迎向我提出！</p>
<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>这个学期选了一门Linux相关的公选课，感觉还不错，因此直接把开发环境是搭建在Windows Subsystem for Linux（简称WSL）上了，Windows下也可以直接访问其中的环境，详见<a href="https://wu-kan.github.io/posts/linux/Windows-Subsystem-for-Linux" target="_blank" rel="noopener">这篇博客</a>。<br>Jekyll是基于Ruby和Node.js环境的，需要先安装进来。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ruby ruby-dev nodejs</span><br></pre></td></tr></table></figure>

<p>Ruby自带源连接速度很慢，切换镜像加速（感谢评论区指出，原来的淘宝源炸了）。然后安装Jekyll和Markdown支持。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/</span><br><span class="line">sudo gem install jekyll</span><br></pre></td></tr></table></figure>

<p>现在，找在目录下打开终端，运行如下代码，加入新建了一个名为<code>blog</code>的文件夹，则说明安装成功了。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jekyll new blog</span><br></pre></td></tr></table></figure>

<h2 id="结构解析"><a href="#结构解析" class="headerlink" title="结构解析"></a>结构解析</h2><p>观察刚刚生成的博客目录，有如下的结构：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├──_config.yml</span><br><span class="line">├── _drafts</span><br><span class="line">|   ├── begin-with-the-crazy-ideas.textile</span><br><span class="line">|   └── on-simplicity-in-technology.markdown</span><br><span class="line">├── _includes</span><br><span class="line">|   ├── footer.html</span><br><span class="line">|   └── header.html</span><br><span class="line">├── _layouts</span><br><span class="line">|   ├── default.html</span><br><span class="line">|   └── post.html</span><br><span class="line">├── _posts</span><br><span class="line">|   ├── 2007-10-29-why-every-programmer-should-play-nethack.textile</span><br><span class="line">|   └── 2009-04-26-barcamp-boston-4-roundup.textile</span><br><span class="line">├── _site</span><br><span class="line">├── .jekyll-metadata</span><br><span class="line">└── index.html</span><br></pre></td></tr></table></figure>

<p>它的结构还算是比较简单清晰，详细功能如下表。</p>
<table>
<thead>
<tr>
<th>文件/目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>_config.yml</td>
<td>保存配置数据。很多配置选项都可以直接在命令行中进行设置，但是如果把那些配置写在这儿，就不用非要去记住那些命令了。</td>
</tr>
<tr>
<td>_drafts</td>
<td>drafts（草稿）是未发布的文章。这些文件的格式中都没有 title.MARKUP 数据。学习如何使用草稿。</td>
</tr>
<tr>
<td>_includes</td>
<td>可以加载这些包含部分到的布局或者文章中以方便重用。</td>
</tr>
<tr>
<td>_layouts</td>
<td>layouts（布局）是包裹在文章外部的模板。布局可以在 YAML 头信息中根据不同文章进行选择</td>
</tr>
<tr>
<td>_posts</td>
<td>这里放的就是的文章了。文件格式很重要，必须要符合:YEAR-MONTH-DAY-title.MARKUP。 永久链接 可以在文章中自己定制，但是数据和标记语言都是根据文件名来确定的。</td>
</tr>
<tr>
<td>_data</td>
<td>格式化好的网站数据应放在这里。jekyll 的引擎会自动加载在该目录下所有的 yaml 文件（后缀是 .yml, .yaml, .json 或者 .csv ）。这些文件可以经由 ｀site.data｀ 访问。如果有一个 members.yml 文件在该目录下，就可以通过 site.data.members 获取该文件的内容。</td>
</tr>
<tr>
<td>_site</td>
<td>一旦 Jekyll 完成转换，就会将生成的页面放在这里（默认）。最好将这个目录放进 .gitignore 文件中。</td>
</tr>
<tr>
<td>.jekyll-metadata</td>
<td>该文件帮助 Jekyll 跟踪哪些文件从上次建立站点开始到现在没有被修改，哪些文件需要在下一次站点建立时重新生成。该文件不会被包含在生成的站点中。将它加入到 .gitignore 文件可能是一个好注意。</td>
</tr>
<tr>
<td>index.html and other HTML, Markdown, Textile files</td>
<td>如果这些文件中包含 YAML 头信息 部分，Jekyll 就会自动将它们进行转换。当然，其他的如 .html, .markdown, .md, 或者 .textile 等在的站点根目录下或者不是以上提到的目录中的文件也会被转换。</td>
</tr>
<tr>
<td>Other Files/Folders</td>
<td>其他一些未被提及的目录和文件如 css 还有 images 文件夹， favicon.ico 等文件都将被完全拷贝到生成的 site 中。</td>
</tr>
</tbody></table>
<h2 id="选取模板"><a href="#选取模板" class="headerlink" title="选取模板"></a>选取模板</h2><p>和丰富精美的Hexo比起来，好的Jekyll模板真的是太少了…经过漫长时间的挑选，最终选择在<a href="https://github.com/poole/lanyon" target="_blank" rel="noopener">lanyon</a>主题的基础上修改啦。</p>
<p>这里选我自己的博客为模板，也可以在GitHub上慢慢翻一些别人的博客或模板。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="hljs-built_in">clone</span> https://github.com/wu-kan/wu-kan.github.io YourBlog</span><br></pre></td></tr></table></figure>

<h2 id="发送到Github托管"><a href="#发送到Github托管" class="headerlink" title="发送到Github托管"></a>发送到Github托管</h2><p>把本地文件修改后，上传到博客仓库的<code>master</code>或者<code>gh-pages</code>分支即可。</p>
<h2 id="定制"><a href="#定制" class="headerlink" title="定制"></a>定制</h2><p>我把博客实现的的插件基本上都封装起来了，拿走的流程都差不多：</p>
<ul>
<li>将我博客代码仓库下<code>_includes\</code>相关文件加入你自己的<code>_includes</code></li>
<li>在你的<code>_config.yml</code>内加入相关配置项（如果有的话，可以参看我的）</li>
<li>最后在需要这个插件的地方加入<code>include语句</code>即可</li>
</ul>

### 加入Live2D看板娘
参考[网页添加 Live2D 看板娘](https://www.fghrsh.net/post/123.html)。

已经将相关代码封装，将我博客代码仓库下`_includes\live2d-widget.html`加入你自己的`_includes`，在`<body>`标签后加入如下代码。
undefined

随后在你的`_config.yml`内加入如下配置项：
undefined

其中path是你自己live2d的位置，也可以在我博客仓库下`/public/live2d-widget/`找到。
需要提前引入`jQuery`和`fontawesome`。

 - 后端api暂时使用了[fghrsh](https://www.fghrsh.net/post/170.html)提供的api，感谢。
 - 基于[stevenjoezhang/live2d-widget](https://github.com/stevenjoezhang/live2d-widget)基础上修改而成，感谢原作者。

### 数学公式渲染
这里选择速度更快的KaTeX来渲染，参考[使用KaTeX代替MathJax渲染公式](https://www.jianshu.com/p/f2b28954d902)。

已经将相关代码封装，将我博客代码仓库下`_includes\katex.html`加入你自己的`_includes`，在`<body>`标签后加入如下代码。
undefined

随后在你的`_config.yml`内加入如下配置项：
undefined

### mermaid流程图
已经将相关代码封装，将我博客代码仓库下`_includes\mermaid.html`加入你自己的`_includes`，在`<body>`标签后加入如下代码。
undefined

随后在你的`_config.yml`内加入如下配置项：
undefined

### valine评论系统
配置详见[官方手册](https://valine.js.org/)，说得很清楚了。

已经将相关代码封装，将我博客代码仓库下`_includes\valine.html`加入你自己的`_includes`，在`<body>`标签内加入如下代码。
undefined

随后在你的`_config.yml`内加入如下配置项（这是我的，请根据官方手册上的说明获取自己的参数）：
undefined

需要提前加载`av.min.js`操作leanCload。

<h1 id="下一步计划"><a href="#下一步计划" class="headerlink" title="下一步计划"></a>下一步计划</h1><p>详细的开发计划及建站内容详见<a href="https://wu-kan.github.io/about" target="_blank" rel="noopener">博客详情页</a>。</p>
<p>从<a href="https://magical-girl.site/" target="_blank" rel="noopener">这个页面</a>得到的灵感，目标是博客上除了文章和作为导航的Live2D之外不出现其他的模块，尽量的干净、快速。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>大部分的参考链接已在原文给出，同时搭建本博客的过程中还参考了以下内容，感谢作者们：</p>
<ul>
<li><a href="https://www.jianshu.com/p/9f198d5779e6" target="_blank" rel="noopener">Jekyll + Github Pages 博客搭建入门</a></li>
<li><a href="https://blog.csdn.net/ds19991999/article/details/81516568" target="_blank" rel="noopener">Jekyll博客Next主题超深度配置</a></li>
<li><a href="https://www.jianshu.com/p/bb184f61c9ae" target="_blank" rel="noopener">【应用软件】Jekyll 配置</a></li>
</ul>
</body></body></body></body>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.385Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Linux/">Linux</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 分钟 读完 (大约 1673 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2018-12-14-Windows Subsystem for Linux/">Windows Subsystem for Linux入门：安装+配置图形界面+中文环境+vscode</a>
            
        </h1>
        <div class="content">
            <h2 id="什么是WSL"><a href="#什么是WSL" class="headerlink" title="什么是WSL"></a>什么是WSL</h2><blockquote>
<p>Windows Subsystem for Linux（简称WSL）是一个为在Windows 10上能够原生运行Linux二进制可执行文件（ELF格式）的兼容层。它是由微软与Canonical公司合作开发，目标是使纯正的Ubuntu 14.04 “Trusty Tahr”映像能下载和解压到用户的本地计算机，并且映像内的工具和实用工具能在此子系统上原生运行。</p>
</blockquote>
<p>以上来自<a href="https://baike.baidu.com/item/wsl/20359185" target="_blank" rel="noopener">百度百科</a>。简单来说，WSL是以软件的形式运行在Windows下的子系统。先来看一下我的最终完成效果吧，其实和真正的Linux已经很接近了。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-1.png" alt></p>
<h3 id="相对于虚拟机的优势"><a href="#相对于虚拟机的优势" class="headerlink" title="相对于虚拟机的优势"></a>相对于虚拟机的优势</h3><p>相比于VMware等虚拟机，WSL占用内存和CPU资源更少，在WSL上运行软件的消耗和直接在Windows上差不多。而且，Windows下可以直接访问WSL的环境。</p>
<h3 id="相对于多系统的优势"><a href="#相对于多系统的优势" class="headerlink" title="相对于多系统的优势"></a>相对于多系统的优势</h3><p>省事呀。假如需要重启Linux系统，WSL只需要把软件关掉重开即可。同时，相较于多系统，文件交互也更为简单。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-win10" target="_blank" rel="noopener">官方教程地址</a>，可以看到还是很简单的。</p>
<p>本文大部分内容写于18/12/14，所用的机器是VAIO Z Flip 2016，处理器<code>i7-6567U</code>，内存<code>8G</code>，操作系统版本号<code>Windows 10.0.17763.134 x64</code>。可以看到即使是以轻薄本的配置也足够流畅完成下述环节。</p>
<h3 id="开启WSL可选特性"><a href="#开启WSL可选特性" class="headerlink" title="开启WSL可选特性"></a>开启WSL可选特性</h3><p>在控制面板的“启动或关闭Windows功能”中勾选“适用于Linux的Windows子系统”。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-2.png" alt><br>或在PowerShell 中运行下述代码：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span><br></pre></td></tr></table></figure>

<p>修改完毕后，重启使选项生效。</p>
<h3 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h3><p>打开Microsoft Store，搜索Linux，就会显示Ubuntu、suse等几个发行版，点击进行安装即可。这里选择了Ubuntu。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-3.png" alt><br>下载之后启动菜单里就会出现<code>Ubuntu</code>的图标了。让我们启动它，按照上面的提示等待几分钟，就可以进入初次登陆设置账号的界面。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-4.png" alt><br>好像用户名不可以有大写字母…不管怎样，到这里就算安装成功了。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-5.png" alt></p>
<h2 id="配置图形界面"><a href="#配置图形界面" class="headerlink" title="配置图形界面"></a>配置图形界面</h2><p>WSL没有原生支持GUI的。这里通过XServer实现可视化操作，用到的软件是<code>VcXsrv</code>。</p>
<h3 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h3><ol>
<li>VcXsrv启动Xserver服务用于监听；</li>
<li>WSL启动程序后把界面数据发送给Xserver；</li>
<li>Xserver接收到数据进行绘制，于是在Win下看到图形界面。</li>
</ol>
<blockquote>
<p><a href="https://www.jianshu.com/p/bc38ed12da1d" target="_blank" rel="noopener">这里</a>给出了另外一种通过VNC远程控制的解决方案，可能会比XServer流畅一些。</p>
</blockquote>
<h3 id="下载并安装VcXsrv"><a href="#下载并安装VcXsrv" class="headerlink" title="下载并安装VcXsrv"></a>下载并安装VcXsrv</h3><p>点<a href="https://sourceforge.net/projects/vcxsrv/" target="_blank" rel="noopener">这里</a>下载安装包，一路next即可。第一步是选择组件，默认是全部安装；第二步是安装路径。</p>
<h3 id="启动VcXsrv"><a href="#启动VcXsrv" class="headerlink" title="启动VcXsrv"></a>启动VcXsrv</h3><p>开始菜单里现在出现了一个文件夹<code>VcXsrv</code>，选择里面的XLaunch，一路选择下一步即可。然后这个软件就后台运行了。之后如果有需要使用Linux的图形界面的，都需要提前打开<code>XLaunch</code>。<br>提一下打开<code>Xlaunch</code>后第一页的四个选项设置，我个人是喜欢选择全屏的，最接近原生系统的体验。假如你不需要打开完整的桌面环境而只需要图形化某些软件，那么就用默认的<code>Multiple windows</code>也不错。</p>
<h4 id="配置DISPLAY"><a href="#配置DISPLAY" class="headerlink" title="配置DISPLAY"></a>配置DISPLAY</h4><p>为了方便，打开Ubuntu bash，运行如下代码：</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">echo</span> <span class="hljs-string">"export DISPLAY=:0.0"</span> &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>这样，每次打开图形界面程序就不需要额外指定<code>DISPLAY</code>了。</p>
<h3 id="切换源"><a href="#切换源" class="headerlink" title="切换源"></a>切换源</h3><p>默认源速度缓慢，这里切换到阿里源。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>使用vim打开，参考<a href="https://www.sunzhongwei.com/mip/modify-the-wsl-ubuntu-1804-default-source-for-ali-cloud-images" target="_blank" rel="noopener">这里</a>。在vim中输入如下的控制代码（需要先熟悉上古神器vim的操作）：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:%s/security.ubuntu/mirrors.aliyun/g</span><br><span class="line">:%s/archive.ubuntu/mirrors.aliyun/g</span><br></pre></td></tr></table></figure>

<p>保存并退出。执行一下以下代码更新软件包到最新状态。</p>
<blockquote>
<blockquote>
<p>Remark:在sudo apt upgrade之前要先sudo apt update</p>
</blockquote>
<p>感谢<a href="https://wu-kan.github.io/posts/linux/Windows-Subsystem-for-Linux#5c5079d2303f394f828dd8e0" target="_blank" rel="noopener">@</a>在评论区指出</p>
</blockquote>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>

<h3 id="检验"><a href="#检验" class="headerlink" title="检验"></a>检验</h3><p>运行下述代码，安装firefox检验效果：</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install firefox</span><br></pre></td></tr></table></figure>

<p>随后直接运行下述代码即可查看效果。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firefox</span><br></pre></td></tr></table></figure>

<p><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-6.png" alt><br>可以看到，这里虽然能正常打开网页，但是中文显示是乱码的。</p>
<h3 id="解决中文乱码问题"><a href="#解决中文乱码问题" class="headerlink" title="解决中文乱码问题"></a>解决中文乱码问题</h3><p>运行下述代码，成功解决。现在可以正常显示中文了。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fonts-noto-cjk</span><br></pre></td></tr></table></figure>

<p><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-7.png" alt></p>
<h3 id="修改默认语言环境为中文（可选）"><a href="#修改默认语言环境为中文（可选）" class="headerlink" title="修改默认语言环境为中文（可选）"></a>修改默认语言环境为中文（可选）</h3><p>安装中文语言包</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install language-pack-zh-hans language-pack-zh-hans-base</span><br></pre></td></tr></table></figure>

<p>设置本地化环境变量</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">echo</span> <span class="hljs-string">"LANG=zh_CN.UTF-8"</span> &gt;&gt; ~/.profile</span><br></pre></td></tr></table></figure>

<h3 id="安装桌面"><a href="#安装桌面" class="headerlink" title="安装桌面"></a>安装桌面</h3><p>这里选择<code>xfce4</code>桌面，它的优点是轻量、美观、占用系统资源少。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install xfce4 dbus-x11</span><br></pre></td></tr></table></figure>

<p>完成后，执行下面这段代码就可以看到桌面的图形界面了。</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfce4-session</span><br></pre></td></tr></table></figure>

<h3 id="中文输入法"><a href="#中文输入法" class="headerlink" title="中文输入法"></a>中文输入法</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fcitx fcitx-pinyin</span><br><span class="line"><span class="hljs-built_in">echo</span> -e <span class="hljs-string">"export XMODIFIERS=@im=fcitx\nexport GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\n"</span> &gt;&gt; .profile</span><br></pre></td></tr></table></figure>

<p>软件包已装，在应用程序 - 设置 - 会话与启动 - 应用程序自启动，添加 /usr/bin/fcitx。</p>
<h2 id="配置工作环境"><a href="#配置工作环境" class="headerlink" title="配置工作环境"></a>配置工作环境</h2><p>这里以安装、配置vscode为例。vscode宇宙第一！</p>
<h3 id="安装umake"><a href="#安装umake" class="headerlink" title="安装umake"></a>安装umake</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install ubuntu-make</span><br></pre></td></tr></table></figure>

<h3 id="安装vscode"><a href="#安装vscode" class="headerlink" title="安装vscode"></a>安装vscode</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo umake ide visual-studio-code</span><br></pre></td></tr></table></figure>

<p>执行后分别会让你选择安装地址，然后输入<code>a</code>确认。稍等片刻就安装好啦。重启bash，重新进入xfce桌面，在应用程序-开发里就可以找到安装好的vscode啦。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-8.png" alt><br>安装<code>Setting Sync</code>来同步别的平台的设置吧。设置好自己用于同步vscode设置的<code>GitHub Token</code>和<code>GitHub Gist</code>，一起来喝上一杯咖啡吧。<br><img src="/2019/04/11/2018-12-14-Windows Subsystem for Linux/image/2018-12-14-9.png" alt><br>现在你可以把很多事迁到WSL内来做了（折腾才是最好玩的），丢开虚拟机和双系统吧。完结撒花~</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.377Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/程序设计/">程序设计</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    12 分钟 读完 (大约 1835 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2018-10-16-某科学的超会议议程管理系统（Scientific Meeting Management System）/">某科学的超会议议程管理系统（Scientific Meeting Management System）</a>
            
        </h1>
        <div class="content">
            <h1 id="项目概况"><a href="#项目概况" class="headerlink" title="项目概况"></a>项目概况</h1><p>项目名称：某科学的超会议议程管理系统（Scientific Meeting Management System）<br>项目介绍：基于命令行，实现添加(add)、删除(delete)、修改(modify)、查询(query)等议程管理功能。</p>
<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><ul>
<li>每次打开系统时，自动恢复上次的数据。</li>
<li>每次关闭系统时，将数据保存到本地。</li>
<li>向议程中加入一个会议，当会议与任何已有的议程都不冲突时成功加入议程，否则报错。</li>
<li>查询\修改\删除：根据关键字查询\修改\删除相关议程。</li>
<li>清空功能：将议程清空，以便重新读入。</li>
</ul>
<h1 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h1><h2 id="交互示意图"><a href="#交互示意图" class="headerlink" title="交互示意图"></a>交互示意图</h2><p>以下示意图中以<strong>SMMS</strong>（Scientific Meeting Management System）代表本系统，<strong>LOG</strong>代表本地缓存文件<code>log.txt</code>，<strong>STACK</strong>代表用于议程管理的栈结构（见后）。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">USER-&gt;&gt;SMMS:输入</span><br><span class="line">LOG-&gt;&gt;SMMS:读档</span><br><span class="line">SMMS-&gt;&gt;STACK:关键字搜索、操作</span><br><span class="line">SMMS-&gt;&gt;LOG:存档</span><br><span class="line">SMMS-&gt;&gt;USER:输出</span><br></pre></td></tr></table></figure>

<h2 id="使用高效的栈结构进行议程管理"><a href="#使用高效的栈结构进行议程管理" class="headerlink" title="使用高效的栈结构进行议程管理"></a>使用高效的栈结构进行议程管理</h2><p>增加会议时只需加入栈顶，时间复杂度为O（1）。<br>修改或删除会议时，只需将该元素和栈顶元素交换，然后对栈顶元素进行操作，时间复杂度仍为O（1）。<br>清空议程时，只需将栈顶指针指向栈底而无需在数组中擦除数据，时间复杂度仍为O（1）。</p>
<h2 id="关键字搜索"><a href="#关键字搜索" class="headerlink" title="关键字搜索"></a>关键字搜索</h2><blockquote>
<p>定义会议n和m相关，当且仅当满足下列任意条件：</p>
<ul>
<li>n和m同名</li>
<li>n和m时间有重合部分，并且地点相同或有相同人员（换言之两场会议是否不能同时举行）</li>
</ul>
</blockquote>
<p>基于会议相关的定义，可以判断一个会议是否能够加入议程；也可以像下面一样进行高效严密的关键字搜索。<br>例如：</p>
<ul>
<li>查询\修改\删除会议名为NAME的会议：搜索时仅需将key.name设置为”NAME”，其余设为-1。</li>
<li>查询\修改\删除地点为ADDRESS的会议：将key.address设为”ADDRESS”，起止时间分别设成负正无穷，其余设为-1。</li>
<li>查询\修改\删除含有参加人员PERSON的会议：将key.num_of_participants设为1，key.participants[0]设为”PERSON，起止时间分别设成负正无穷，其余设为-1。多人同理。</li>
<li>查询\修改\删除含有以上多关键字的，可以类似地设置key。</li>
</ul>
<h2 id="代码模块化，且接口全部使用文件流"><a href="#代码模块化，且接口全部使用文件流" class="headerlink" title="代码模块化，且接口全部使用文件流"></a>代码模块化，且接口全部使用文件流</h2><p>所有函数接口均使用文件流<code>FILE*</code>，为快速切换文件\屏幕IO提供很大便利。<br>与此相对应的，所有的IO均通过函数fscanf和fprintf实现。<br>所有的IO均写有提示，方便使用。</p>
<h1 id="项目测试"><a href="#项目测试" class="headerlink" title="项目测试"></a>项目测试</h1><p>同文件夹下<code>log.txt</code>文档中保存了用于测试的数据，运行结果均符合预期。</p>
<h1 id="代码接口与实现"><a href="#代码接口与实现" class="headerlink" title="代码接口与实现"></a>代码接口与实现</h1><p>代码实现分为数据结构和功能函数两个模块，分别对其展开介绍。所有头文件均写有头文件保护。</p>
<h2 id="数据结构meeting-h"><a href="#数据结构meeting-h" class="headerlink" title="数据结构meeting.h"></a>数据结构meeting.h</h2><ul>
<li>定义了一个结构体Meeting，用于描述一场会议，内容见下，未加注释。其中，<code>struct tm</code>是c标准库<code>&lt;time.h&gt;</code>中定义的用于保存时间的结构体。</li>
<li>定义了若干对Meeting结构体的操作。</li>
<li>define了一个常量MAXN，暂定为128，用来表示Meeting中所用数组的最大容量。实际使用时可根据需求修改MAXN的define并重新编译，十分方便。</li>
</ul>
<figure class="highlight c hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXN 128</span></span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Meeting</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">int</span> num_of_participants;<span class="hljs-comment">//参会人数</span></span><br><span class="line">	<span class="hljs-keyword">char</span> name[MAXN],<span class="hljs-comment">//会议名称</span></span><br><span class="line">	     address[MAXN],<span class="hljs-comment">//会议地址</span></span><br><span class="line">	     participants[MAXN][MAXN];<span class="hljs-comment">//参会人员</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> <span class="hljs-title">begin</span>,<span class="hljs-title">end</span>;</span><span class="hljs-comment">//起止时间</span></span><br><span class="line">&#125; Meeting;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//从in中读入一个Meeting，并将输入时的提示信息输出到out</span></span><br><span class="line"><span class="hljs-function">Meeting <span class="hljs-title">getMeeting</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//把m输出到out</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">putMeeting</span><span class="hljs-params">(FILE *out,<span class="hljs-keyword">const</span> Meeting *m)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//比较两个时间a和b的先后关系</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">tmCmp</span><span class="hljs-params">(<span class="hljs-keyword">const</span> struct tm *a,<span class="hljs-keyword">const</span> struct tm *b)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//判断会议m和n是否冲突</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">isRepel</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Meeting *m,<span class="hljs-keyword">const</span> Meeting *n)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="实现-meeting-c"><a href="#实现-meeting-c" class="headerlink" title="实现 meeting.c"></a>实现 meeting.c</h3><figure class="highlight c hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function">Meeting <span class="hljs-title">getMeeting</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	Meeting tmp_m;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the Meeting name.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%s"</span>,tmp_m.name);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the Meeting address.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%s"</span>,tmp_m.address);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the begin time(year month day hour minute).\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%d%d%d%d%d"</span>,</span><br><span class="line">	       &amp;tmp_m.begin.tm_year,</span><br><span class="line">	       &amp;tmp_m.begin.tm_mon,</span><br><span class="line">	       &amp;tmp_m.begin.tm_mday,</span><br><span class="line">	       &amp;tmp_m.begin.tm_hour,</span><br><span class="line">	       &amp;tmp_m.begin.tm_min);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the end time(year month day hour minute).\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%d%d%d%d%d"</span>,</span><br><span class="line">	       &amp;tmp_m.end.tm_year,</span><br><span class="line">	       &amp;tmp_m.end.tm_mon,</span><br><span class="line">	       &amp;tmp_m.end.tm_mday,</span><br><span class="line">	       &amp;tmp_m.end.tm_hour,</span><br><span class="line">	       &amp;tmp_m.end.tm_min);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the number of participants.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%d"</span>,&amp;tmp_m.num_of_participants);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;tmp_m.num_of_participants; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the name of participant %d.\n"</span>,i);</span><br><span class="line">		<span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%s"</span>,tmp_m.participants[i]);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">return</span> tmp_m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">putMeeting</span><span class="hljs-params">(FILE *out,<span class="hljs-keyword">const</span> Meeting *m)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"%s %s\n%d %d %d %d %d\n%d %d %d %d %d\n%d"</span>,</span><br><span class="line">	        m-&gt;name,</span><br><span class="line">	        m-&gt;address,</span><br><span class="line">	        m-&gt;begin.tm_year,</span><br><span class="line">	        m-&gt;begin.tm_mon,</span><br><span class="line">	        m-&gt;begin.tm_mday,</span><br><span class="line">	        m-&gt;begin.tm_hour,</span><br><span class="line">	        m-&gt;begin.tm_min,</span><br><span class="line">	        m-&gt;end.tm_year,</span><br><span class="line">	        m-&gt;end.tm_mon,</span><br><span class="line">	        m-&gt;end.tm_mday,</span><br><span class="line">	        m-&gt;end.tm_hour,</span><br><span class="line">	        m-&gt;end.tm_min,</span><br><span class="line">	        m-&gt;num_of_participants);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt; m-&gt;num_of_participants; ++j)</span><br><span class="line">		<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">" %s"</span>,m-&gt;participants[j]);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">tmCmp</span><span class="hljs-params">(<span class="hljs-keyword">const</span> struct tm *a,<span class="hljs-keyword">const</span> struct tm *b)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span>(a-&gt;tm_year != b-&gt;tm_year)</span><br><span class="line">		<span class="hljs-keyword">return</span> a-&gt;tm_year - b-&gt;tm_year;</span><br><span class="line">	<span class="hljs-keyword">if</span>(a-&gt;tm_mon != b-&gt;tm_mon)</span><br><span class="line">		<span class="hljs-keyword">return</span> a-&gt;tm_mon - b-&gt;tm_mon;</span><br><span class="line">	<span class="hljs-keyword">if</span>(a-&gt;tm_mday != b-&gt;tm_mday)</span><br><span class="line">		<span class="hljs-keyword">return</span> a-&gt;tm_mday - b-&gt;tm_mday;</span><br><span class="line">	<span class="hljs-keyword">if</span>(a-&gt;tm_hour != b-&gt;tm_hour)</span><br><span class="line">		<span class="hljs-keyword">return</span> a-&gt;tm_hour - b-&gt;tm_hour;</span><br><span class="line">	<span class="hljs-keyword">return</span> a-&gt;tm_min - b-&gt;tm_min;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">isRepel</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Meeting *p,<span class="hljs-keyword">const</span> Meeting *q)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(p-&gt;name,q-&gt;name))</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">if</span>(tmCmp(&amp;p-&gt;end,&amp;q-&gt;begin)&lt;<span class="hljs-number">0</span>||tmCmp(&amp;p-&gt;begin,&amp;q-&gt;end)&gt;<span class="hljs-number">0</span>)</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(p-&gt;address,q-&gt;address))</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; p-&gt;num_of_participants; ++i)</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j &lt; q-&gt;num_of_participants; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(p-&gt;participants[i],q-&gt;participants[j]))</span><br><span class="line">				<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="功能函数func-h"><a href="#功能函数func-h" class="headerlink" title="功能函数func.h"></a>功能函数func.h</h2><ul>
<li>选用栈结构用于存储会议，用数组和记录栈顶下标的变量实现。除此之外<strong>未用任何全局变量</strong>。</li>
<li>实现了需求分析中的所有功能函数。</li>
<li>所有功能函数均有相同的接口<code>(FILE *in,FILE *out)</code>表示从in中获取数据，并通过out输出信息。这样的设计既方便了代码的调试，也方便了用户的交互。</li>
</ul>
<figure class="highlight c hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">extern</span> <span class="hljs-keyword">int</span> top;</span><br><span class="line"><span class="hljs-keyword">extern</span> Meeting <span class="hljs-built_in">stack</span>[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//读入会议，若不产生冲突则加入议程，否则报错</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//按关键字删除会议</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">del</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//按关键字修改会议</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//按关键字查询会议</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//读档</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fin</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//存档</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fout</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//清空</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">//输出提示信息</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">help</span><span class="hljs-params">(FILE *in,FILE *out)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="实现-func-c"><a href="#实现-func-c" class="headerlink" title="实现 func.c"></a>实现 func.c</h3><figure class="highlight c hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">int</span> top=<span class="hljs-number">0</span>;</span><br><span class="line">Meeting <span class="hljs-built_in">stack</span>[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">stack</span>[top]=getMeeting(in,out);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;top; ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span>(isRepel(&amp;<span class="hljs-built_in">stack</span>[top],&amp;<span class="hljs-built_in">stack</span>[i]))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Error: Repel with Meeting %s.\n"</span>,<span class="hljs-built_in">stack</span>[i].name);</span><br><span class="line">			<span class="hljs-keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Add %s successfully.\n"</span>,<span class="hljs-built_in">stack</span>[top++].name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">del</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the key(-1 for no key).\n"</span>);</span><br><span class="line">	Meeting key=getMeeting(in,out);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;top; ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span>(isRepel(&amp;key,&amp;<span class="hljs-built_in">stack</span>[i]))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Delele %s successfully.\n"</span>,<span class="hljs-built_in">stack</span>[i].name);</span><br><span class="line">			<span class="hljs-built_in">stack</span>[i--]=<span class="hljs-built_in">stack</span>[--top];</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">modify</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> t_len=top;</span><br><span class="line">	del(in,out);</span><br><span class="line">	<span class="hljs-keyword">while</span>(top&lt;t_len)</span><br><span class="line">		add(in,out);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input the key(-1 for no key).\n"</span>);</span><br><span class="line">	Meeting key=getMeeting(in,out);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;top; ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span>(isRepel(&amp;key,&amp;<span class="hljs-built_in">stack</span>[i]))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Find "</span>);</span><br><span class="line">			putMeeting(out,&amp;<span class="hljs-built_in">stack</span>[i]);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fin</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Start input from \'log.txt\'.\n"</span>);</span><br><span class="line">	FILE *f=fopen(<span class="hljs-string">"log.txt"</span>,<span class="hljs-string">"r"</span>);</span><br><span class="line">	<span class="hljs-keyword">if</span>(f==<span class="hljs-literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Error:Do not find \'log.txt\'\n"</span>);</span><br><span class="line">		<span class="hljs-keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">int</span> t_len;</span><br><span class="line">	<span class="hljs-built_in">fscanf</span>(f,<span class="hljs-string">"%d"</span>,&amp;t_len);</span><br><span class="line">	<span class="hljs-keyword">while</span>(t_len--)</span><br><span class="line">		add(f,out);</span><br><span class="line">	fclose(f);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input from \'log.txt\' successfully.\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fout</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Start output to \'log.txt\'.\n"</span>);</span><br><span class="line">	FILE *f=fopen(<span class="hljs-string">"log.txt"</span>,<span class="hljs-string">"w"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(f,<span class="hljs-string">"%d\n"</span>,top);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;top; ++i)</span><br><span class="line">		putMeeting(f,&amp;<span class="hljs-built_in">stack</span>[i]);</span><br><span class="line">	fclose(f);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Output to \'log.txt\' successfully.\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clear</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	top=<span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Clear successfully.\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">help</span><span class="hljs-params">(FILE *in,FILE *out)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"fin : add new meetings from \'log.txt\' to memory if they do not repel.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"fout : output all the meetings from memory to \'log.txt\'.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"add : add a new meeting to memory if it does not repel.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"delete : delete all the meetings which repel with the key.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"modify : modify all the meetings which repel with the key.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"clear : clear all the meetings from memory.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"help : get available instructions.\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"EOF(Ctrl+Z in Windows) : exit.\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight c hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">"func.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	FILE *in=<span class="hljs-built_in">stdin</span>,*out=<span class="hljs-built_in">stdout</span>;</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Scientific Meeting Management System by WuK&amp;LSY\n\n"</span>);</span><br><span class="line">	<span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"Input \'fin\' to read from log,or \'help\' to get other available instructions.\n\n"</span>);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">char</span> s[MAXN]; <span class="hljs-built_in">fscanf</span>(in,<span class="hljs-string">"%s"</span>,s)!=EOF; <span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"\n"</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"add"</span>))</span><br><span class="line">			add(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"delete"</span>))</span><br><span class="line">			del(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"modify"</span>))</span><br><span class="line">			modify(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"query"</span>))</span><br><span class="line">			query(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"fin"</span>))</span><br><span class="line">			fin(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"fout"</span>))</span><br><span class="line">			fout(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"clear"</span>))</span><br><span class="line">			clear(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">strcmp</span>(s,<span class="hljs-string">"help"</span>))</span><br><span class="line">			help(in,out);</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-built_in">fprintf</span>(out,<span class="hljs-string">"\'%s\' is not an available instruction,and you can in \'help\' to get available instructions.\n"</span>,s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-09T10:00:00.000Z">2019-03-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 668 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/09/2019-03-09-2015-2016 Petrozavodsk Winter Training Camp, SPb SU + SPb AU Contest/">2015-2016 Petrozavodsk Winter Training Camp, SPb SU + SPb AU Contest</a>
            
        </h1>
        <div class="content">
            <h1 id="Greedy-Game"><a href="#Greedy-Game" class="headerlink" title="Greedy Game"></a><a href="https://vjudge.net/problem/Gym-100956D" target="_blank" rel="noopener">Greedy Game</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> A first</span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> B second</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">7</span>;</span><br><span class="line">pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; p[N];</span><br><span class="line">priority_queue&lt;<span class="hljs-keyword">int</span>&gt; q;</span><br><span class="line"><span class="hljs-keyword">int</span> n;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i].A);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i].B);</span><br><span class="line">	sort(p, p + n);</span><br><span class="line">	<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i -= <span class="hljs-number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ans += p[i].B, q.push(-p[i].B);</span><br><span class="line">		<span class="hljs-keyword">if</span> (i &amp;&amp; p[i - <span class="hljs-number">1</span>].B &gt; -q.top())</span><br><span class="line">			ans += p[i - <span class="hljs-number">1</span>].B + q.top(), q.pop(), q.push(-p[i - <span class="hljs-number">1</span>].B);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Colored-Path"><a href="#Colored-Path" class="headerlink" title="Colored Path"></a><a href="https://vjudge.net/problem/Gym-100956F" target="_blank" rel="noopener">Colored Path</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>&gt; pii;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> N=<span class="hljs-number">4e2</span>+<span class="hljs-number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;pii&gt; ans;</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> n, k, W;</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> w[N][N], c[N][N], dp[N][N];</span><br><span class="line">pii last[N][N];</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a[<span class="hljs-number">1200</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-title">count</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a)</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ret=<span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">while</span>(a) a-=(a&amp;(-a)), ret++;</span><br><span class="line">	<span class="hljs-keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> count(a)&lt;=count(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> x, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> y)</span> </span>&#123;</span><br><span class="line">	ans.push_back(pii(x, y));</span><br><span class="line">	<span class="hljs-keyword">if</span> (x==<span class="hljs-number">1</span>&amp;&amp;y==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;</span><br><span class="line">	print(last[x][y].first, last[x][y].second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">	<span class="hljs-comment">//freopen("in.txt", "r", stdin);</span></span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld %lld %lld"</span>, &amp;n, &amp;k, &amp;W);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;w[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;c[i][j]);</span><br><span class="line">			c[i][j]--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt;(<span class="hljs-number">1</span>&lt;&lt;k); i++) &#123;</span><br><span class="line">		a[i]=i;</span><br><span class="line">	&#125;</span><br><span class="line">	sort(a, a+(<span class="hljs-number">1</span>&lt;&lt;k), cmp);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> t=<span class="hljs-number">0</span>; t&lt;(<span class="hljs-number">1</span>&lt;&lt;k); t++) &#123;</span><br><span class="line">		<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> s=a[t];</span><br><span class="line">		<span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">		<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[n][n])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">		dp[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=w[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>];</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">				<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[i][j])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">				<span class="hljs-keyword">if</span> (i&gt;<span class="hljs-number">1</span>) &#123;</span><br><span class="line">					<span class="hljs-keyword">if</span> (dp[i<span class="hljs-number">-1</span>][j]+w[i][j]&lt;dp[i][j]) &#123;</span><br><span class="line">						last[i][j]=pii(i<span class="hljs-number">-1</span>, j);</span><br><span class="line">						dp[i][j]=dp[i<span class="hljs-number">-1</span>][j]+w[i][j];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="hljs-keyword">if</span> (j&gt;<span class="hljs-number">1</span>) &#123;</span><br><span class="line">					<span class="hljs-keyword">if</span> (dp[i][j<span class="hljs-number">-1</span>]+w[i][j]&lt;dp[i][j]) &#123;</span><br><span class="line">						last[i][j]=pii(i, j<span class="hljs-number">-1</span>);</span><br><span class="line">						dp[i][j]=dp[i][j<span class="hljs-number">-1</span>]+w[i][j];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (dp[n][n]&lt;=W) &#123;</span><br><span class="line">			print(n, n);</span><br><span class="line">			<span class="hljs-built_in">cout</span>&lt;&lt;count(s)&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">			reverse(ans.begin(), ans.end());</span><br><span class="line">			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt;ans.size(); i++) &#123;</span><br><span class="line">				<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld %lld"</span>, ans[i].first, ans[i].second);</span><br><span class="line">				<span class="hljs-keyword">if</span> (i==((<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>)ans.size()<span class="hljs-number">-1</span>)) <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">				<span class="hljs-keyword">else</span> <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">' '</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Set-Intersection"><a href="#Set-Intersection" class="headerlink" title="Set Intersection"></a><a href="https://vjudge.net/problem/Gym-100956I" target="_blank" rel="noopener">Set Intersection</a></h1><p>大暴力就能苟过去…网上正解是随机化。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">12e3</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-built_in">bitset</span>&lt;N&gt; a[N];</span><br><span class="line"><span class="hljs-keyword">char</span> s[N];</span><br><span class="line"><span class="hljs-keyword">int</span> n;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; s[k]; ++k)</span><br><span class="line">		&#123;</span><br><span class="line">			s[k] -= <span class="hljs-number">33</span>;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">6</span>; ++j)</span><br><span class="line">				a[i][k * <span class="hljs-number">6</span> + j] = s[k] &amp; <span class="hljs-number">1</span>, s[k] &gt;&gt;= <span class="hljs-number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; i; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span> ((a[i] &amp; a[j]).count() &gt;= n / <span class="hljs-number">2</span>)</span><br><span class="line">				<span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d"</span>, i + <span class="hljs-number">1</span>, j + <span class="hljs-number">1</span>), <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Sort-It"><a href="#Sort-It" class="headerlink" title="Sort It!"></a><a href="https://vjudge.net/problem/Gym-100956J" target="_blank" rel="noopener">Sort It!</a></h1><p>树状数组求完逆序对之后容斥一下就行了。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> ll N = <span class="hljs-number">2e3</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mod</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">const</span> ll M;</span><br><span class="line">	Mod(ll M) : M(M) &#123;&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">add</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> ((a + b) % M + M) % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">mul</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> a * b % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">pow</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll r = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (a %= M; b; b &gt;&gt;= <span class="hljs-number">1</span>, a = mul(a, a))</span><br><span class="line">			<span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				r = mul(r, a);</span><br><span class="line">		<span class="hljs-keyword">return</span> r;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Factorial</span> :</span> Mod</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; fac, ifac;</span><br><span class="line">	Factorial(<span class="hljs-keyword">int</span> N, ll M) : fac(N, <span class="hljs-number">1</span>), ifac(N, <span class="hljs-number">1</span>), Mod(M)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; N; ++i)</span><br><span class="line">			fac[i] = mul(fac[i - <span class="hljs-number">1</span>], i), ifac[i] = mul(M - M / i, ifac[M % i]);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; N; ++i)</span><br><span class="line">			ifac[i] = mul(ifac[i], ifac[i - <span class="hljs-number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">c</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> m)</span> </span>&#123; <span class="hljs-keyword">return</span> mul(mul(fac[n], ifac[m]), ifac[n - m]); &#125;</span><br><span class="line">&#125; F(N, <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>);</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">	BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n, <span class="hljs-number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">			v[x] = F.add(v[x], w);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			ans = F.add(ans, v[x]);</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">int</span> n, p[N], b[N], ans;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i]), b[i] = <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-function">BaseFenwick <span class="hljs-title">t</span><span class="hljs-params">(N)</span></span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			t.add(p[j], b[j]);</span><br><span class="line">			cnt = F.add(cnt, b[j] = t.ask(p[j] - <span class="hljs-number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		ans = F.add(ans, cnt * F.<span class="hljs-built_in">pow</span>(i, n));</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i - <span class="hljs-number">1</span>; j; --j)</span><br><span class="line">		&#123;</span><br><span class="line">			cnt = F.mul(cnt, F.M - <span class="hljs-number">1</span>);</span><br><span class="line">			ans = F.add(ans, F.mul(cnt, F.mul(F.c(i, j), F.<span class="hljs-built_in">pow</span>(j, n))));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, F.add(ans, n));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-08T10:00:00.000Z">2019-03-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/计算机网络/">计算机网络</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 482 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/08/2019-03-08-计算机网络 第三章 数据链路层/">计算机网络 第三章 数据链路层</a>
            
        </h1>
        <div class="content">
            <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote>
<p>数据链路层负责把数据包从一个节点通过链路（直连网络或物理网络）传给相邻的另一个节点。</p>
</blockquote>
<ul>
<li>主机和路由器是节点(nodes)</li>
<li>连接相邻节点的通道是链路(links)<ul>
<li>有线链路(wired links)</li>
<li>无线链路(wireless links)</li>
<li>局域网(LANs)</li>
</ul>
</li>
<li>第2层的数据包(packet)是帧(frame)</li>
</ul>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>形成帧 (framing)</li>
<li>差错检测(error detect)：比特错，纠错</li>
<li>差错控制(error control)：丢包、重复、错序。流控制(flow control)</li>
<li>介质访问控制(medium access control): 多路访问，碰撞(collision)</li>
</ul>
<h1 id="差错检测"><a href="#差错检测" class="headerlink" title="差错检测"></a>差错检测</h1><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">数据报--&gt;数据报|校验码</span><br><span class="line">数据报|校验码--链路--&gt;可能发生比特错</span><br><span class="line">可能发生比特错--&gt;数据报&apos;|校验码&apos;</span><br><span class="line">数据报&apos;|校验码&apos;--&gt;有错？</span><br><span class="line">有错？--有--&gt;纠错或丢弃</span><br><span class="line">有错？--无--&gt;数据报</span><br></pre></td></tr></table></figure>

<h2 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h2><h2 id="检验和-Checksum"><a href="#检验和-Checksum" class="headerlink" title="检验和(Checksum)"></a>检验和(Checksum)</h2><p>由于需要使用加法器实现算法，校验和一般不用于数据链路层 ，而是更高层，例如 ，IP层和传输层。</p>
<h2 id="循环冗余校验码-Cyclic-Redundancy-Check-CRC"><a href="#循环冗余校验码-Cyclic-Redundancy-Check-CRC" class="headerlink" title="循环冗余校验码(Cyclic Redundancy Check, CRC)"></a>循环冗余校验码(Cyclic Redundancy Check, CRC)</h2><p>如果传输过程中没有出现比特错，接 收方用相同的除数去除数据加CRC校 验码，余数应该为0。<br>(Cyclic Redundancy Check, CRC)</p>
<p>采用模2除法：做减法时没有借位，类似于按位异或。</p>
<p>链路层常用CRC检验，因为容易用硬件实现，速度快，检错率很高。</p>
<p>CRC-CCITT(x16+x12+x5+1)的错误检测能力：可以检出所 有随机奇数位错误和双位错，可以检出所有长度小于等 于16位的突发错；对于长度等于17位的突发错误，检错 率为99.9969%；长度大于等于18位的突发错误，检错率 为99.9985%。</p>
<h1 id="可靠数据传输"><a href="#可靠数据传输" class="headerlink" title="可靠数据传输"></a>可靠数据传输</h1><h1 id="停等协议"><a href="#停等协议" class="headerlink" title="停等协议"></a>停等协议</h1><h1 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h1><h1 id="PPP协议"><a href="#PPP协议" class="headerlink" title="PPP协议"></a>PPP协议</h1>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-06T10:00:01.000Z">2019-03-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/计算机网络/">计算机网络</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 774 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/06/2019-03-06-计算机网络 第二章 物理层/">计算机网络 第二章 物理层</a>
            
        </h1>
        <div class="content">
            <h1 id="通信系统-Communication-System"><a href="#通信系统-Communication-System" class="headerlink" title="通信系统(Communication System)"></a>通信系统(Communication System)</h1><p>Information(信息) can be interpreted as a message(data), recorded as signs(符号), transmitted as signals(信号), measured as the entropy(熵)。</p>
<ul>
<li>信号(signal) : optical signal, electronic signal, radio signal</li>
<li>模拟信号(analog  signal)：连续取值的信号</li>
<li>数字信号(digitial signal)：用离散值表示的信号（跳变信号）</li>
<li>模拟传输(analog transmission): 模拟信号(analog  signal), 放大器(amplifier)</li>
<li>数字传输( digital transmission): 数字信号(digital  signal), 中继器(repeater)</li>
</ul>
<h1 id="正弦波信号"><a href="#正弦波信号" class="headerlink" title="正弦波信号"></a>正弦波信号</h1><ul>
<li>$\omega_c$ ：角频率。$\omega_c=2\pi f$</li>
<li>f：频率 (frequency) $f=1/T$</li>
<li>T:周期 (period)</li>
<li>A:振幅 (amplitude)</li>
<li>$\phi$: 相位 (phase) ( 初 相 ) 。</li>
</ul>
<h2 id="频移键控-Frequency-Shift-Keying-FSK"><a href="#频移键控-Frequency-Shift-Keying-FSK" class="headerlink" title="频移键控 (Frequency-Shift Keying, FSK)"></a>频移键控 (Frequency-Shift Keying, FSK)</h2><h2 id="幅移键控-Amplitude-Shift-Keying-ASK"><a href="#幅移键控-Amplitude-Shift-Keying-ASK" class="headerlink" title="幅移键控 (Amplitude-Shift Keying, ASK)"></a>幅移键控 (Amplitude-Shift Keying, ASK)</h2><h2 id="相移键控-Phase-Shift-Keying-PSK"><a href="#相移键控-Phase-Shift-Keying-PSK" class="headerlink" title="相移键控 (Phase-Shift Keying, PSK)"></a>相移键控 (Phase-Shift Keying, PSK)</h2><h2 id="正交调幅-QAM-–quadrature-amplitude-modulation"><a href="#正交调幅-QAM-–quadrature-amplitude-modulation" class="headerlink" title="正交调幅 (QAM –quadrature amplitude modulation)"></a>正交调幅 (QAM –quadrature amplitude modulation)</h2><h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><h2 id="单极编码-unipolar-encoding"><a href="#单极编码-unipolar-encoding" class="headerlink" title="单极编码(unipolar encoding)"></a>单极编码(unipolar encoding)</h2><h2 id="不归零编码-Non-Return-to-Zero-NRZ或NRZ-L"><a href="#不归零编码-Non-Return-to-Zero-NRZ或NRZ-L" class="headerlink" title="不归零编码 (Non-Return-to-Zero,NRZ或NRZ-L)"></a>不归零编码 (Non-Return-to-Zero,NRZ或NRZ-L)</h2><p>不归零编码是一种双极编码(bipolar encoding)。双极编码的波形就是二 进制符号，0、1分别与正、负电位相对应。它的电脉冲之间也无间隔。 RS-232C的接口电压就是采用双极编码</p>
<h2 id="曼彻斯特编码-Manchester-Encoding"><a href="#曼彻斯特编码-Manchester-Encoding" class="headerlink" title="曼彻斯特编码(Manchester Encoding)"></a>曼彻斯特编码(Manchester Encoding)</h2><p>曼彻斯特码的编码规则(以太网)是：0 → 10， 1 → 01</p>
<h2 id="差分曼彻斯特编码-Differential-Manchester-Encoding"><a href="#差分曼彻斯特编码-Differential-Manchester-Encoding" class="headerlink" title="差分曼彻斯特编码 (Differential Manchester Encoding)"></a>差分曼彻斯特编码 (Differential Manchester Encoding)</h2><p>差分曼彻斯特码是一种差分双相码，先把输入的NRZ波形变换成差分波形 ，再用绝对双相码(第一个规则)编码，即，”1”起始不跳变，”0”起始跳变， 再用Manchester编码第一规则按当前电平进行编码。简单描述：起始是否 跳变确定是否0或1，中间一定跳变。</p>
<h2 id="4B-5B编码"><a href="#4B-5B编码" class="headerlink" title="4B/5B编码"></a>4B/5B编码</h2><p>用5比特表示4比特。 每个编码没有多于1个的前导零和多于2个的末端 零。如果结合NRZI编码，就可以既防止跳变过多，又消除基线漂移和 时钟漂移。其它编码用于控制，如，11111表示空闲。</p>
<h1 id="物理介质-Physical-Media"><a href="#物理介质-Physical-Media" class="headerlink" title="物理介质(Physical Media)"></a>物理介质(Physical Media)</h1><h2 id="有线介质"><a href="#有线介质" class="headerlink" title="有线介质"></a>有线介质</h2><h3 id="非屏蔽双绞线-Unshielded-Twisted-Pair"><a href="#非屏蔽双绞线-Unshielded-Twisted-Pair" class="headerlink" title="非屏蔽双绞线(Unshielded Twisted Pair)"></a>非屏蔽双绞线(Unshielded Twisted Pair)</h3><ul>
<li>四对线: 绿 绿白，橙 橙白，蓝 蓝白，棕棕白</li>
<li>每对线先逆时针绞在一起，然后所有线对再逆时针绞在一起。</li>
<li>标准568A：绿白 1，绿 2，橙白 3，蓝 4，蓝白 5，橙 6，棕白 7，棕 8</li>
<li>标准568B：橙白 1，橙 2，绿白 3，蓝 4，蓝白 5，绿 6，棕白 7，棕 8</li>
</ul>
<h3 id="屏蔽双绞线-Shielded-Twisted-Pair"><a href="#屏蔽双绞线-Shielded-Twisted-Pair" class="headerlink" title="屏蔽双绞线 (Shielded Twisted Pair)"></a>屏蔽双绞线 (Shielded Twisted Pair)</h3><h3 id="光导纤维-Optical-Fiber"><a href="#光导纤维-Optical-Fiber" class="headerlink" title="光导纤维 (Optical Fiber)"></a>光导纤维 (Optical Fiber)</h3><ul>
<li>在玻璃纤维传输光脉冲, 每个脉冲一比特</li>
<li>全反射条件: 入射角大于临界角</li>
</ul>
<h4 id="单模光纤和多模光纤"><a href="#单模光纤和多模光纤" class="headerlink" title="单模光纤和多模光纤"></a>单模光纤和多模光纤</h4><h5 id="阶跃光纤"><a href="#阶跃光纤" class="headerlink" title="阶跃光纤"></a>阶跃光纤</h5><h5 id="渐变光纤"><a href="#渐变光纤" class="headerlink" title="渐变光纤"></a>渐变光纤</h5><h2 id="无线介质-大气"><a href="#无线介质-大气" class="headerlink" title="无线介质(大气)"></a>无线介质(大气)</h2><ul>
<li>地面微波 45 Mbps channels</li>
<li>WiFI 54 Mbps(802.11g),600Mbps(802.11n)</li>
<li>3G网络 ~ 1 Mbps</li>
<li>卫星 1 Kbps ~ 45Mbps 270 msec 延迟</li>
</ul>
<h3 id="电磁谱"><a href="#电磁谱" class="headerlink" title="电磁谱"></a>电磁谱</h3><h1 id="多路复用和电路交换"><a href="#多路复用和电路交换" class="headerlink" title="多路复用和电路交换"></a>多路复用和电路交换</h1><ul>
<li>时分多路复用(Time Division Multiplexing)  (STDM–Synchronous TDM)</li>
<li>频分多路复用(Frequency Division Multiplexing)</li>
<li>波分多路复用(Wavelength Division Multiplexing)</li>
<li>码分多路复用(Code Division Multiplexing)：3G中使用的CDMA通过编码的方式</li>
</ul>
<h2 id="波分多路复用和统计多路复用"><a href="#波分多路复用和统计多路复用" class="headerlink" title="波分多路复用和统计多路复用"></a>波分多路复用和统计多路复用</h2>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-03T10:00:00.000Z">2019-03-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 分钟 读完 (大约 1460 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/03/2019-03-03-2015-2016 Petrozavodsk Winter Training Camp, Nizhny Novgorod SU Contest/">2015-2016 Petrozavodsk Winter Training Camp, Nizhny Novgorod SU Contest</a>
            
        </h1>
        <div class="content">
            <h1 id="Forcefield"><a href="#Forcefield" class="headerlink" title="Forcefield"></a><a href="https://vjudge.net/problem/Gym-100960B" target="_blank" rel="noopener">Forcefield</a></h1>
undefined


<h1 id="Missing-Part"><a href="#Missing-Part" class="headerlink" title="Missing Part"></a><a href="https://vjudge.net/problem/Gym-100960C" target="_blank" rel="noopener">Missing Part</a></h1><p>给你一个串S，这个S是环状的，给你另外一个字符串S1，然后你需要定义一种大写的ABCDE到小写的abcde对应关系，使得失配数最小。</p>
<p>假设只有两种字符，那么1个卷积就行了。5个字符，最莽的做法是120个卷积，那得超时，预处理一下就是25个卷积。卷积当然要FFT啦。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> lf;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">65535</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> lf PI = <span class="hljs-built_in">acos</span>(<span class="hljs-number">-1</span>);</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rader</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	Rader(<span class="hljs-keyword">int</span> n) : <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-keyword">int</span>(<span class="hljs-built_in">ceil</span>(log2(n))))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = at(<span class="hljs-number">0</span>) = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (at(i) = at(i &gt;&gt; <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>, i &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				at(i) += size() &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FFT</span> :</span> Rader</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; w;</span><br><span class="line">	FFT(<span class="hljs-keyword">int</span> n) : Rader(n), w(size(), polar(<span class="hljs-number">1.0</span>, <span class="hljs-number">2</span> * PI / size()))</span><br><span class="line">	&#123;</span><br><span class="line">		w[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); ++i)</span><br><span class="line">			w[i] *= w[i - <span class="hljs-number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; fft(<span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; &amp;a)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; x(size());</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; a.size(); ++i)</span><br><span class="line">			x[at(i)] = a[i];</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); i &lt;&lt;= <span class="hljs-number">1</span>)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; i; ++j)</span><br><span class="line">				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = j; k &lt; size(); k += i &lt;&lt; <span class="hljs-number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="hljs-keyword">complex</span>&lt;lf&gt; &amp;l = x[k], &amp;r = x[k + i], t = w[size() / (i &lt;&lt; <span class="hljs-number">1</span>) * j] * r;</span><br><span class="line">					r = l - t, l += t;</span><br><span class="line">				&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; mul(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; xa, <span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; &amp;xb)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			xa[i] *= xb[i];</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;ll&gt; ans(size());</span><br><span class="line">		xa = fft(xa), ans[<span class="hljs-number">0</span>] = xa[<span class="hljs-number">0</span>].real() / size() + <span class="hljs-number">0.5</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); ++i)</span><br><span class="line">			ans[i] = xa[size() - i].real() / size() + <span class="hljs-number">0.5</span>;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">char</span> a[N], b[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s%s"</span>, a, b);</span><br><span class="line">	<span class="hljs-keyword">int</span> n = <span class="hljs-built_in">strlen</span>(a), ans = <span class="hljs-number">0</span>, p[<span class="hljs-number">5</span>];</span><br><span class="line">	<span class="hljs-function">FFT <span class="hljs-title">f</span><span class="hljs-params">(n * <span class="hljs-number">2</span>)</span></span>;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; sum[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>];</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;&gt; xa(<span class="hljs-number">5</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;(n * <span class="hljs-number">2</span>)), xb(<span class="hljs-number">5</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;(n * <span class="hljs-number">2</span>));</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">'A'</span> + i)</span><br><span class="line">				xa[i][j] = xa[i][j + n] = <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (b[j] == <span class="hljs-string">'a'</span> + i)</span><br><span class="line">				xb[i][n - j - <span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		xa[i] = f.fft(xa[i]), xb[i] = f.fft(xb[i]), p[i] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; ++j)</span><br><span class="line">			sum[i][j] = f.mul(xa[i], xb[j]);</span><br><span class="line">	<span class="hljs-keyword">do</span></span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>, tmp; j &lt; n * <span class="hljs-number">2</span>; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = tmp = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">				tmp += sum[i][p[i]][j];</span><br><span class="line">			ans = max(ans, tmp);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="hljs-keyword">while</span> (next_permutation(p, p + <span class="hljs-number">5</span>));</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, n - ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Cryptographic-Argument"><a href="#Cryptographic-Argument" class="headerlink" title="Cryptographic Argument"></a><a href="https://vjudge.net/problem/Gym-100960E" target="_blank" rel="noopener">Cryptographic Argument</a></h1><p>折纸的过程就是蝴蝶变换。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> ll M = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rader</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	Rader(<span class="hljs-keyword">int</span> n) : <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-keyword">int</span>(<span class="hljs-built_in">ceil</span>(log2(n))))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = at(<span class="hljs-number">0</span>) = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (at(i) = at(i &gt;&gt; <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>, i &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				at(i) += size() &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; rev0(<span class="hljs-number">1</span>), rev1(<span class="hljs-number">1</span>);</span><br><span class="line">ll h, k, m, l, r, a, b, c;</span><br><span class="line"><span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(ll u)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	ll p = u &gt;&gt; (k &gt;&gt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>, q = p &lt;&lt; (k &gt;&gt; <span class="hljs-number">1</span>) ^ u &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	p = rev1[p], q = rev0[q];</span><br><span class="line">	<span class="hljs-keyword">if</span> (u &amp; <span class="hljs-number">1</span>)</span><br><span class="line">		p ^= rev1.size() - <span class="hljs-number">1</span>, q ^= rev0.size() - <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> (q * rev1.size() | p) &lt;&lt; <span class="hljs-number">1</span> | u &amp; <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld%lld%lld%lld%lld%lld"</span>, &amp;k, &amp;m, &amp;l, &amp;r, &amp;a, &amp;b, &amp;c);</span><br><span class="line">	rev0 = Rader(<span class="hljs-number">1</span> &lt;&lt; (k &gt;&gt; <span class="hljs-number">1</span>)), rev1 = Rader(<span class="hljs-number">1</span> &lt;&lt; k - (k &gt;&gt; <span class="hljs-number">1</span>) - <span class="hljs-number">1</span>);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">0</span>, n = <span class="hljs-number">1L</span>L &lt;&lt; k; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (l &amp; <span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (r &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				h ^= (r - l &gt;&gt; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) + ask(l);</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				h ^= (r - l - <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) + ask(l) + ask(r);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (r &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				h ^= (r - l + <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span> &amp; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				h ^= (r - l &gt;&gt; <span class="hljs-number">1</span> &amp; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) ^ ask(r);</span><br><span class="line">		&#125;</span><br><span class="line">		h = ((l ^ r ^ h) + c) % M;</span><br><span class="line">		l = (l ^ a ^ h) % (n + <span class="hljs-number">1</span>) % n;</span><br><span class="line">		r = (r ^ b ^ h) % (n - l) + l;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="The-Jedi-Killer"><a href="#The-Jedi-Killer" class="headerlink" title="The Jedi Killer"></a><a href="https://vjudge.net/problem/Gym-100960F" target="_blank" rel="noopener">The Jedi Killer</a></h1><p>28、29行的<code>EPS</code>不能用<code>sgn</code>去掉，暂时不知道为啥…改了之后WA4（猜测是浮点数做减法的时候的对齐操作丢了精度）。</p>
<p>启示是浮点数比较大小的时候不能作差判<code>sgn</code>…</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> X real()</span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y imag()</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> lf;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">complex</span>&lt;lf&gt; Coord;</span><br><span class="line"><span class="hljs-keyword">const</span> lf EPS = <span class="hljs-number">1e-9</span>;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sgn</span><span class="hljs-params">(lf d)</span> </span>&#123; <span class="hljs-keyword">return</span> (d &gt; EPS) - (d &lt; -EPS); &#125;</span><br><span class="line"><span class="hljs-function">lf <span class="hljs-title">Cross</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Coord &amp;A, <span class="hljs-keyword">const</span> Coord &amp;B)</span> </span>&#123; <span class="hljs-keyword">return</span> A.X * B.Y - B.X * A.Y; &#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> t, lm, lg, ans;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;t); t--; <span class="hljs-built_in">printf</span>(ans ? <span class="hljs-string">"YES\n"</span> : <span class="hljs-string">"NO\n"</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;lm, &amp;lg);</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;Coord&gt; p;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, x, y; i &lt; <span class="hljs-number">3</span>; ++i)</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;x, &amp;y), p.emplace_back(x, y);</span><br><span class="line">		<span class="hljs-keyword">if</span> (!sgn(Cross(p[<span class="hljs-number">0</span>] - p[<span class="hljs-number">1</span>], p[<span class="hljs-number">1</span>] - p[<span class="hljs-number">2</span>])))</span><br><span class="line">			ans = sgn(max(max(<span class="hljs-built_in">abs</span>(p[<span class="hljs-number">0</span>] - p[<span class="hljs-number">1</span>]), <span class="hljs-built_in">abs</span>(p[<span class="hljs-number">1</span>] - p[<span class="hljs-number">2</span>])), <span class="hljs-built_in">abs</span>(p[<span class="hljs-number">2</span>] - p[<span class="hljs-number">0</span>])) - max(lm, lg * <span class="hljs-number">2</span>)) &lt;= <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = ans = <span class="hljs-number">0</span>; !ans &amp;&amp; i &lt; <span class="hljs-number">3</span>; ++i)</span><br><span class="line">			&#123;</span><br><span class="line">				lf d0 = <span class="hljs-built_in">abs</span>(p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]),</span><br><span class="line">				   h = <span class="hljs-built_in">fabs</span>(Cross(p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>] - p[i], p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>] - p[i]) / d0),</span><br><span class="line">				   d1 = <span class="hljs-built_in">sqrt</span>(norm(p[i] - p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>]) - h * h),</span><br><span class="line">				   d2 = <span class="hljs-built_in">sqrt</span>(norm(p[i] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]) - h * h);</span><br><span class="line">				ans = sgn(h - lm) &lt;= <span class="hljs-number">0</span> &amp;&amp; max(d1, d2) &lt;= lg + EPS ||</span><br><span class="line">					  sgn(h - lg) &lt;= <span class="hljs-number">0</span> &amp;&amp; max(d1, d2) &lt;= lm + EPS &amp;&amp;</span><br><span class="line">						  sgn(h * h + d0 * d0 - max(norm(p[i] - p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>]), norm(p[i] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]))) &lt;= <span class="hljs-number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Youngling-Tournament"><a href="#Youngling-Tournament" class="headerlink" title="Youngling Tournament"></a><a href="https://vjudge.net/problem/Gym-100960G" target="_blank" rel="noopener">Youngling Tournament</a></h1><p>给你n个数，然后从大到小排序，如果这个数不小于他后面的数的和，那么这个数就是胜利者。</p>
<p>单点修改，问你每次胜利者有多少个。</p>
<p>树状数组+<code>multiset</code>瞎几把做即可。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">	BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n, <span class="hljs-number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">			v[x] += w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			ans += v[x];</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125; rk;</span><br><span class="line">ll n, m, a[N], b[N], c[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;a[i]), rk.push_back(a[i]);</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld"</span>, &amp;b[i], &amp;c[i]), rk.push_back(c[i]);</span><br><span class="line">	rk.init();</span><br><span class="line">	<span class="hljs-built_in">multiset</span>&lt;ll&gt; s;</span><br><span class="line">	<span class="hljs-function">BaseFenwick <span class="hljs-title">t</span><span class="hljs-params">(rk.size() + <span class="hljs-number">1</span>)</span></span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		s.insert(a[i]), t.add(rk.ask(a[i]) + <span class="hljs-number">1</span>, a[i]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> res = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-built_in">multiset</span>&lt;ll&gt;::iterator p = s.begin(), q = p++;</span><br><span class="line">		<span class="hljs-keyword">if</span> (*p == *q)</span><br><span class="line">			++res;</span><br><span class="line">		<span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			p = s.lower_bound(t.ask(rk.ask(*q) + <span class="hljs-number">1</span>));</span><br><span class="line">			<span class="hljs-keyword">if</span> (p == s.begin())</span><br><span class="line">				++p;</span><br><span class="line">			<span class="hljs-keyword">if</span> (p == s.end())</span><br><span class="line">				<span class="hljs-keyword">break</span>;</span><br><span class="line">			q = p--;</span><br><span class="line">			<span class="hljs-keyword">if</span> (*q &gt;= t.ask(rk.ask(*p) + <span class="hljs-number">1</span>))</span><br><span class="line">				++res;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, res);</span><br><span class="line">		<span class="hljs-keyword">if</span> (i == m)</span><br><span class="line">			<span class="hljs-keyword">break</span>;</span><br><span class="line">		s.erase(s.find(a[b[i]]));</span><br><span class="line">		t.add(rk.ask(a[b[i]]) + <span class="hljs-number">1</span>, -a[b[i]]);</span><br><span class="line">		s.insert(a[b[i]] = c[i]);</span><br><span class="line">		t.add(rk.ask(a[b[i]]) + <span class="hljs-number">1</span>, a[b[i]]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Garland-Checking"><a href="#Garland-Checking" class="headerlink" title="Garland Checking"></a><a href="https://vjudge.net/problem/Gym-100960H" target="_blank" rel="noopener">Garland Checking</a></h1><p>不做路径压缩的并查集，增加一个splay操作，用于把某个点旋转到并查集的顶点。</p>
<p>正解是LCT…待学习。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">UnionFindSet</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; fa;</span><br><span class="line">	UnionFindSet(<span class="hljs-keyword">int</span> n) : fa(n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">			fa[i] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">splay</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> f)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (fa[u] != u)</span><br><span class="line">			splay(fa[u], u);</span><br><span class="line">		fa[u] = f;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u)</span> </span>&#123; <span class="hljs-keyword">return</span> fa[u] != u ? ask(fa[u]) : u; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">char</span> s[<span class="hljs-number">9</span>];</span><br><span class="line"><span class="hljs-keyword">int</span> n, a, b;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (UnionFindSet ufs(n + <span class="hljs-number">1</span>); ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s) &amp;&amp; s[<span class="hljs-number">0</span>] != <span class="hljs-string">'E'</span>;)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;a, &amp;b), ufs.splay(a, a), ufs.splay(b, b);</span><br><span class="line">		<span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == <span class="hljs-string">'T'</span>)</span><br><span class="line">			<span class="hljs-built_in">printf</span>(ufs.ask(a) == b ? <span class="hljs-string">"YES\n"</span> : <span class="hljs-string">"NO\n"</span>), fflush(<span class="hljs-built_in">stdout</span>);</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			ufs.fa[a] = s[<span class="hljs-number">0</span>] == <span class="hljs-string">'D'</span> ? a : b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/page/2/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/4/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/2/">2</a></li>
            
            <li><a class="pagination-link is-current" href="/page/3/">3</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/4/">4</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/cat/color_cat.jpg" alt="贾小厨">
                    
                    
                    <p class="is-size-4 is-block">
                        贾小厨
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        当前，你无法预测未来会怎样，但你可以选择跟靠谱的人一同工作，选择做正确的事。
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Beijing.China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        160
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        29
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        46
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/jiaxiaochu" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/jiaxiaochu">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/ACM/">
            <span class="level-start">
                <span class="level-item">ACM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">84</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/ACM/Template/">
            <span class="level-start">
                <span class="level-item">Template</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ACM/算法竞赛入门经典训练指南/">
            <span class="level-start">
                <span class="level-item">算法竞赛入门经典训练指南</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ACM/题解/">
            <span class="level-start">
                <span class="level-item">题解</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">50</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python/">
            <span class="level-start">
                <span class="level-item">Python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Spider/">
            <span class="level-start">
                <span class="level-item">Spider</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/函数程序设计实验/">
            <span class="level-start">
                <span class="level-item">函数程序设计实验</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/博客搭建/">
            <span class="level-start">
                <span class="level-item">博客搭建</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/吴恩达机器学习笔记/">
            <span class="level-start">
                <span class="level-item">吴恩达机器学习笔记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/学习笔记/">
            <span class="level-start">
                <span class="level-item">学习笔记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/小工具/">
            <span class="level-start">
                <span class="level-item">小工具</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/并行与分布式计算/">
            <span class="level-start">
                <span class="level-item">并行与分布式计算</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/操作系统/">
            <span class="level-start">
                <span class="level-item">操作系统</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/数字电路与逻辑设计/">
            <span class="level-start">
                <span class="level-item">数字电路与逻辑设计</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/机器学习/">
            <span class="level-start">
                <span class="level-item">机器学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/环境配置/">
            <span class="level-start">
                <span class="level-item">环境配置</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/程序设计/">
            <span class="level-start">
                <span class="level-item">程序设计</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机组成原理/">
            <span class="level-start">
                <span class="level-item">计算机组成原理</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机网络/">
            <span class="level-start">
                <span class="level-item">计算机网络</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/超级计算机原理与操作/">
            <span class="level-start">
                <span class="level-item">超级计算机原理与操作</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/07/23/pymysql远程连接被拒绝问题解决方法/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://ws1.sinaimg.cn/large/0065l1jqly1g592mgpd7mg30ot0ea7d5.gif" alt="pymysql远程连接被拒绝问题解决方法">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-22T16:08:33.000Z">2019-07-23</time></div>
                    <a href="/2019/07/23/pymysql远程连接被拒绝问题解决方法/" class="has-link-black-ter is-size-6">pymysql远程连接被拒绝问题解决方法</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/环境配置/">环境配置</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/22/Ubuntu系统搭建配置Python虚拟开发环境/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://ws1.sinaimg.cn/large/0065l1jqly1g590mpqs2ej30gg08c3ym.jpg" alt="Ubuntu系统搭建配置Python虚拟开发环境">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-22T14:57:27.000Z">2019-07-22</time></div>
                    <a href="/2019/07/22/Ubuntu系统搭建配置Python虚拟开发环境/" class="has-link-black-ter is-size-6">Ubuntu系统搭建配置Python虚拟开发环境</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/环境配置/">环境配置</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/14/2017-11-17-垃圾回收/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python中的垃圾回收机制">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-14T08:06:52.968Z">2019-07-14</time></div>
                    <a href="/2019/07/14/2017-11-17-垃圾回收/" class="has-link-black-ter is-size-6">Python中的垃圾回收机制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/14/2017-08-14-爬取网易财经中股票的历史交易数据/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="爬取网易财经中股票的历史交易数据">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-14T08:06:52.967Z">2019-07-14</time></div>
                    <a href="/2019/07/14/2017-08-14-爬取网易财经中股票的历史交易数据/" class="has-link-black-ter is-size-6">爬取网易财经中股票的历史交易数据</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Spider/">Spider</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/11/2019-03-31-应用层实验/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-10T16:08:06.399Z">2019-04-11</time></div>
                    <a href="/2019/04/11/2019-03-31-应用层实验/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/计算机网络/">计算机网络</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/ChromeDriver/" style="font-size: 10px;">ChromeDriver</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Deepin/" style="font-size: 11.43px;">Deepin</a> <a href="/tags/ICPC模板/" style="font-size: 18.57px;">ICPC模板</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NTT/" style="font-size: 10px;">NTT</a> <a href="/tags/Pycharm/" style="font-size: 11.43px;">Pycharm</a> <a href="/tags/Python解释器的安装与配置/" style="font-size: 12.86px;">Python解释器的安装与配置</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/chromedriver/" style="font-size: 10px;">chromedriver</a> <a href="/tags/pymysql/" style="font-size: 10px;">pymysql</a> <a href="/tags/三维计算几何/" style="font-size: 12.86px;">三维计算几何</a> <a href="/tags/主席树/" style="font-size: 10px;">主席树</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二维计算几何/" style="font-size: 10px;">二维计算几何</a> <a href="/tags/动态开点/" style="font-size: 10px;">动态开点</a> <a href="/tags/励志/" style="font-size: 10px;">励志</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 12.86px;">单调队列</a> <a href="/tags/原根/" style="font-size: 10px;">原根</a> <a href="/tags/可持久化/" style="font-size: 11.43px;">可持久化</a> <a href="/tags/扫描线/" style="font-size: 10px;">扫描线</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 17.14px;">数据结构</a> <a href="/tags/数论/" style="font-size: 11.43px;">数论</a> <a href="/tags/无旋Treap/" style="font-size: 14.29px;">无旋Treap</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最短路/" style="font-size: 10px;">最短路</a> <a href="/tags/树状数组/" style="font-size: 10px;">树状数组</a> <a href="/tags/环境配置/" style="font-size: 20px;">环境配置</a> <a href="/tags/珂朵莉树/" style="font-size: 11.43px;">珂朵莉树</a> <a href="/tags/系统配置/" style="font-size: 10px;">系统配置</a> <a href="/tags/线段树/" style="font-size: 15.71px;">线段树</a> <a href="/tags/老司机树/" style="font-size: 11.43px;">老司机树</a> <a href="/tags/莫比乌斯反演/" style="font-size: 10px;">莫比乌斯反演</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/虚拟环境/" style="font-size: 10px;">虚拟环境</a> <a href="/tags/谷歌输入法/" style="font-size: 10px;">谷歌输入法</a>
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">22</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">27</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">21</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Anaconda/">
                        <span class="tag">Anaconda</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ChromeDriver/">
                        <span class="tag">ChromeDriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DP/">
                        <span class="tag">DP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Deepin/">
                        <span class="tag">Deepin</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ICPC模板/">
                        <span class="tag">ICPC模板</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LCA/">
                        <span class="tag">LCA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NTT/">
                        <span class="tag">NTT</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Pycharm/">
                        <span class="tag">Pycharm</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Python解释器的安装与配置/">
                        <span class="tag">Python解释器的安装与配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/VMware/">
                        <span class="tag">VMware</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chrome/">
                        <span class="tag">chrome</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chromedriver/">
                        <span class="tag">chromedriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pymysql/">
                        <span class="tag">pymysql</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/三维计算几何/">
                        <span class="tag">三维计算几何</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/主席树/">
                        <span class="tag">主席树</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二分/">
                        <span class="tag">二分</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二维计算几何/">
                        <span class="tag">二维计算几何</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态开点/">
                        <span class="tag">动态开点</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/励志/">
                        <span class="tag">励志</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调栈/">
                        <span class="tag">单调栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调队列/">
                        <span class="tag">单调队列</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/原根/">
                        <span class="tag">原根</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/可持久化/">
                        <span class="tag">可持久化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扫描线/">
                        <span class="tag">扫描线</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/拓扑排序/">
                        <span class="tag">拓扑排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/搜索/">
                        <span class="tag">搜索</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数论/">
                        <span class="tag">数论</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无旋Treap/">
                        <span class="tag">无旋Treap</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最大流/">
                        <span class="tag">最大流</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最短路/">
                        <span class="tag">最短路</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/树状数组/">
                        <span class="tag">树状数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/珂朵莉树/">
                        <span class="tag">珂朵莉树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统配置/">
                        <span class="tag">系统配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线段树/">
                        <span class="tag">线段树</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/老司机树/">
                        <span class="tag">老司机树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/莫比乌斯反演/">
                        <span class="tag">莫比乌斯反演</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟机/">
                        <span class="tag">虚拟机</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟环境/">
                        <span class="tag">虚拟环境</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/谷歌输入法/">
                        <span class="tag">谷歌输入法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
            

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/jiaxiaochu" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/ChromeDriver/" style="font-size: 10px;">ChromeDriver</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Deepin/" style="font-size: 11.43px;">Deepin</a> <a href="/tags/ICPC模板/" style="font-size: 18.57px;">ICPC模板</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NTT/" style="font-size: 10px;">NTT</a> <a href="/tags/Pycharm/" style="font-size: 11.43px;">Pycharm</a> <a href="/tags/Python解释器的安装与配置/" style="font-size: 12.86px;">Python解释器的安装与配置</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/chromedriver/" style="font-size: 10px;">chromedriver</a> <a href="/tags/pymysql/" style="font-size: 10px;">pymysql</a> <a href="/tags/三维计算几何/" style="font-size: 12.86px;">三维计算几何</a> <a href="/tags/主席树/" style="font-size: 10px;">主席树</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二维计算几何/" style="font-size: 10px;">二维计算几何</a> <a href="/tags/动态开点/" style="font-size: 10px;">动态开点</a> <a href="/tags/励志/" style="font-size: 10px;">励志</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 12.86px;">单调队列</a> <a href="/tags/原根/" style="font-size: 10px;">原根</a> <a href="/tags/可持久化/" style="font-size: 11.43px;">可持久化</a> <a href="/tags/扫描线/" style="font-size: 10px;">扫描线</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 17.14px;">数据结构</a> <a href="/tags/数论/" style="font-size: 11.43px;">数论</a> <a href="/tags/无旋Treap/" style="font-size: 14.29px;">无旋Treap</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最短路/" style="font-size: 10px;">最短路</a> <a href="/tags/树状数组/" style="font-size: 10px;">树状数组</a> <a href="/tags/环境配置/" style="font-size: 20px;">环境配置</a> <a href="/tags/珂朵莉树/" style="font-size: 11.43px;">珂朵莉树</a> <a href="/tags/系统配置/" style="font-size: 10px;">系统配置</a> <a href="/tags/线段树/" style="font-size: 15.71px;">线段树</a> <a href="/tags/老司机树/" style="font-size: 11.43px;">老司机树</a> <a href="/tags/莫比乌斯反演/" style="font-size: 10px;">莫比乌斯反演</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/虚拟环境/" style="font-size: 10px;">虚拟环境</a> <a href="/tags/谷歌输入法/" style="font-size: 10px;">谷歌输入法</a>
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">22</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">27</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">21</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Anaconda/">
                        <span class="tag">Anaconda</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ChromeDriver/">
                        <span class="tag">ChromeDriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DP/">
                        <span class="tag">DP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Deepin/">
                        <span class="tag">Deepin</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ICPC模板/">
                        <span class="tag">ICPC模板</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LCA/">
                        <span class="tag">LCA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NTT/">
                        <span class="tag">NTT</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Pycharm/">
                        <span class="tag">Pycharm</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Python解释器的安装与配置/">
                        <span class="tag">Python解释器的安装与配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/VMware/">
                        <span class="tag">VMware</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chrome/">
                        <span class="tag">chrome</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chromedriver/">
                        <span class="tag">chromedriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pymysql/">
                        <span class="tag">pymysql</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/三维计算几何/">
                        <span class="tag">三维计算几何</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/主席树/">
                        <span class="tag">主席树</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二分/">
                        <span class="tag">二分</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二维计算几何/">
                        <span class="tag">二维计算几何</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态开点/">
                        <span class="tag">动态开点</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/励志/">
                        <span class="tag">励志</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调栈/">
                        <span class="tag">单调栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调队列/">
                        <span class="tag">单调队列</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/原根/">
                        <span class="tag">原根</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/可持久化/">
                        <span class="tag">可持久化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扫描线/">
                        <span class="tag">扫描线</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/拓扑排序/">
                        <span class="tag">拓扑排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/搜索/">
                        <span class="tag">搜索</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数论/">
                        <span class="tag">数论</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无旋Treap/">
                        <span class="tag">无旋Treap</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最大流/">
                        <span class="tag">最大流</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最短路/">
                        <span class="tag">最短路</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/树状数组/">
                        <span class="tag">树状数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/珂朵莉树/">
                        <span class="tag">珂朵莉树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统配置/">
                        <span class="tag">系统配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线段树/">
                        <span class="tag">线段树</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/老司机树/">
                        <span class="tag">老司机树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/莫比乌斯反演/">
                        <span class="tag">莫比乌斯反演</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟机/">
                        <span class="tag">虚拟机</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟环境/">
                        <span class="tag">虚拟环境</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/谷歌输入法/">
                        <span class="tag">谷歌输入法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/jiaxiaochu" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="贾志翔的博客" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 jiazhixiang&nbsp;
                Powered &#10084; YH · Lin
                </p>
            </div>
            
            <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

            
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/jiaxiaochu/jiaxiaochu.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        <div align="center">
            <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("4/1/2019 12:49:00");//此处修改你的建站时间或者网站上线时间 
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
                    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                } 
            setInterval("createtime()",250);
            </script>
            <div align="center">
            <span id="busuanzi_container_site_pv" class="theme-info">本站总访问量-<span id="busuanzi_value_site_pv"></span>-次|
              </span>
              <span id="busuanzi_container_site_uv" class="theme-info">您是第-<span id="busuanzi_value_site_uv"></span>-位小伙伴</span>

            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            </div>
        </div>
        <span>
        <script type="text/javascript" src="//rf.revolvermaps.com/0/0/0.js?i=0xetp0d4rdh&amp;d=2&amp;p=1&amp;b=8&amp;w=193&amp;g=2&amp;f=arial&amp;fs=12&amp;r=0&amp;c0=000000&amp;c1=00a99d&amp;c2=000000&amp;ic0=0&amp;ic1=0" async="async"></script>
        </span>
        </div>

    </div>

    <script>
        (function(){
            var bp = document.createElement('script');
            bp.src = '//push.zhanzhang.baidu.com/push.js';
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
</script>
<script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
        <!-- 雪花特效 -->
    <script type="text/javascript">
      var windowWidth = $(window).width();
      if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/src/snow.js"><\/script>');
      }
    </script>

    <script src="//code.tidio.co/wgmwb2zlxrcti0crizzmumshwbxpums2.js"></script>
    
</body>
</html>