<!DOCTYPE html>
<script src="/js/src/clicklove.js"></script>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>分类: ACM - 贾志翔的博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta property="og:type" content="website">
<meta property="og:title" content="贾志翔的博客">
<meta property="og:url" content="http://yoursite.com/categories/ACM/index.html">
<meta property="og:site_name" content="贾志翔的博客">
<meta property="og:description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="贾志翔的博客">
<meta name="twitter:description" content="jia jiazhixiang jiaxiaochu jiaxiaochu.github.io">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="贾志翔的博客" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">主页</a>
                
                <a class="navbar-item" href="/archives">归档</a>
                
                <a class="navbar-item" href="/tags">标签</a>
                
                <a class="navbar-item" href="/about">支持</a>
                
                <a class="navbar-item" href="http://www.tripwiremagazine.com/wp-content/uploads/images/stories/Articles/9_Funniest_JavaScript_effects/Unclosable%20Window.html">别点·有毒</a>
                
                <a class="navbar-item" href="http://fanfou.com/">饭否</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="https://github.com/jiaxiaochu/jiaxiaochu.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/categories">分类</a></li>
            
            <li class="is-active"><a href="#" aria-current="page">ACM</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.398Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 450 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-03-23-ACM-ICPC World Finals 2018/">ACM-ICPC World Finals 2018</a>
            
        </h1>
        <div class="content">
            <h1 id="Comma-Sprinkler"><a href="#Comma-Sprinkler" class="headerlink" title="Comma Sprinkler"></a><a href="https://vjudge.net/problem/Kattis-comma" target="_blank" rel="noopener">Comma Sprinkler</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">9</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ID</span> :</span> <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; v;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> &amp;s)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (count(s))</span><br><span class="line">			<span class="hljs-keyword">return</span> at(s);</span><br><span class="line">		<span class="hljs-keyword">return</span> insert(&#123;s, v.size()&#125;), v.push_back(s), v.size() - <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; id;</span><br><span class="line"><span class="hljs-built_in">deque</span>&lt;pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt; q;</span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; v[N];</span><br><span class="line"><span class="hljs-keyword">char</span> s[N], t[N], vis[N][<span class="hljs-number">2</span>];</span><br><span class="line"><span class="hljs-keyword">int</span> n, a[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (; ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s); ++n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> len = <span class="hljs-built_in">strlen</span>(s);</span><br><span class="line">		<span class="hljs-keyword">if</span> (s[len - <span class="hljs-number">1</span>] == <span class="hljs-string">','</span> || s[len - <span class="hljs-number">1</span>] == <span class="hljs-string">'.'</span>)</span><br><span class="line">			t[n] = s[--len], s[len] = <span class="hljs-number">0</span>;</span><br><span class="line">		v[a[n] = id.ask(s)].push_back(n);</span><br><span class="line">		<span class="hljs-keyword">if</span> (t[n] == <span class="hljs-string">','</span>)</span><br><span class="line">			q.push_back(&#123;n, <span class="hljs-number">1</span>&#125;), q.push_back(&#123;n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (; !q.empty(); q.pop_front())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> an = a[q.front().first], type = q.front().second;</span><br><span class="line">		<span class="hljs-keyword">if</span> (vis[an][type] || q.front().first &gt;= n)</span><br><span class="line">			<span class="hljs-keyword">continue</span>;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			vis[an][type] = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">if</span> (type)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i : v[an])</span><br><span class="line">				<span class="hljs-keyword">if</span> (!t[i])</span><br><span class="line">					t[i] = <span class="hljs-string">','</span>, q.push_back(&#123;i + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i : v[an])</span><br><span class="line">				<span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; !t[i - <span class="hljs-number">1</span>])</span><br><span class="line">					t[i - <span class="hljs-number">1</span>] = <span class="hljs-string">','</span>, q.push_back(&#123;i - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">cout</span> &lt;&lt; id.v[a[i]];</span><br><span class="line">		<span class="hljs-keyword">if</span> (t[i])</span><br><span class="line">			<span class="hljs-built_in">cout</span> &lt;&lt; t[i];</span><br><span class="line">		<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Go-with-the-Flow"><a href="#Go-with-the-Flow" class="headerlink" title="Go with the Flow"></a><a href="https://vjudge.net/problem/Kattis-gowithflow" target="_blank" rel="noopener">Go with the Flow</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">4095</span>;</span><br><span class="line"><span class="hljs-keyword">char</span> s[<span class="hljs-number">99</span>];</span><br><span class="line"><span class="hljs-keyword">int</span> n, a[N], ans0, ans1;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s), a[i] = <span class="hljs-built_in">strlen</span>(s);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> len = *max_element(a, a + n), i = len; i &lt; n * len + n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt; mp, mmp;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>, now = <span class="hljs-number">0</span>, p = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			now += a[j] + <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (j + <span class="hljs-number">1</span> &gt;= n || now + a[j + <span class="hljs-number">1</span>] &gt; i)</span><br><span class="line">			&#123;</span><br><span class="line">				now = p = <span class="hljs-number">0</span>;</span><br><span class="line">				swap(mp, mmp);</span><br><span class="line">				mp.clear();</span><br><span class="line">				<span class="hljs-keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			mp.push_back(&#123;now, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">			<span class="hljs-keyword">while</span> (p &lt; mmp.size() &amp;&amp; mmp[p].first &lt; now - <span class="hljs-number">1</span>)</span><br><span class="line">				++p;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = p; k &lt; mmp.size() &amp;&amp; mmp[k].first &lt; now + <span class="hljs-number">2</span>; ++k)</span><br><span class="line">				mp.back().second = max(mp.back().second, mmp[k].second + <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">if</span> (ans1 &lt; mp.back().second)</span><br><span class="line">				ans0 = i, ans1 = mp.back().second;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d"</span>, ans0, ans1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Wireless-is-the-New-Fiber"><a href="#Wireless-is-the-New-Fiber" class="headerlink" title="Wireless is the New Fiber"></a><a href="https://vjudge.net/problem/Kattis-newfiber" target="_blank" rel="noopener">Wireless is the New Fiber</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">9</span>;</span><br><span class="line"><span class="hljs-built_in">set</span>&lt;pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;&gt; p, q;</span><br><span class="line"><span class="hljs-keyword">int</span> n, m, d[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, u, v; i &lt; m; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;u, &amp;v), ++d[u], ++d[v];</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		p.insert(&#123;d[i], i&#125;);</span><br><span class="line">	<span class="hljs-keyword">int</span> t = (m = n) - <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it : p)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (t &gt; it.first - <span class="hljs-number">1</span>)</span><br><span class="line">			t -= it.first - <span class="hljs-number">1</span>, q.insert(it), --m;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			q.insert(&#123;t, it.second&#125;), t = <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n%d %d\n"</span>, m, n, n - <span class="hljs-number">1</span>);</span><br><span class="line">	<span class="hljs-keyword">while</span> (!q.empty())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">auto</span> ch = *q.begin(), fa = *q.rbegin();</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d\n"</span>, ch.second, fa.second);</span><br><span class="line">		q.erase(ch), q.erase(fa);</span><br><span class="line">		<span class="hljs-keyword">if</span> (--fa.first)</span><br><span class="line">			q.insert(fa);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-10T16:08:06.397Z">2019-04-11</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 分钟 读完 (大约 1375 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/11/2019-03-20-2018-2019 ACM-ICPC Southeastern European Regional Programming Contest (SEERC 2018)/">2018-2019 ACM-ICPC Southeastern European Regional Programming Contest (SEERC 2018)</a>
            
        </h1>
        <div class="content">
            <h1 id="Broken-Watch"><a href="#Broken-Watch" class="headerlink" title="Broken Watch"></a><a href="https://vjudge.net/problem/Gym-101964B" target="_blank" rel="noopener">Broken Watch</a></h1><p>假如三根指针等长，答案是$C_n^3-3*C_{\lfloor\frac{n-1}{2}\rfloor}$。</p>
<p>两根指针等长，在上述答案上乘2；三根指针不等长，在上述答案上乘6。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line">ll a, b, c, n;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%llu%llu%llu%llu"</span>, &amp;a, &amp;b, &amp;c, &amp;n);</span><br><span class="line">	ll tmp[<span class="hljs-number">3</span>] = &#123;n, n - <span class="hljs-number">1</span>, n - <span class="hljs-number">2</span>&#125;;</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">2</span>; i &lt; <span class="hljs-number">4</span>; ++i)</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span> (tmp[j] % i == <span class="hljs-number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				tmp[j] /= i;</span><br><span class="line">				<span class="hljs-keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">	ll ans = tmp[<span class="hljs-number">0</span>] * tmp[<span class="hljs-number">1</span>] * tmp[<span class="hljs-number">2</span>];</span><br><span class="line">	tmp[<span class="hljs-number">0</span>] = n - <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	tmp[<span class="hljs-number">1</span>] = tmp[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>;</span><br><span class="line">	tmp[<span class="hljs-number">2</span>] = n;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>, i = <span class="hljs-number">2</span>; j &lt; <span class="hljs-number">3</span>; ++j)</span><br><span class="line">		<span class="hljs-keyword">if</span> (tmp[j] % i == <span class="hljs-number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			tmp[j] /= i;</span><br><span class="line">			<span class="hljs-keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	ans -= tmp[<span class="hljs-number">0</span>] * tmp[<span class="hljs-number">1</span>] * tmp[<span class="hljs-number">2</span>];</span><br><span class="line">	<span class="hljs-keyword">if</span> (a != b &amp;&amp; b != c &amp;&amp; c != a)</span><br><span class="line">		ans *= <span class="hljs-number">6</span>;</span><br><span class="line">	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a != b || b != c || c != a)</span><br><span class="line">		ans *= <span class="hljs-number">3</span>;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%llu"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Tree"><a href="#Tree" class="headerlink" title="Tree"></a><a href="https://vjudge.net/problem/Gym-101964C" target="_blank" rel="noopener">Tree</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">127</span>, INF = <span class="hljs-number">1e9</span>;</span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; g[N];</span><br><span class="line"><span class="hljs-keyword">int</span> n, m, ans = INF, p[N], a[N][N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		fill(a[i], a[i] + n, INF);</span><br><span class="line">		a[i][i] = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>, u, v; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">		g[--u].push_back(--v);</span><br><span class="line">		g[v].push_back(u);</span><br><span class="line">		a[u][v] = a[v][u] = <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; n; ++k)</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">				a[i][j] = min(a[i][j], a[i][k] + a[k][j]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; vis(n, <span class="hljs-number">0</span>), v;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-built_in">deque</span>&lt;<span class="hljs-keyword">int</span>&gt; q(vis[i] = <span class="hljs-number">1</span>, i);; q.pop_front())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (p[q.front()])</span><br><span class="line">				v.push_back(q.front());</span><br><span class="line">			<span class="hljs-keyword">if</span> (v.size() &gt;= m)</span><br><span class="line">				<span class="hljs-keyword">break</span>;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> to : g[q.front()])</span><br><span class="line">				<span class="hljs-keyword">if</span> (!vis[to])</span><br><span class="line">					q.push_back(to), vis[to] = <span class="hljs-number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">int</span> tmp = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> j : v)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> k : v)</span><br><span class="line">				tmp = max(tmp, a[j][k]);</span><br><span class="line">		ans = min(ans, tmp);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Fishermen"><a href="#Fishermen" class="headerlink" title="Fishermen"></a><a href="https://vjudge.net/problem/Gym-101964E" target="_blank" rel="noopener">Fishermen</a></h1><p>理解这个题的意思之后提出一种新的方案：计算每条🐟对答案的贡献。因为懒的离散化，这里用风骚的动态开点线段树做掉。</p>

undefined


<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">2e5</span> + <span class="hljs-number">9</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">	BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n, <span class="hljs-number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">			v[x] += w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			ans += v[x];</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">int</span> x, y, id;</span><br><span class="line">	<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Point &amp;rhs) <span class="hljs-keyword">const</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (x != rhs.x)</span><br><span class="line">			<span class="hljs-keyword">return</span> x &lt; rhs.x;</span><br><span class="line">		<span class="hljs-keyword">if</span> (y != rhs.y)</span><br><span class="line">			y &lt; rhs.y;</span><br><span class="line">		<span class="hljs-keyword">return</span> id &lt; rhs.id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		sort(begin(), end()), resize(unique(begin(), end()) - begin());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> y)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">return</span> lower_bound(begin(), end(), y) - begin();</span><br><span class="line">	&#125;</span><br><span class="line">&#125; rk;</span><br><span class="line"><span class="hljs-keyword">int</span> n, m, l, ans[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Point&gt; p;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>, &amp;n, &amp;m, &amp;l);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, x, y; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">		p.push_back(&#123;y + x, y - x, <span class="hljs-number">-1</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, x; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;x);</span><br><span class="line">		p.push_back(&#123;l + x, l - x, i&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	sort(p.begin(), p.end());</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; p.size(); ++i)</span><br><span class="line">		rk.push_back(p[i].y);</span><br><span class="line">	rk.init();</span><br><span class="line">	<span class="hljs-function">BaseFenwick <span class="hljs-title">t</span><span class="hljs-params">(rk.size() + <span class="hljs-number">9</span>)</span></span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>; i &lt; p.size(); ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; p[j].x &lt; p[i].x - l * <span class="hljs-number">2</span>; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span> (p[j].id &lt; <span class="hljs-number">0</span>)</span><br><span class="line">				t.add(rk.ask(p[j].y) + <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>);</span><br><span class="line">		<span class="hljs-keyword">if</span> (p[i].id &lt; <span class="hljs-number">0</span>)</span><br><span class="line">			t.add(rk.ask(p[i].y) + <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			ans[p[i].id] = t.ask(rk.ask(p[i].y) + <span class="hljs-number">1</span>) - t.ask(rk.ask(p[i].y - l * <span class="hljs-number">2</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, ans[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Inversion"><a href="#Inversion" class="headerlink" title="Inversion"></a><a href="https://vjudge.net/problem/Gym-101964I" target="_blank" rel="noopener">Inversion</a></h1><p>首先，我们要把原序列还原，根据逆序对的性质，还原出原序列。接着，根据题意两个对集合的定义，可以知道选出的那个点集是从左到右升序的，且点集中最小的点在序列中左边没有比它更小的点，最大的点在序列中右边没有比它更大的点，所以我们可以进行dp，dp[i]表示以i为点集最后一个点的答案的数量。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">127</span>;</span><br><span class="line">ll f[N];</span><br><span class="line"><span class="hljs-keyword">int</span> n, m, d[N], p[N], vis[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, x, y; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">		++d[min(--x, --y)];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span> (!vis[j])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="hljs-keyword">if</span> (d[i])</span><br><span class="line">					--d[i];</span><br><span class="line">				<span class="hljs-keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					p[i] = j;</span><br><span class="line">					vis[j] = <span class="hljs-number">1</span>;</span><br><span class="line">					<span class="hljs-keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">	p[n] = n;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i - <span class="hljs-number">1</span>, mx = <span class="hljs-number">-1</span>; ~j; --j)</span><br><span class="line">			<span class="hljs-keyword">if</span> (mx &lt; p[j] &amp;&amp; p[j] &lt; p[i])</span><br><span class="line">				mx = p[j], f[i] += f[j];</span><br><span class="line">		f[i] = max(<span class="hljs-number">1L</span>L, f[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, f[n]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-09T10:00:00.000Z">2019-03-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 分钟 读完 (大约 668 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/09/2019-03-09-2015-2016 Petrozavodsk Winter Training Camp, SPb SU + SPb AU Contest/">2015-2016 Petrozavodsk Winter Training Camp, SPb SU + SPb AU Contest</a>
            
        </h1>
        <div class="content">
            <h1 id="Greedy-Game"><a href="#Greedy-Game" class="headerlink" title="Greedy Game"></a><a href="https://vjudge.net/problem/Gym-100956D" target="_blank" rel="noopener">Greedy Game</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> A first</span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> B second</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">7</span>;</span><br><span class="line">pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; p[N];</span><br><span class="line">priority_queue&lt;<span class="hljs-keyword">int</span>&gt; q;</span><br><span class="line"><span class="hljs-keyword">int</span> n;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i].A);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i].B);</span><br><span class="line">	sort(p, p + n);</span><br><span class="line">	<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i -= <span class="hljs-number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ans += p[i].B, q.push(-p[i].B);</span><br><span class="line">		<span class="hljs-keyword">if</span> (i &amp;&amp; p[i - <span class="hljs-number">1</span>].B &gt; -q.top())</span><br><span class="line">			ans += p[i - <span class="hljs-number">1</span>].B + q.top(), q.pop(), q.push(-p[i - <span class="hljs-number">1</span>].B);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Colored-Path"><a href="#Colored-Path" class="headerlink" title="Colored Path"></a><a href="https://vjudge.net/problem/Gym-100956F" target="_blank" rel="noopener">Colored Path</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>&gt; pii;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> N=<span class="hljs-number">4e2</span>+<span class="hljs-number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;pii&gt; ans;</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> n, k, W;</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> w[N][N], c[N][N], dp[N][N];</span><br><span class="line">pii last[N][N];</span><br><span class="line"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a[<span class="hljs-number">1200</span>];</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-title">count</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a)</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ret=<span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">while</span>(a) a-=(a&amp;(-a)), ret++;</span><br><span class="line">	<span class="hljs-keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> a, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="hljs-keyword">return</span> count(a)&lt;=count(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> x, <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> y)</span> </span>&#123;</span><br><span class="line">	ans.push_back(pii(x, y));</span><br><span class="line">	<span class="hljs-keyword">if</span> (x==<span class="hljs-number">1</span>&amp;&amp;y==<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;</span><br><span class="line">	print(last[x][y].first, last[x][y].second);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;</span><br><span class="line">	<span class="hljs-comment">//freopen("in.txt", "r", stdin);</span></span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld %lld %lld"</span>, &amp;n, &amp;k, &amp;W);</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;w[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;c[i][j]);</span><br><span class="line">			c[i][j]--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt;(<span class="hljs-number">1</span>&lt;&lt;k); i++) &#123;</span><br><span class="line">		a[i]=i;</span><br><span class="line">	&#125;</span><br><span class="line">	sort(a, a+(<span class="hljs-number">1</span>&lt;&lt;k), cmp);</span><br><span class="line"></span><br><span class="line">	<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> t=<span class="hljs-number">0</span>; t&lt;(<span class="hljs-number">1</span>&lt;&lt;k); t++) &#123;</span><br><span class="line">		<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> s=a[t];</span><br><span class="line">		<span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span>(dp));</span><br><span class="line">		<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">		<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[n][n])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">		dp[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]=w[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>];</span><br><span class="line">		<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> j=<span class="hljs-number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">				<span class="hljs-keyword">if</span> (!((<span class="hljs-number">1</span>&lt;&lt;c[i][j])&amp;s)) <span class="hljs-keyword">continue</span>;</span><br><span class="line">				<span class="hljs-keyword">if</span> (i&gt;<span class="hljs-number">1</span>) &#123;</span><br><span class="line">					<span class="hljs-keyword">if</span> (dp[i<span class="hljs-number">-1</span>][j]+w[i][j]&lt;dp[i][j]) &#123;</span><br><span class="line">						last[i][j]=pii(i<span class="hljs-number">-1</span>, j);</span><br><span class="line">						dp[i][j]=dp[i<span class="hljs-number">-1</span>][j]+w[i][j];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="hljs-keyword">if</span> (j&gt;<span class="hljs-number">1</span>) &#123;</span><br><span class="line">					<span class="hljs-keyword">if</span> (dp[i][j<span class="hljs-number">-1</span>]+w[i][j]&lt;dp[i][j]) &#123;</span><br><span class="line">						last[i][j]=pii(i, j<span class="hljs-number">-1</span>);</span><br><span class="line">						dp[i][j]=dp[i][j<span class="hljs-number">-1</span>]+w[i][j];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (dp[n][n]&lt;=W) &#123;</span><br><span class="line">			print(n, n);</span><br><span class="line">			<span class="hljs-built_in">cout</span>&lt;&lt;count(s)&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">			reverse(ans.begin(), ans.end());</span><br><span class="line">			<span class="hljs-keyword">for</span>(<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> i=<span class="hljs-number">0</span>; i&lt;ans.size(); i++) &#123;</span><br><span class="line">				<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld %lld"</span>, ans[i].first, ans[i].second);</span><br><span class="line">				<span class="hljs-keyword">if</span> (i==((<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>)ans.size()<span class="hljs-number">-1</span>)) <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">				<span class="hljs-keyword">else</span> <span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-string">' '</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">cout</span>&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;<span class="hljs-built_in">endl</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Set-Intersection"><a href="#Set-Intersection" class="headerlink" title="Set Intersection"></a><a href="https://vjudge.net/problem/Gym-100956I" target="_blank" rel="noopener">Set Intersection</a></h1><p>大暴力就能苟过去…网上正解是随机化。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">12e3</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-built_in">bitset</span>&lt;N&gt; a[N];</span><br><span class="line"><span class="hljs-keyword">char</span> s[N];</span><br><span class="line"><span class="hljs-keyword">int</span> n;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; s[k]; ++k)</span><br><span class="line">		&#123;</span><br><span class="line">			s[k] -= <span class="hljs-number">33</span>;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">6</span>; ++j)</span><br><span class="line">				a[i][k * <span class="hljs-number">6</span> + j] = s[k] &amp; <span class="hljs-number">1</span>, s[k] &gt;&gt;= <span class="hljs-number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; i; ++j)</span><br><span class="line">			<span class="hljs-keyword">if</span> ((a[i] &amp; a[j]).count() &gt;= n / <span class="hljs-number">2</span>)</span><br><span class="line">				<span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d %d"</span>, i + <span class="hljs-number">1</span>, j + <span class="hljs-number">1</span>), <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Sort-It"><a href="#Sort-It" class="headerlink" title="Sort It!"></a><a href="https://vjudge.net/problem/Gym-100956J" target="_blank" rel="noopener">Sort It!</a></h1><p>树状数组求完逆序对之后容斥一下就行了。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> ll N = <span class="hljs-number">2e3</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mod</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">const</span> ll M;</span><br><span class="line">	Mod(ll M) : M(M) &#123;&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">add</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> ((a + b) % M + M) % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">mul</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> a * b % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">pow</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll r = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (a %= M; b; b &gt;&gt;= <span class="hljs-number">1</span>, a = mul(a, a))</span><br><span class="line">			<span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				r = mul(r, a);</span><br><span class="line">		<span class="hljs-keyword">return</span> r;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Factorial</span> :</span> Mod</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; fac, ifac;</span><br><span class="line">	Factorial(<span class="hljs-keyword">int</span> N, ll M) : fac(N, <span class="hljs-number">1</span>), ifac(N, <span class="hljs-number">1</span>), Mod(M)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; N; ++i)</span><br><span class="line">			fac[i] = mul(fac[i - <span class="hljs-number">1</span>], i), ifac[i] = mul(M - M / i, ifac[M % i]);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt; N; ++i)</span><br><span class="line">			ifac[i] = mul(ifac[i], ifac[i - <span class="hljs-number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">c</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n, <span class="hljs-keyword">int</span> m)</span> </span>&#123; <span class="hljs-keyword">return</span> mul(mul(fac[n], ifac[m]), ifac[n - m]); &#125;</span><br><span class="line">&#125; F(N, <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>);</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">	BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n, <span class="hljs-number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">			v[x] = F.add(v[x], w);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			ans = F.add(ans, v[x]);</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">int</span> n, p[N], b[N], ans;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;p[i]), b[i] = <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-function">BaseFenwick <span class="hljs-title">t</span><span class="hljs-params">(N)</span></span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			t.add(p[j], b[j]);</span><br><span class="line">			cnt = F.add(cnt, b[j] = t.ask(p[j] - <span class="hljs-number">1</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		ans = F.add(ans, cnt * F.<span class="hljs-built_in">pow</span>(i, n));</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i - <span class="hljs-number">1</span>; j; --j)</span><br><span class="line">		&#123;</span><br><span class="line">			cnt = F.mul(cnt, F.M - <span class="hljs-number">1</span>);</span><br><span class="line">			ans = F.add(ans, F.mul(cnt, F.mul(F.c(i, j), F.<span class="hljs-built_in">pow</span>(j, n))));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, F.add(ans, n));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-03T10:00:00.000Z">2019-03-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 分钟 读完 (大约 1460 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/03/2019-03-03-2015-2016 Petrozavodsk Winter Training Camp, Nizhny Novgorod SU Contest/">2015-2016 Petrozavodsk Winter Training Camp, Nizhny Novgorod SU Contest</a>
            
        </h1>
        <div class="content">
            <h1 id="Forcefield"><a href="#Forcefield" class="headerlink" title="Forcefield"></a><a href="https://vjudge.net/problem/Gym-100960B" target="_blank" rel="noopener">Forcefield</a></h1>
undefined


<h1 id="Missing-Part"><a href="#Missing-Part" class="headerlink" title="Missing Part"></a><a href="https://vjudge.net/problem/Gym-100960C" target="_blank" rel="noopener">Missing Part</a></h1><p>给你一个串S，这个S是环状的，给你另外一个字符串S1，然后你需要定义一种大写的ABCDE到小写的abcde对应关系，使得失配数最小。</p>
<p>假设只有两种字符，那么1个卷积就行了。5个字符，最莽的做法是120个卷积，那得超时，预处理一下就是25个卷积。卷积当然要FFT啦。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> lf;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">65535</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> lf PI = <span class="hljs-built_in">acos</span>(<span class="hljs-number">-1</span>);</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rader</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	Rader(<span class="hljs-keyword">int</span> n) : <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-keyword">int</span>(<span class="hljs-built_in">ceil</span>(log2(n))))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = at(<span class="hljs-number">0</span>) = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (at(i) = at(i &gt;&gt; <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>, i &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				at(i) += size() &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FFT</span> :</span> Rader</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; w;</span><br><span class="line">	FFT(<span class="hljs-keyword">int</span> n) : Rader(n), w(size(), polar(<span class="hljs-number">1.0</span>, <span class="hljs-number">2</span> * PI / size()))</span><br><span class="line">	&#123;</span><br><span class="line">		w[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); ++i)</span><br><span class="line">			w[i] *= w[i - <span class="hljs-number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; fft(<span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; &amp;a)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; x(size());</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; a.size(); ++i)</span><br><span class="line">			x[at(i)] = a[i];</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); i &lt;&lt;= <span class="hljs-number">1</span>)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; i; ++j)</span><br><span class="line">				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = j; k &lt; size(); k += i &lt;&lt; <span class="hljs-number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="hljs-keyword">complex</span>&lt;lf&gt; &amp;l = x[k], &amp;r = x[k + i], t = w[size() / (i &lt;&lt; <span class="hljs-number">1</span>) * j] * r;</span><br><span class="line">					r = l - t, l += t;</span><br><span class="line">				&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; mul(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; xa, <span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt; &amp;xb)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			xa[i] *= xb[i];</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;ll&gt; ans(size());</span><br><span class="line">		xa = fft(xa), ans[<span class="hljs-number">0</span>] = xa[<span class="hljs-number">0</span>].real() / size() + <span class="hljs-number">0.5</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; size(); ++i)</span><br><span class="line">			ans[i] = xa[size() - i].real() / size() + <span class="hljs-number">0.5</span>;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">char</span> a[N], b[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s%s"</span>, a, b);</span><br><span class="line">	<span class="hljs-keyword">int</span> n = <span class="hljs-built_in">strlen</span>(a), ans = <span class="hljs-number">0</span>, p[<span class="hljs-number">5</span>];</span><br><span class="line">	<span class="hljs-function">FFT <span class="hljs-title">f</span><span class="hljs-params">(n * <span class="hljs-number">2</span>)</span></span>;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; sum[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>];</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;&gt; xa(<span class="hljs-number">5</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;(n * <span class="hljs-number">2</span>)), xb(<span class="hljs-number">5</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">complex</span>&lt;lf&gt;&gt;(n * <span class="hljs-number">2</span>));</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">'A'</span> + i)</span><br><span class="line">				xa[i][j] = xa[i][j + n] = <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (b[j] == <span class="hljs-string">'a'</span> + i)</span><br><span class="line">				xb[i][n - j - <span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		xa[i] = f.fft(xa[i]), xb[i] = f.fft(xb[i]), p[i] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; ++j)</span><br><span class="line">			sum[i][j] = f.mul(xa[i], xb[j]);</span><br><span class="line">	<span class="hljs-keyword">do</span></span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>, tmp; j &lt; n * <span class="hljs-number">2</span>; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = tmp = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; ++i)</span><br><span class="line">				tmp += sum[i][p[i]][j];</span><br><span class="line">			ans = max(ans, tmp);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="hljs-keyword">while</span> (next_permutation(p, p + <span class="hljs-number">5</span>));</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, n - ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Cryptographic-Argument"><a href="#Cryptographic-Argument" class="headerlink" title="Cryptographic Argument"></a><a href="https://vjudge.net/problem/Gym-100960E" target="_blank" rel="noopener">Cryptographic Argument</a></h1><p>折纸的过程就是蝴蝶变换。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> ll M = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Rader</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	Rader(<span class="hljs-keyword">int</span> n) : <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-keyword">int</span>(<span class="hljs-built_in">ceil</span>(log2(n))))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = at(<span class="hljs-number">0</span>) = <span class="hljs-number">0</span>; i &lt; size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (at(i) = at(i &gt;&gt; <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>, i &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				at(i) += size() &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; rev0(<span class="hljs-number">1</span>), rev1(<span class="hljs-number">1</span>);</span><br><span class="line">ll h, k, m, l, r, a, b, c;</span><br><span class="line"><span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(ll u)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	ll p = u &gt;&gt; (k &gt;&gt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>, q = p &lt;&lt; (k &gt;&gt; <span class="hljs-number">1</span>) ^ u &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	p = rev1[p], q = rev0[q];</span><br><span class="line">	<span class="hljs-keyword">if</span> (u &amp; <span class="hljs-number">1</span>)</span><br><span class="line">		p ^= rev1.size() - <span class="hljs-number">1</span>, q ^= rev0.size() - <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">return</span> (q * rev1.size() | p) &lt;&lt; <span class="hljs-number">1</span> | u &amp; <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld%lld%lld%lld%lld%lld"</span>, &amp;k, &amp;m, &amp;l, &amp;r, &amp;a, &amp;b, &amp;c);</span><br><span class="line">	rev0 = Rader(<span class="hljs-number">1</span> &lt;&lt; (k &gt;&gt; <span class="hljs-number">1</span>)), rev1 = Rader(<span class="hljs-number">1</span> &lt;&lt; k - (k &gt;&gt; <span class="hljs-number">1</span>) - <span class="hljs-number">1</span>);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">0</span>, n = <span class="hljs-number">1L</span>L &lt;&lt; k; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (l &amp; <span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (r &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				h ^= (r - l &gt;&gt; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) + ask(l);</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				h ^= (r - l - <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) + ask(l) + ask(r);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (r &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				h ^= (r - l + <span class="hljs-number">1</span> &gt;&gt; <span class="hljs-number">1</span> &amp; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				h ^= (r - l &gt;&gt; <span class="hljs-number">1</span> &amp; <span class="hljs-number">1</span>) * (n - <span class="hljs-number">1</span>) ^ ask(r);</span><br><span class="line">		&#125;</span><br><span class="line">		h = ((l ^ r ^ h) + c) % M;</span><br><span class="line">		l = (l ^ a ^ h) % (n + <span class="hljs-number">1</span>) % n;</span><br><span class="line">		r = (r ^ b ^ h) % (n - l) + l;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, h);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="The-Jedi-Killer"><a href="#The-Jedi-Killer" class="headerlink" title="The Jedi Killer"></a><a href="https://vjudge.net/problem/Gym-100960F" target="_blank" rel="noopener">The Jedi Killer</a></h1><p>28、29行的<code>EPS</code>不能用<code>sgn</code>去掉，暂时不知道为啥…改了之后WA4（猜测是浮点数做减法的时候的对齐操作丢了精度）。</p>
<p>启示是浮点数比较大小的时候不能作差判<code>sgn</code>…</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> X real()</span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Y imag()</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> lf;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">complex</span>&lt;lf&gt; Coord;</span><br><span class="line"><span class="hljs-keyword">const</span> lf EPS = <span class="hljs-number">1e-9</span>;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sgn</span><span class="hljs-params">(lf d)</span> </span>&#123; <span class="hljs-keyword">return</span> (d &gt; EPS) - (d &lt; -EPS); &#125;</span><br><span class="line"><span class="hljs-function">lf <span class="hljs-title">Cross</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Coord &amp;A, <span class="hljs-keyword">const</span> Coord &amp;B)</span> </span>&#123; <span class="hljs-keyword">return</span> A.X * B.Y - B.X * A.Y; &#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> t, lm, lg, ans;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;t); t--; <span class="hljs-built_in">printf</span>(ans ? <span class="hljs-string">"YES\n"</span> : <span class="hljs-string">"NO\n"</span>))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;lm, &amp;lg);</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;Coord&gt; p;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, x, y; i &lt; <span class="hljs-number">3</span>; ++i)</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;x, &amp;y), p.emplace_back(x, y);</span><br><span class="line">		<span class="hljs-keyword">if</span> (!sgn(Cross(p[<span class="hljs-number">0</span>] - p[<span class="hljs-number">1</span>], p[<span class="hljs-number">1</span>] - p[<span class="hljs-number">2</span>])))</span><br><span class="line">			ans = sgn(max(max(<span class="hljs-built_in">abs</span>(p[<span class="hljs-number">0</span>] - p[<span class="hljs-number">1</span>]), <span class="hljs-built_in">abs</span>(p[<span class="hljs-number">1</span>] - p[<span class="hljs-number">2</span>])), <span class="hljs-built_in">abs</span>(p[<span class="hljs-number">2</span>] - p[<span class="hljs-number">0</span>])) - max(lm, lg * <span class="hljs-number">2</span>)) &lt;= <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = ans = <span class="hljs-number">0</span>; !ans &amp;&amp; i &lt; <span class="hljs-number">3</span>; ++i)</span><br><span class="line">			&#123;</span><br><span class="line">				lf d0 = <span class="hljs-built_in">abs</span>(p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]),</span><br><span class="line">				   h = <span class="hljs-built_in">fabs</span>(Cross(p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>] - p[i], p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>] - p[i]) / d0),</span><br><span class="line">				   d1 = <span class="hljs-built_in">sqrt</span>(norm(p[i] - p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>]) - h * h),</span><br><span class="line">				   d2 = <span class="hljs-built_in">sqrt</span>(norm(p[i] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]) - h * h);</span><br><span class="line">				ans = sgn(h - lm) &lt;= <span class="hljs-number">0</span> &amp;&amp; max(d1, d2) &lt;= lg + EPS ||</span><br><span class="line">					  sgn(h - lg) &lt;= <span class="hljs-number">0</span> &amp;&amp; max(d1, d2) &lt;= lm + EPS &amp;&amp;</span><br><span class="line">						  sgn(h * h + d0 * d0 - max(norm(p[i] - p[(i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span>]), norm(p[i] - p[(i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span>]))) &lt;= <span class="hljs-number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Youngling-Tournament"><a href="#Youngling-Tournament" class="headerlink" title="Youngling Tournament"></a><a href="https://vjudge.net/problem/Gym-100960G" target="_blank" rel="noopener">Youngling Tournament</a></h1><p>给你n个数，然后从大到小排序，如果这个数不小于他后面的数的和，那么这个数就是胜利者。</p>
<p>单点修改，问你每次胜利者有多少个。</p>
<p>树状数组+<code>multiset</code>瞎几把做即可。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">	BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n, <span class="hljs-number">0</span>) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">			v[x] += w;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			ans += v[x];</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125; rk;</span><br><span class="line">ll n, m, a[N], b[N], c[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;a[i]), rk.push_back(a[i]);</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld"</span>, &amp;b[i], &amp;c[i]), rk.push_back(c[i]);</span><br><span class="line">	rk.init();</span><br><span class="line">	<span class="hljs-built_in">multiset</span>&lt;ll&gt; s;</span><br><span class="line">	<span class="hljs-function">BaseFenwick <span class="hljs-title">t</span><span class="hljs-params">(rk.size() + <span class="hljs-number">1</span>)</span></span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		s.insert(a[i]), t.add(rk.ask(a[i]) + <span class="hljs-number">1</span>, a[i]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">int</span> res = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-built_in">multiset</span>&lt;ll&gt;::iterator p = s.begin(), q = p++;</span><br><span class="line">		<span class="hljs-keyword">if</span> (*p == *q)</span><br><span class="line">			++res;</span><br><span class="line">		<span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			p = s.lower_bound(t.ask(rk.ask(*q) + <span class="hljs-number">1</span>));</span><br><span class="line">			<span class="hljs-keyword">if</span> (p == s.begin())</span><br><span class="line">				++p;</span><br><span class="line">			<span class="hljs-keyword">if</span> (p == s.end())</span><br><span class="line">				<span class="hljs-keyword">break</span>;</span><br><span class="line">			q = p--;</span><br><span class="line">			<span class="hljs-keyword">if</span> (*q &gt;= t.ask(rk.ask(*p) + <span class="hljs-number">1</span>))</span><br><span class="line">				++res;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, res);</span><br><span class="line">		<span class="hljs-keyword">if</span> (i == m)</span><br><span class="line">			<span class="hljs-keyword">break</span>;</span><br><span class="line">		s.erase(s.find(a[b[i]]));</span><br><span class="line">		t.add(rk.ask(a[b[i]]) + <span class="hljs-number">1</span>, -a[b[i]]);</span><br><span class="line">		s.insert(a[b[i]] = c[i]);</span><br><span class="line">		t.add(rk.ask(a[b[i]]) + <span class="hljs-number">1</span>, a[b[i]]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Garland-Checking"><a href="#Garland-Checking" class="headerlink" title="Garland Checking"></a><a href="https://vjudge.net/problem/Gym-100960H" target="_blank" rel="noopener">Garland Checking</a></h1><p>不做路径压缩的并查集，增加一个splay操作，用于把某个点旋转到并查集的顶点。</p>
<p>正解是LCT…待学习。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">UnionFindSet</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; fa;</span><br><span class="line">	UnionFindSet(<span class="hljs-keyword">int</span> n) : fa(n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">			fa[i] = i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">splay</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> f)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (fa[u] != u)</span><br><span class="line">			splay(fa[u], u);</span><br><span class="line">		fa[u] = f;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u)</span> </span>&#123; <span class="hljs-keyword">return</span> fa[u] != u ? ask(fa[u]) : u; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-keyword">char</span> s[<span class="hljs-number">9</span>];</span><br><span class="line"><span class="hljs-keyword">int</span> n, a, b;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (UnionFindSet ufs(n + <span class="hljs-number">1</span>); ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s) &amp;&amp; s[<span class="hljs-number">0</span>] != <span class="hljs-string">'E'</span>;)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;a, &amp;b), ufs.splay(a, a), ufs.splay(b, b);</span><br><span class="line">		<span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == <span class="hljs-string">'T'</span>)</span><br><span class="line">			<span class="hljs-built_in">printf</span>(ufs.ask(a) == b ? <span class="hljs-string">"YES\n"</span> : <span class="hljs-string">"NO\n"</span>), fflush(<span class="hljs-built_in">stdout</span>);</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			ufs.fa[a] = s[<span class="hljs-number">0</span>] == <span class="hljs-string">'D'</span> ? a : b;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-28T11:00:00.000Z">2019-02-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 分钟 读完 (大约 1408 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/28/2019-02-28-HYSBZ-3110/">K大数查询</a>
            
        </h1>
        <div class="content">
            <p><a href="https://vjudge.net/problem/HYSBZ-3110" target="_blank" rel="noopener">题目链接</a></p>
<p>看到巨佬们在群里膜CDQ，于是来学习CDQ分治…</p>
<p>要避免树状数组重复初始化，每次操作完之后要将树状数组恢复。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">5e4</span> + <span class="hljs-number">9</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Fenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BaseFenwick</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">		BaseFenwick(<span class="hljs-keyword">int</span> n) : v(n) &#123;&#125;</span><br><span class="line">		<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span></span></span><br><span class="line"><span class="hljs-function">		</span>&#123;</span><br><span class="line">			<span class="hljs-keyword">for</span> (; x &lt; v.size(); x += x &amp; -x)</span><br><span class="line">				v[x] += w;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">		</span>&#123;</span><br><span class="line">			ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">			<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">				ans += v[x];</span><br><span class="line">			<span class="hljs-keyword">return</span> ans;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	pair&lt;BaseFenwick, BaseFenwick&gt; p;</span><br><span class="line">	Fenwick(<span class="hljs-keyword">int</span> n) : p(n, n) &#123;&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll w)</span> </span>&#123; p.first.add(x, w), p.second.add(x, x * w); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, ll w)</span> </span>&#123; add(l, w), add(r + <span class="hljs-number">1</span>, -w); &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123; <span class="hljs-keyword">return</span> (x + <span class="hljs-number">1</span>) * p.first.ask(x) - p.second.ask(x); &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r)</span> </span>&#123; <span class="hljs-keyword">return</span> ask(r) - ask(l - <span class="hljs-number">1</span>); &#125;</span><br><span class="line">&#125; t(N);</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Query</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">int</span> o, a, b, ans;</span><br><span class="line">	ll c;</span><br><span class="line">&#125; q[N];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; &amp;id)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> (l == r)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; id.size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (q[id[i]].o != <span class="hljs-number">1</span>)</span><br><span class="line">				q[id[i]].ans = l;</span><br><span class="line">		<span class="hljs-keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ll m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; t1, t2;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; id.size(); ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (q[id[i]].o == <span class="hljs-number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (q[id[i]].c &lt;= m)</span><br><span class="line">				t1.push_back(id[i]);</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				t2.push_back(id[i]), t.add(q[id[i]].a, q[id[i]].b, <span class="hljs-number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			ll sum = t.ask(q[id[i]].a, q[id[i]].b);</span><br><span class="line">			<span class="hljs-keyword">if</span> (q[id[i]].c &gt; sum)</span><br><span class="line">				t1.push_back(id[i]), q[id[i]].c -= sum;</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				t2.push_back(id[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; t2.size(); ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span> (q[t2[i]].o == <span class="hljs-number">1</span>)</span><br><span class="line">			t.add(q[t2[i]].a, q[t2[i]].b, <span class="hljs-number">-1</span>);</span><br><span class="line">	ask(l, m, t1), ask(m + <span class="hljs-number">1</span>, r, t2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> n, m;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; id;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		id.push_back(i);</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d%lld"</span>, &amp;q[i].o, &amp;q[i].a, &amp;q[i].b, &amp;q[i].c);</span><br><span class="line">	&#125;</span><br><span class="line">	ask(<span class="hljs-number">1</span>, n, id);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span> (q[i].o != <span class="hljs-number">1</span>)</span><br><span class="line">			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, q[i].ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>动态开点线段树自然也是行的，不过慢了六七倍（2400ms:15744ms）…</p>

undefined


<p>在线的做法是树套树。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">5e4</span> + <span class="hljs-number">9</span>, M = <span class="hljs-number">2e7</span> + <span class="hljs-number">9</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125; rk;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Query</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">int</span> o, a, b, c;</span><br><span class="line">&#125; q[N];</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">int</span> lc, rc, add;</span><br><span class="line">	ll sum;</span><br><span class="line">&#125; t[M];</span><br><span class="line"><span class="hljs-keyword">int</span> n, m, tot, root[N &lt;&lt; <span class="hljs-number">2</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> v, <span class="hljs-keyword">int</span> &amp;rt, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, ll add)</span></span>;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">down</span><span class="hljs-params">(<span class="hljs-keyword">int</span> rt, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> (!t[rt].add)</span><br><span class="line">		<span class="hljs-keyword">return</span>;</span><br><span class="line">	<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	upd(l, m, t[rt].lc, l, m, t[rt].add);</span><br><span class="line">	upd(m + <span class="hljs-number">1</span>, r, t[rt].rc, m + <span class="hljs-number">1</span>, r, t[rt].add);</span><br><span class="line">	t[rt].add = <span class="hljs-number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> v, <span class="hljs-keyword">int</span> &amp;rt, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, ll add)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> (!rt)</span><br><span class="line">		rt = ++tot;</span><br><span class="line">	<span class="hljs-keyword">if</span> (u == l &amp;&amp; v == r)</span><br><span class="line">	&#123;</span><br><span class="line">		t[rt].add += add, t[rt].sum += (r - l + <span class="hljs-number">1</span>) * add;</span><br><span class="line">		<span class="hljs-keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	down(rt, l, r);</span><br><span class="line">	<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">if</span> (v &lt;= m)</span><br><span class="line">		upd(u, v, t[rt].lc, l, m, add);</span><br><span class="line">	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (u &gt; m)</span><br><span class="line">		upd(u, v, t[rt].rc, m + <span class="hljs-number">1</span>, r, add);</span><br><span class="line">	<span class="hljs-keyword">else</span></span><br><span class="line">		upd(u, m, t[rt].lc, l, m, add), upd(m + <span class="hljs-number">1</span>, v, t[rt].rc, m + <span class="hljs-number">1</span>, r, add);</span><br><span class="line">	t[rt].sum = t[t[rt].lc].sum + t[t[rt].rc].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u, <span class="hljs-keyword">int</span> v, <span class="hljs-keyword">int</span> rt, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">if</span> (!rt)</span><br><span class="line">		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-keyword">if</span> (u == l &amp;&amp; v == r)</span><br><span class="line">		<span class="hljs-keyword">return</span> t[rt].sum;</span><br><span class="line">	down(rt, l, r);</span><br><span class="line">	<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">if</span> (v &lt;= m)</span><br><span class="line">		<span class="hljs-keyword">return</span> ask(u, v, t[rt].lc, l, m);</span><br><span class="line">	<span class="hljs-keyword">if</span> (u &gt; m)</span><br><span class="line">		<span class="hljs-keyword">return</span> ask(u, v, t[rt].rc, m + <span class="hljs-number">1</span>, r);</span><br><span class="line">	<span class="hljs-keyword">return</span> ask(u, m, t[rt].lc, l, m) + ask(m + <span class="hljs-number">1</span>, v, t[rt].rc, m + <span class="hljs-number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d%d"</span>, &amp;q[i].o, &amp;q[i].a, &amp;q[i].b, &amp;q[i].c);</span><br><span class="line">		<span class="hljs-keyword">if</span> (q[i].o == <span class="hljs-number">1</span>)</span><br><span class="line">			rk.push_back(q[i].c);</span><br><span class="line">	&#125;</span><br><span class="line">	rk.init();</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (q[i].o == <span class="hljs-number">1</span>)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> c = rk.size() - rk.ask(q[i].c), k = <span class="hljs-number">1</span>, l = <span class="hljs-number">1</span>, r = rk.size();;)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">				upd(q[i].a, q[i].b, root[k], <span class="hljs-number">1</span>, n, <span class="hljs-number">1</span>);</span><br><span class="line">				<span class="hljs-keyword">if</span> (l == r)</span><br><span class="line">					<span class="hljs-keyword">break</span>;</span><br><span class="line">				<span class="hljs-keyword">if</span> (c &lt;= m)</span><br><span class="line">					r = m, k &lt;&lt;= <span class="hljs-number">1</span>;</span><br><span class="line">				<span class="hljs-keyword">else</span></span><br><span class="line">					l = m + <span class="hljs-number">1</span>, k = k &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>, l = <span class="hljs-number">1</span>, r = rk.size();</span><br><span class="line">			<span class="hljs-keyword">while</span> (l &lt; r)</span><br><span class="line">			&#123;</span><br><span class="line">				ll m = l + r &gt;&gt; <span class="hljs-number">1</span>, sum = ask(q[i].a, q[i].b, root[k &lt;&lt; <span class="hljs-number">1</span>], <span class="hljs-number">1</span>, n);</span><br><span class="line">				<span class="hljs-keyword">if</span> (sum &gt;= q[i].c)</span><br><span class="line">					r = m, k &lt;&lt;= <span class="hljs-number">1</span>;</span><br><span class="line">				<span class="hljs-keyword">else</span></span><br><span class="line">					l = m + <span class="hljs-number">1</span>,</span><br><span class="line">					k = k &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, q[i].c -= sum;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, rk[rk.size() - l]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-28T02:00:00.000Z">2019-02-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 493 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/28/2019-02-28-UVALive-3510/">Pixel Shuffle</a>
            
        </h1>
        <div class="content">
            <p><a href="https://vjudge.net/problem/UVALive-3510" target="_blank" rel="noopener">题目链接</a></p>
<p>题意：对一张像素图可以执行旋转、翻转、div、mix等操作，现在给出一个操作序列，问重复进行多少次这个操作序列，可以使得任意n*n的像素图变回原样。</p>
<p>转换一下就是：设操作序列为置换$A$，则求m使得$A^m$为全等置换（所有元素都映射到自己）</p>
<p>对于每个长度为$L$的循环$B$，当$m$为$B$的整数倍时，$B^m$为全等置换，所以只需要把操作序列对应的置换拆解成多个循环，求所有循环长度的LCM即可，然后题目就变成了模拟。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ID(x, y) ((x)*n + (y))</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Permutation</span> :</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">	Permutation(<span class="hljs-keyword">int</span> n = <span class="hljs-number">0</span>) : <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(n) &#123;&#125;</span><br><span class="line">	<span class="hljs-keyword">friend</span> Permutation <span class="hljs-keyword">operator</span>*(<span class="hljs-keyword">const</span> Permutation &amp;f, <span class="hljs-keyword">const</span> Permutation &amp;g)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-function">Permutation <span class="hljs-title">ans</span><span class="hljs-params">(f.size())</span></span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; f.size(); ++i)</span><br><span class="line">			ans[i] = g[f[i]];</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">friend</span> Permutation <span class="hljs-title">inv</span><span class="hljs-params">(<span class="hljs-keyword">const</span> Permutation &amp;f)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-function">Permutation <span class="hljs-title">ans</span><span class="hljs-params">(f.size())</span></span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; f.size(); ++i)</span><br><span class="line">			ans[f[i]] = i;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">friend</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; cycle(<span class="hljs-keyword">const</span> Permutation &amp;f)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; vis(f.size(), <span class="hljs-number">0</span>);</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; ans;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; f.size(); ++i)</span><br><span class="line">			<span class="hljs-keyword">if</span> (!vis[i])</span><br><span class="line">			&#123;</span><br><span class="line">				ans.push_back(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;());</span><br><span class="line">				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i; !vis[j]; j = f[j])</span><br><span class="line">					vis[j] = <span class="hljs-number">1</span>, ans.back().push_back(j);</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> t, n;</span><br><span class="line">	<span class="hljs-keyword">char</span> s[<span class="hljs-number">255</span>] = <span class="hljs-string">" "</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;t); t--;)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n), gets(s + <span class="hljs-number">1</span>), gets(s + <span class="hljs-number">1</span>);</span><br><span class="line">		Permutation f(n * n), g(n * n);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">				f[ID(i, j)] = ID(i, j);</span><br><span class="line">		<span class="hljs-keyword">int</span> b = <span class="hljs-built_in">strlen</span>(s);</span><br><span class="line">		<span class="hljs-keyword">for</span> (s[b] = <span class="hljs-string">' '</span>; b; --b)</span><br><span class="line">			<span class="hljs-keyword">if</span> (s[b] == <span class="hljs-string">' '</span> &amp;&amp; s[b - <span class="hljs-number">1</span>] != <span class="hljs-string">' '</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="hljs-keyword">int</span> flag = s[b--] = <span class="hljs-number">0</span>;</span><br><span class="line">				<span class="hljs-keyword">if</span> (s[b] == <span class="hljs-string">'-'</span>)</span><br><span class="line">					flag = <span class="hljs-number">1</span>, s[b--] = <span class="hljs-number">0</span>;</span><br><span class="line">				<span class="hljs-keyword">while</span> (s[b - <span class="hljs-number">1</span>] != <span class="hljs-string">' '</span>)</span><br><span class="line">					--b;</span><br><span class="line">				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">					<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">						g[ID(i, j)] =</span><br><span class="line">							s[b] == <span class="hljs-string">'r'</span> ? ID(n - j - <span class="hljs-number">1</span>, i) :</span><br><span class="line">							s[b] == <span class="hljs-string">'s'</span> ? ID(i, n - j - <span class="hljs-number">1</span>) :</span><br><span class="line">							s[b + <span class="hljs-number">1</span>] == <span class="hljs-string">'h'</span> ? ID(i, i * <span class="hljs-number">2</span> &lt; n ? j : n - j - <span class="hljs-number">1</span>) :</span><br><span class="line">							s[b + <span class="hljs-number">1</span>] == <span class="hljs-string">'v'</span> ? ID(i * <span class="hljs-number">2</span> &lt; n ? i : n + n / <span class="hljs-number">2</span> - i - <span class="hljs-number">1</span>, j) :</span><br><span class="line">							s[b] == <span class="hljs-string">'d'</span> ? ID(i % <span class="hljs-number">2</span> ? i / <span class="hljs-number">2</span> + n / <span class="hljs-number">2</span> : i / <span class="hljs-number">2</span>, j) :</span><br><span class="line">							s[b] == <span class="hljs-string">'m'</span> ? ID(i / <span class="hljs-number">2</span> * <span class="hljs-number">2</span> + j / (n / <span class="hljs-number">2</span>), j % (n / <span class="hljs-number">2</span>) * <span class="hljs-number">2</span> + i % <span class="hljs-number">2</span>) :</span><br><span class="line">							ID(i, j);</span><br><span class="line">				f = flag ? f * inv(g) : f * g;</span><br><span class="line">			&#125;</span><br><span class="line">		n = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; c = cycle(f);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; c.size(); ++i)</span><br><span class="line">			n *= c[i].size() / __gcd((<span class="hljs-keyword">int</span>)c[i].size(), n);</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, n);</span><br><span class="line">		<span class="hljs-keyword">if</span> (t)</span><br><span class="line">			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-25T16:46:49.000Z">2019-02-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    12 分钟 读完 (大约 1828 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/26/2019-02-26-矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）/">矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）</a>
            
        </h1>
        <div class="content">
            <p>跟着<a href="https://blog.csdn.net/lwt36/article/details/48908031" target="_blank" rel="noopener">这篇博客</a>复习扫描线+线段树…</p>
<h1 id="Atlantis"><a href="#Atlantis" class="headerlink" title="Atlantis"></a>Atlantis</h1><p><a href="https://vjudge.net/problem/HDU-1542" target="_blank" rel="noopener">题目链接</a></p>
<p>求矩形并，即平面上至少被一个矩形覆盖的面积。</p>
<blockquote>
<p>离散化: 这些技巧都是老生常谈的了，不然浮点数怎么建树，离散化x坐标就可以了。</p>
<p>扫描线: 首先把矩形按y轴分成两条边，上边和下边，对x轴建树，扫描线可以看成一根平行于x轴的直线。从y=0开始往上扫，下边表示要计算面积+1，上边表示已经扫过了−1，直到扫到最后一条平行于xx轴的边但是真正在做的时候，不需要完全模拟这个过程，一条一条边地插入线段树就好了。</p>
<p>线段树: 用于动态维护扫描线在往上走时，x轴哪些区域是有合法面积的。这种线段树是不用懒标记的，因为没有查询操作</p>
</blockquote>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AreaUnion</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Seg</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		ll l, r, h;</span><br><span class="line">		<span class="hljs-keyword">int</span> f;</span><br><span class="line">		<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Seg &amp;rhs) <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> h &lt; rhs.h; &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		<span class="hljs-keyword">int</span> cnt;</span><br><span class="line">		ll sum;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Seg&gt; s;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Node&gt; v;</span><br><span class="line">	Ranker rk;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(ll l, ll b, ll r, ll t)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.push_back(l);</span><br><span class="line">		rk.push_back(r);</span><br><span class="line">		s.push_back(&#123;l, r, b, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">		s.push_back(&#123;l, r, t, <span class="hljs-number">-1</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ql, <span class="hljs-keyword">int</span> qr, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> rt = <span class="hljs-number">1</span>)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">			v[rt].cnt += c;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (ql &lt;= m)</span><br><span class="line">				upd(ql, qr, c, l, m, rt &lt;&lt; <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">if</span> (qr &gt; m)</span><br><span class="line">				upd(ql, qr, c, m + <span class="hljs-number">1</span>, r, rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		v[rt].sum = v[rt].cnt ? rk[r + <span class="hljs-number">1</span>] - rk[l] : l &lt; r ? v[rt &lt;&lt; <span class="hljs-number">1</span>].sum + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum : <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.init();</span><br><span class="line">		sort(s.begin(), s.end());</span><br><span class="line">		v.assign(rk.size() * <span class="hljs-number">4</span>, Node());</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i + <span class="hljs-number">1</span> &lt; s.size(); ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			upd(rk.ask(s[i].l), rk.ask(s[i].r) - <span class="hljs-number">1</span>, s[i].f, <span class="hljs-number">0</span>, rk.size() - <span class="hljs-number">1</span>);</span><br><span class="line">			ans += v[<span class="hljs-number">1</span>].sum * (s[i + <span class="hljs-number">1</span>].h - s[i].h);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> kase = <span class="hljs-number">0</span>, n; ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n) &amp;&amp; n;)</span><br><span class="line">	&#123;</span><br><span class="line">		AreaUnion a;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			ll l, b, r, t;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lf%lf%lf%lf"</span>, &amp;l, &amp;b, &amp;r, &amp;t);</span><br><span class="line">			a.add(l, b, r, t);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Test case #%d\nTotal explored area: %.2lf\n\n"</span>, ++kase, a.ask());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="覆盖的面积"><a href="#覆盖的面积" class="headerlink" title="覆盖的面积"></a>覆盖的面积</h1><p><a href="https://vjudge.net/problem/HDU-1255" target="_blank" rel="noopener">题目链接</a></p>
<p>求矩形交，即平面上至少被覆盖两次的面积。线段树上维护被覆盖一次的长度和被覆盖两次的长度。</p>
<blockquote>
<p>前面的与矩形面积并类似，不同的是要考虑至少覆盖一次one和至少覆盖两次two的更新。</p>
<p>尤其是当前被覆盖了一次的时候，由于没有down操作，父亲节点的信息是没有同步到儿子节点的，这样的话up就要考虑了。</p>
<p>父亲被记录覆盖了一次，但是如果儿子被覆盖过，这些操作都是在这个父亲这个大区间上的，就相当于父亲区间被覆盖了至少两次，所以two和one都要更新。</p>
</blockquote>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">double</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AreaIntersection</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Seg</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		ll l, r, h;</span><br><span class="line">		<span class="hljs-keyword">int</span> f;</span><br><span class="line">		<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Seg &amp;rhs) <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> h &lt; rhs.h; &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		<span class="hljs-keyword">int</span> cnt;</span><br><span class="line">		ll one, two;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Seg&gt; s;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Node&gt; v;</span><br><span class="line">	Ranker rk;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(ll l, ll b, ll r, ll t)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.push_back(l);</span><br><span class="line">		rk.push_back(r);</span><br><span class="line">		s.push_back(&#123;l, r, b, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">		s.push_back(&#123;l, r, t, <span class="hljs-number">-1</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ql, <span class="hljs-keyword">int</span> qr, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> rt = <span class="hljs-number">1</span>)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">			v[rt].cnt += c;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (ql &lt;= m)</span><br><span class="line">				upd(ql, qr, c, l, m, rt &lt;&lt; <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">if</span> (qr &gt; m)</span><br><span class="line">				upd(ql, qr, c, m + <span class="hljs-number">1</span>, r, rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (v[rt].cnt == <span class="hljs-number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			v[rt].one = l != r ? v[rt &lt;&lt; <span class="hljs-number">1</span>].one + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].one : <span class="hljs-number">0</span>;</span><br><span class="line">			v[rt].two = l != r ? v[rt &lt;&lt; <span class="hljs-number">1</span>].two + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].two : <span class="hljs-number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			v[rt].one = rk[r + <span class="hljs-number">1</span>] - rk[l];</span><br><span class="line">			<span class="hljs-keyword">if</span> (v[rt].cnt &gt; <span class="hljs-number">1</span>)</span><br><span class="line">				v[rt].two = rk[r + <span class="hljs-number">1</span>] - rk[l];</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				v[rt].two = l != r ? v[rt &lt;&lt; <span class="hljs-number">1</span>].one + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].one : <span class="hljs-number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.init();</span><br><span class="line">		sort(s.begin(), s.end());</span><br><span class="line">		v.assign(rk.size() * <span class="hljs-number">4</span>, Node());</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i + <span class="hljs-number">1</span> &lt; s.size(); ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			upd(rk.ask(s[i].l), rk.ask(s[i].r) - <span class="hljs-number">1</span>, s[i].f, <span class="hljs-number">0</span>, rk.size() - <span class="hljs-number">1</span>);</span><br><span class="line">			ans += v[<span class="hljs-number">1</span>].two * (s[i + <span class="hljs-number">1</span>].h - s[i].h);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">int</span> t, n;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;t); t--;)</span><br><span class="line">	&#123;</span><br><span class="line">		AreaIntersection a;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">		<span class="hljs-keyword">for</span> (ll l, b, r, t; n--;)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lf%lf%lf%lf"</span>, &amp;l, &amp;b, &amp;r, &amp;t);</span><br><span class="line">			a.add(l, b, r, t);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%.2lf\n"</span>, a.ask());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Picture"><a href="#Picture" class="headerlink" title="Picture"></a>Picture</h1><p><a href="https://vjudge.net/problem/HDU-1828" target="_blank" rel="noopener">题目链接</a></p>
<p>求矩形周长并。</p>
<h2 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h2><blockquote>
<p>可以用类似矩形面积并的办法，不过这次我们，不算面积罢了。</p>
<p>需要注意的是，由于周长的线会被重复覆盖，每次需要和上一次的作差。</p>
<p>但是这样仅仅是x轴的，不过可以再对y轴做一次加起来就可以了。</p>
</blockquote>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">HalfPerimeter</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Seg</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		ll l, r, h;</span><br><span class="line">		<span class="hljs-keyword">int</span> f;</span><br><span class="line">		<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Seg &amp;rhs) <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> h != rhs.h ? h &lt; rhs.h : f &gt; rhs.f; &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		<span class="hljs-keyword">int</span> cnt;</span><br><span class="line">		ll sum;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Seg&gt; s;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Node&gt; v;</span><br><span class="line">	Ranker rk;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">add</span><span class="hljs-params">(ll l, ll b, ll r, ll t)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.push_back(l);</span><br><span class="line">		rk.push_back(r);</span><br><span class="line">		s.push_back(&#123;l, r, b, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">		s.push_back(&#123;l, r, t, <span class="hljs-number">-1</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> L, <span class="hljs-keyword">int</span> R, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> rt = <span class="hljs-number">1</span>)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (L &lt;= l &amp;&amp; r &lt;= R)</span><br><span class="line">			v[rt].cnt += c;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (L &lt;= m)</span><br><span class="line">				upd(L, R, c, l, m, rt &lt;&lt; <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">if</span> (R &gt; m)</span><br><span class="line">				upd(L, R, c, m + <span class="hljs-number">1</span>, r, rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		v[rt].sum = v[rt].cnt ? rk[r + <span class="hljs-number">1</span>] - rk[l] : l != r ? v[rt &lt;&lt; <span class="hljs-number">1</span>].sum + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum : <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.init();</span><br><span class="line">		sort(s.begin(), s.end());</span><br><span class="line">		v.assign(rk.size() &lt;&lt; <span class="hljs-number">2</span>, Node());</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; s.size(); ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			ll last = v[<span class="hljs-number">1</span>].sum;</span><br><span class="line">			upd(rk.ask(s[i].l), rk.ask(s[i].r) - <span class="hljs-number">1</span>, s[i].f, <span class="hljs-number">0</span>, rk.size() - <span class="hljs-number">1</span>);</span><br><span class="line">			ans += <span class="hljs-built_in">abs</span>(v[<span class="hljs-number">1</span>].sum - last);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> n; ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);)</span><br><span class="line">	&#123;</span><br><span class="line">		HalfPerimeter x, y;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, l, b, r, t; i &lt; n; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d%d"</span>, &amp;l, &amp;b, &amp;r, &amp;t);</span><br><span class="line">			x.add(l, b, r, t);</span><br><span class="line">			y.add(b, l, t, r);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, x.ask() + y.ask());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h2><blockquote>
<p>也可以只对x轴做一次扫描线，只要同时维护y轴竖线（就是求矩形面积并的时候的高）的个数vtl。</p>
<p>需要的注意的是竖线重合的情况，需要再开变量lbd、rbd来判断重合，避免重复计算。</p>
</blockquote>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Ranker</span> :</span> <span class="hljs-built_in">vector</span>&lt;ll&gt;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>&#123; sort(begin(), end()), resize(unique(begin(), end()) - begin()); &#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(ll x)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> lower_bound(begin(), end(), x) - begin(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Perimeter</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Seg</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		ll l, r, h;</span><br><span class="line">		<span class="hljs-keyword">int</span> f;</span><br><span class="line">		<span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Seg &amp;rhs) <span class="hljs-keyword">const</span> &#123; <span class="hljs-keyword">return</span> h &lt; rhs.h; &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span></span></span><br><span class="line"><span class="hljs-class">	&#123;</span></span><br><span class="line">		<span class="hljs-keyword">int</span> cnt;</span><br><span class="line">		ll sum, vtl, lbd, rbd;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Seg&gt; s;</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;Node&gt; v;</span><br><span class="line">	Ranker rk;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(ll l, ll b, ll r, ll t)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.push_back(l);</span><br><span class="line">		rk.push_back(r);</span><br><span class="line">		s.push_back(&#123;l, r, b, <span class="hljs-number">1</span>&#125;);</span><br><span class="line">		s.push_back(&#123;l, r, t, <span class="hljs-number">-1</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">upd</span><span class="hljs-params">(<span class="hljs-keyword">int</span> ql, <span class="hljs-keyword">int</span> qr, <span class="hljs-keyword">int</span> c, <span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> rt = <span class="hljs-number">1</span>)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">			v[rt].cnt += c;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">int</span> m = l + r &gt;&gt; <span class="hljs-number">1</span>;</span><br><span class="line">			<span class="hljs-keyword">if</span> (ql &lt;= m)</span><br><span class="line">				upd(ql, qr, c, l, m, rt &lt;&lt; <span class="hljs-number">1</span>);</span><br><span class="line">			<span class="hljs-keyword">if</span> (qr &gt; m)</span><br><span class="line">				upd(ql, qr, c, m + <span class="hljs-number">1</span>, r, rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (v[rt].cnt)</span><br><span class="line">		&#123;</span><br><span class="line">			v[rt].lbd = v[rt].rbd = <span class="hljs-number">1</span>;</span><br><span class="line">			v[rt].sum = rk[r + <span class="hljs-number">1</span>] - rk[l];</span><br><span class="line">			v[rt].vtl = <span class="hljs-number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (l == r)</span><br><span class="line">			v[rt].sum = v[rt].vtl = v[rt].lbd = v[rt].rbd = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			v[rt].lbd = v[rt &lt;&lt; <span class="hljs-number">1</span>].lbd;</span><br><span class="line">			v[rt].rbd = v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].rbd;</span><br><span class="line">			v[rt].sum = v[rt &lt;&lt; <span class="hljs-number">1</span>].sum + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum;</span><br><span class="line">			v[rt].vtl = v[rt &lt;&lt; <span class="hljs-number">1</span>].vtl + v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].vtl;</span><br><span class="line">			<span class="hljs-keyword">if</span> (v[rt &lt;&lt; <span class="hljs-number">1</span>].rbd &amp;&amp; v[rt &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].lbd)</span><br><span class="line">				v[rt].vtl -= <span class="hljs-number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		rk.init();</span><br><span class="line">		sort(s.begin(), s.end());</span><br><span class="line">		v.assign(rk.size() &lt;&lt; <span class="hljs-number">2</span>, Node());</span><br><span class="line">		ll ans = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i + <span class="hljs-number">1</span> &lt; s.size(); ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			ll pre = v[<span class="hljs-number">1</span>].sum;</span><br><span class="line">			upd(rk.ask(s[i].l), rk.ask(s[i].r) - <span class="hljs-number">1</span>, s[i].f, <span class="hljs-number">0</span>, rk.size() - <span class="hljs-number">1</span>);</span><br><span class="line">			ans += v[<span class="hljs-number">1</span>].vtl * (s[i + <span class="hljs-number">1</span>].h - s[i].h) + <span class="hljs-built_in">abs</span>(v[<span class="hljs-number">1</span>].sum - pre);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">return</span> ans + <span class="hljs-built_in">abs</span>(v[<span class="hljs-number">1</span>].sum);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> n; ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);)</span><br><span class="line">	&#123;</span><br><span class="line">		Perimeter p;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, l, b, r, t; i &lt; n; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d%d"</span>, &amp;l, &amp;b, &amp;r, &amp;t);</span><br><span class="line">			p.add(l, b, r, t);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, p.ask());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-24T07:46:49.000Z">2019-02-24</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 分钟 读完 (大约 1015 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/24/2019-02-24-CodeForces-641E/">Little Artem and Time Machine</a>
            
        </h1>
        <div class="content">
            <p><a href="https://vjudge.net/problem/CodeForces-641E" target="_blank" rel="noopener">题目链接</a></p>
<h1 id="这个人居然也可以在这个沙雕问题RE一晚上"><a href="#这个人居然也可以在这个沙雕问题RE一晚上" class="headerlink" title="这个人居然也可以在这个沙雕问题RE一晚上"></a>这个人居然也可以在这个沙雕问题RE一晚上</h1><p>以下是问题简化。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; v(<span class="hljs-number">1</span>);</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-keyword">int</span> val)</span> </span>&#123; <span class="hljs-keyword">return</span> v.push_back(val), v.back(); &#125;</span><br><span class="line">v[<span class="hljs-number">0</span>] = push(<span class="hljs-number">1</span>);</span><br></pre></td></tr></table></figure>

<p>假如有上面这段代码，在<code>push</code>时改变了<code>v.size()</code>，就可能会导致容器在内存里移动，但是左边<code>v[0]</code>的引用先于<code>push</code>被构造，结果真正赋值的时候期望的地址可能已经发生移动，就导致了RE。</p>
<p>道理我都懂，但是问题发生的地方也太隐密了…想想平时的代码习惯不禁冒出冷汗。以后还是要多多注意。</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><p>在<a href="https://wu-kan.github.io/posts/acm/题解/Bubble-Cup-11-Finals" target="_blank" rel="noopener">16号那场集训</a>曾经产生了把树状数组建在map上的想法…所以今天来实践一下。</p>
<figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">int</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Fenwick</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, ll&gt; v;</span><br><span class="line">	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, ll val, <span class="hljs-keyword">int</span> M = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x &lt; M; x += x &amp; -x)</span><br><span class="line">			v[x] += val;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll r = <span class="hljs-number">0</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (; x; x -= x &amp; -x)</span><br><span class="line">			r += v[x];</span><br><span class="line">		<span class="hljs-keyword">return</span> r;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="hljs-built_in">map</span>&lt;<span class="hljs-keyword">int</span>, Fenwick&gt; mp;</span><br><span class="line"><span class="hljs-keyword">int</span> n, a, t, x;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n); n--;)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>, &amp;a, &amp;t, &amp;x);</span><br><span class="line">		<span class="hljs-keyword">if</span> (a == <span class="hljs-number">3</span>)</span><br><span class="line">			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, mp[x].ask(t));</span><br><span class="line">		<span class="hljs-keyword">else</span></span><br><span class="line">			mp[x].add(t, a == <span class="hljs-number">2</span> ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>时空最优解当然是动态开点线段树啦，比上面的代码快了正好一倍（171ms:342ms），空间也小了一些（45344kB:52676kB）。</p>
<p>启示是，假如题目空间给的足够大的话，可以用建在map上的树状数组来偷懒代替线段树来维护区间和。（并没有什么卵用？）</p>
<p>以下是正常的动态下传线段树，只快一丢丢。</p>

undefined



<p>以下是特殊优化的线段树，快了一倍。</p>

undefined



        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-22T10:00:00.000Z">2019-02-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 439 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/22/2019-02-22-Hello 2019/">Hello 2019</a>
            
        </h1>
        <div class="content">
            <h1 id="Gennady-and-a-Card-Game"><a href="#Gennady-and-a-Card-Game" class="headerlink" title="Gennady and a Card Game"></a><a href="https://vjudge.net/problem/CodeForces-1097A" target="_blank" rel="noopener">Gennady and a Card Game</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">char</span> t[<span class="hljs-number">9</span>], s[<span class="hljs-number">9</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, t); ~<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s);)</span><br><span class="line">		<span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == t[<span class="hljs-number">0</span>] || s[<span class="hljs-number">1</span>] == t[<span class="hljs-number">1</span>])</span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"YES"</span>), <span class="hljs-number">0</span>;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"NO"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Petr-and-a-Combination-Lock"><a href="#Petr-and-a-Combination-Lock" class="headerlink" title="Petr and a Combination Lock"></a><a href="https://vjudge.net/problem/CodeForces-1097B" target="_blank" rel="noopener">Petr and a Combination Lock</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">int</span> n, a[<span class="hljs-number">15</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;a[i]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = (<span class="hljs-number">1</span> &lt;&lt; n) - <span class="hljs-number">1</span>, sum; ~i; --i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = sum = <span class="hljs-number">0</span>; j &lt; n; ++j)</span><br><span class="line">			sum += (i &amp; <span class="hljs-number">1</span> &lt;&lt; j) ? -a[j] : a[j];</span><br><span class="line">		<span class="hljs-keyword">if</span> (sum % <span class="hljs-number">360</span> == <span class="hljs-number">0</span>)</span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"YES"</span>), <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"NO"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Yuhao-and-a-Parenthesis"><a href="#Yuhao-and-a-Parenthesis" class="headerlink" title="Yuhao and a Parenthesis"></a><a href="https://vjudge.net/problem/CodeForces-1097C" target="_blank" rel="noopener">Yuhao and a Parenthesis</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">5</span>;</span><br><span class="line"><span class="hljs-keyword">char</span> s[N], t[N];</span><br><span class="line"><span class="hljs-keyword">int</span> n, cnt[N &lt;&lt; <span class="hljs-number">1</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, c[<span class="hljs-number">2</span>]; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s);</span><br><span class="line">		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = c[<span class="hljs-number">0</span>] = c[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>, siz = <span class="hljs-number">0</span>; s[i]; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (siz &amp;&amp; t[siz - <span class="hljs-number">1</span>] == <span class="hljs-string">'('</span> &amp;&amp; s[i] == <span class="hljs-string">')'</span>)</span><br><span class="line">				--c[<span class="hljs-number">0</span>], --siz;</span><br><span class="line">			<span class="hljs-keyword">else</span></span><br><span class="line">				++c[s[i] == <span class="hljs-string">')'</span>], t[siz++] = s[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="hljs-keyword">if</span> (!c[<span class="hljs-number">0</span>] || !c[<span class="hljs-number">1</span>])</span><br><span class="line">			++cnt[N - c[<span class="hljs-number">0</span>] + c[<span class="hljs-number">1</span>]];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n = <span class="hljs-number">0</span>; i &lt; N; ++i)</span><br><span class="line">		n += min(cnt[N - i], cnt[N + i]);</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, n + cnt[N] / <span class="hljs-number">2</span> - cnt[N]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Makoto-and-a-Blackboard"><a href="#Makoto-and-a-Blackboard" class="headerlink" title="Makoto and a Blackboard"></a><a href="https://vjudge.net/problem/CodeForces-1097D" target="_blank" rel="noopener">Makoto and a Blackboard</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FI first</span></span><br><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SE second</span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mod</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">const</span> ll M;</span><br><span class="line">	Mod(ll M) : M(M) &#123;&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">add</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> ((a + b) % M + M) % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">mul</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> a * b % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">pow</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span></span></span><br><span class="line"><span class="hljs-function">	</span>&#123;</span><br><span class="line">		ll r = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (a %= M; b; b &gt;&gt;= <span class="hljs-number">1</span>, a = mul(a, a))</span><br><span class="line">			<span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)</span><br><span class="line">				r = mul(r, a);</span><br><span class="line">		<span class="hljs-keyword">return</span> r;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">inv</span><span class="hljs-params">(ll a)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">pow</span>(a, M - <span class="hljs-number">2</span>); &#125;</span><br><span class="line">&#125; M(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>);</span><br><span class="line">ll n, k, ans;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld"</span>, &amp;n, &amp;k);</span><br><span class="line">	<span class="hljs-built_in">vector</span>&lt;pair&lt;ll, ll&gt;&gt; v;</span><br><span class="line">	ans = n;</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">2</span>; i * i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-keyword">if</span> (ans % i == <span class="hljs-number">0</span>)</span><br><span class="line">			<span class="hljs-keyword">for</span> (v.push_back(&#123;i, <span class="hljs-number">0</span>&#125;); ans % i == <span class="hljs-number">0</span>; ans /= i)</span><br><span class="line">				++v.back().SE;</span><br><span class="line">	<span class="hljs-keyword">if</span> (ans &gt; <span class="hljs-number">1</span>)</span><br><span class="line">		v.push_back(&#123;ans, <span class="hljs-number">1</span>&#125;), ans = <span class="hljs-number">1</span>;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it : v)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">vector</span>&lt;ll&gt; sum(it.SE + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="line">		sum[it.SE] = <span class="hljs-number">1</span>;</span><br><span class="line">		<span class="hljs-keyword">for</span> (ll j = <span class="hljs-number">0</span>; j &lt; k; ++j)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-built_in">vector</span>&lt;ll&gt; f(it.SE + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="line">			<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>; i &lt;= it.SE; ++i)</span><br><span class="line">				f[<span class="hljs-number">0</span>] = M.add(f[<span class="hljs-number">0</span>], f[i] = M.mul(sum[i - <span class="hljs-number">1</span>], M.inv(i)));</span><br><span class="line">			sum[<span class="hljs-number">0</span>] = M.add(f[<span class="hljs-number">0</span>], M.mul(sum[it.SE], M.inv(it.SE + <span class="hljs-number">1</span>)));</span><br><span class="line">			<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>; i &lt;= it.SE; ++i)</span><br><span class="line">				sum[i] = M.add(sum[i - <span class="hljs-number">1</span>], -f[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		ll res = sum[<span class="hljs-number">0</span>];</span><br><span class="line">		<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>, p = <span class="hljs-number">1</span>; i &lt;= it.SE; ++i)</span><br><span class="line">			res = M.add(res, M.mul(p = M.mul(p, it.FI), sum[i]));</span><br><span class="line">		ans = M.mul(ans, res);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-02-20T10:00:00.000Z">2019-02-20</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/ACM/">ACM</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/ACM/题解/">题解</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 439 个字)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/02/20/2019-02-20-Divide by Zero 2018/">Divide by Zero 2018</a>
            
        </h1>
        <div class="content">
            <h1 id="Check-the-string"><a href="#Check-the-string" class="headerlink" title="Check the string"></a><a href="https://vjudge.net/problem/CodeForces-960A" target="_blank" rel="noopener">Check the string</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">char</span> s[<span class="hljs-number">8195</span>];</span><br><span class="line"><span class="hljs-keyword">int</span> c[<span class="hljs-number">3</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%s"</span>, s);</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; s[i]; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		++c[s[i] - <span class="hljs-string">'a'</span>];</span><br><span class="line">		<span class="hljs-keyword">if</span> (i &amp;&amp; s[i] &lt; s[i - <span class="hljs-number">1</span>])</span><br><span class="line">			<span class="hljs-keyword">return</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"NO"</span>), <span class="hljs-number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(c[<span class="hljs-number">0</span>] &amp;&amp; c[<span class="hljs-number">1</span>] &amp;&amp; (c[<span class="hljs-number">2</span>] == c[<span class="hljs-number">0</span>] || c[<span class="hljs-number">2</span>] == c[<span class="hljs-number">1</span>]) ? <span class="hljs-string">"YES"</span> : <span class="hljs-string">"NO"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Minimize-the-error"><a href="#Minimize-the-error" class="headerlink" title="Minimize the error"></a><a href="https://vjudge.net/problem/CodeForces-960B" target="_blank" rel="noopener">Minimize the error</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line">priority_queue&lt;ll&gt; q;</span><br><span class="line">ll n, k, t, a[<span class="hljs-number">1023</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld%lld"</span>, &amp;n, &amp;k, &amp;t);</span><br><span class="line">	k += t;</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;a[i]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">0</span>; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;t);</span><br><span class="line">		q.push(<span class="hljs-built_in">abs</span>(a[i] - t));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">while</span> (k--)</span><br><span class="line">	&#123;</span><br><span class="line">		t = q.top();</span><br><span class="line">		q.pop();</span><br><span class="line">		q.push(t ? t - <span class="hljs-number">1</span> : t + <span class="hljs-number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (t = <span class="hljs-number">0</span>; !q.empty(); q.pop())</span><br><span class="line">		t += q.top() * q.top();</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Subsequence-Counting"><a href="#Subsequence-Counting" class="headerlink" title="Subsequence Counting"></a><a href="https://vjudge.net/problem/CodeForces-960C" target="_blank" rel="noopener">Subsequence Counting</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;ll&gt; v;</span><br><span class="line">ll x, d;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld"</span>, &amp;x, &amp;d);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll a = <span class="hljs-number">1</span>; x; a += d)</span><br><span class="line">		<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>; i &lt;= x; i &lt;&lt;= <span class="hljs-number">1</span>)</span><br><span class="line">			v.push_back(a), x -= i;</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, v.size());</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i : v)</span><br><span class="line">		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld "</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Alternating-Tree"><a href="#Alternating-Tree" class="headerlink" title="Alternating Tree"></a><a href="https://vjudge.net/problem/CodeForces-960E" target="_blank" rel="noopener">Alternating Tree</a></h1><figure class="highlight cpp hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</span><br><span class="line"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ll;</span><br><span class="line"><span class="hljs-keyword">const</span> ll N = <span class="hljs-number">2e5</span> + <span class="hljs-number">7</span>;</span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Mod</span></span></span><br><span class="line"><span class="hljs-class">&#123;</span></span><br><span class="line">	<span class="hljs-keyword">const</span> ll M;</span><br><span class="line">	Mod(ll M) : M(M) &#123;&#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">add</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> ((a + b) % M + M) % M; &#125;</span><br><span class="line">	<span class="hljs-function">ll <span class="hljs-title">mul</span><span class="hljs-params">(ll a, ll b)</span> <span class="hljs-keyword">const</span> </span>&#123; <span class="hljs-keyword">return</span> a * b % M; &#125;</span><br><span class="line">&#125; M(<span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>);</span><br><span class="line"><span class="hljs-built_in">vector</span>&lt;ll&gt; e[N];</span><br><span class="line">ll n, ans, v[N], f[N][<span class="hljs-number">2</span>], g[N][<span class="hljs-number">2</span>];</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(ll u, ll fa = N)</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> to : e[u])</span><br><span class="line">		<span class="hljs-keyword">if</span> (to != fa)</span><br><span class="line">		&#123;</span><br><span class="line">			dfs(to, u);</span><br><span class="line">			f[u][<span class="hljs-number">0</span>] = M.add(f[u][<span class="hljs-number">0</span>] + f[to][<span class="hljs-number">1</span>], -M.mul(g[to][<span class="hljs-number">1</span>], v[u]));</span><br><span class="line">			f[u][<span class="hljs-number">1</span>] = M.add(f[u][<span class="hljs-number">1</span>] + f[to][<span class="hljs-number">0</span>], M.mul(g[to][<span class="hljs-number">0</span>], v[u]));</span><br><span class="line">			g[u][<span class="hljs-number">0</span>] = M.add(g[u][<span class="hljs-number">0</span>], g[to][<span class="hljs-number">1</span>]);</span><br><span class="line">			g[u][<span class="hljs-number">1</span>] = M.add(g[u][<span class="hljs-number">1</span>], g[to][<span class="hljs-number">0</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> to : e[u])</span><br><span class="line">		<span class="hljs-keyword">if</span> (to != fa)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="hljs-keyword">if</span> (g[to][<span class="hljs-number">0</span>])</span><br><span class="line">				ans = M.add(ans, M.mul(g[u][<span class="hljs-number">1</span>] - g[to][<span class="hljs-number">0</span>], f[to][<span class="hljs-number">0</span>] * <span class="hljs-number">2</span> + g[to][<span class="hljs-number">0</span>] * v[u]));</span><br><span class="line">			<span class="hljs-keyword">if</span> (g[to][<span class="hljs-number">1</span>])</span><br><span class="line">				ans = M.add(ans, M.mul(g[u][<span class="hljs-number">0</span>] - g[to][<span class="hljs-number">1</span>], f[to][<span class="hljs-number">1</span>] * <span class="hljs-number">2</span> - g[to][<span class="hljs-number">1</span>] * v[u]));</span><br><span class="line">		&#125;</span><br><span class="line">	ans = M.add(ans, f[u][<span class="hljs-number">1</span>] * <span class="hljs-number">2</span> + v[u]);</span><br><span class="line">	f[u][<span class="hljs-number">1</span>] = M.add(f[u][<span class="hljs-number">1</span>], v[u]);</span><br><span class="line">	g[u][<span class="hljs-number">1</span>] = M.add(g[u][<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">	<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;n);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>; i &lt;= n; ++i)</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld"</span>, &amp;v[i]);</span><br><span class="line">	<span class="hljs-keyword">for</span> (ll i = <span class="hljs-number">1</span>, x, y; i &lt; n; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%lld%lld"</span>, &amp;x, &amp;y);</span><br><span class="line">		e[x].push_back(y);</span><br><span class="line">		e[y].push_back(x);</span><br><span class="line">	&#125;</span><br><span class="line">	dfs(<span class="hljs-number">1</span>);</span><br><span class="line">	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%lld"</span>, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/categories/ACM/page/0/">上一页</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/categories/ACM/page/2/">下一页</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/categories/ACM/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/ACM/page/2/">2</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/ACM/page/8/">8</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/cat/color_cat.jpg" alt="贾小厨">
                    
                    
                    <p class="is-size-4 is-block">
                        贾小厨
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        当前，你无法预测未来会怎样，但你可以选择跟靠谱的人一同工作，选择做正确的事。
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Beijing.China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        139
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        27
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        46
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/jiaxiaochu" target="_blank">
                关注我</a>
        </div>
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/jiaxiaochu">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Facebook" href="https://facebook.com">
                
                <i class="fab fa-facebook"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Twitter" href="https://twitter.com">
                
                <i class="fab fa-twitter"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="Dribbble" href="https://dribbble.com">
                
                <i class="fab fa-dribbble"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/ACM/">
            <span class="level-start">
                <span class="level-item">ACM</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">76</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/ACM/Template/">
            <span class="level-start">
                <span class="level-item">Template</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">10</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ACM/算法竞赛入门经典训练指南/">
            <span class="level-start">
                <span class="level-item">算法竞赛入门经典训练指南</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ACM/题解/">
            <span class="level-start">
                <span class="level-item">题解</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">42</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Linux/">
            <span class="level-start">
                <span class="level-item">Linux</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python/">
            <span class="level-start">
                <span class="level-item">Python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Spider/">
            <span class="level-start">
                <span class="level-item">Spider</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/函数程序设计实验/">
            <span class="level-start">
                <span class="level-item">函数程序设计实验</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">12</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/吴恩达机器学习笔记/">
            <span class="level-start">
                <span class="level-item">吴恩达机器学习笔记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/学习笔记/">
            <span class="level-start">
                <span class="level-item">学习笔记</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/小工具/">
            <span class="level-start">
                <span class="level-item">小工具</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/并行与分布式计算/">
            <span class="level-start">
                <span class="level-item">并行与分布式计算</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/操作系统/">
            <span class="level-start">
                <span class="level-item">操作系统</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/机器学习/">
            <span class="level-start">
                <span class="level-item">机器学习</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/环境配置/">
            <span class="level-start">
                <span class="level-item">环境配置</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">14</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/程序设计/">
            <span class="level-start">
                <span class="level-item">程序设计</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">8</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机组成原理/">
            <span class="level-start">
                <span class="level-item">计算机组成原理</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/计算机网络/">
            <span class="level-start">
                <span class="level-item">计算机网络</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">7</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/超级计算机原理与操作/">
            <span class="level-start">
                <span class="level-item">超级计算机原理与操作</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/07/23/pymysql远程连接被拒绝问题解决方法/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://ws1.sinaimg.cn/large/0065l1jqly1g592mgpd7mg30ot0ea7d5.gif" alt="pymysql远程连接被拒绝问题解决方法">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-22T16:08:33.000Z">2019-07-23</time></div>
                    <a href="/2019/07/23/pymysql远程连接被拒绝问题解决方法/" class="has-link-black-ter is-size-6">pymysql远程连接被拒绝问题解决方法</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/环境配置/">环境配置</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/22/Ubuntu系统搭建配置Python虚拟开发环境/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://ws1.sinaimg.cn/large/0065l1jqly1g590mpqs2ej30gg08c3ym.jpg" alt="Ubuntu系统搭建配置Python虚拟开发环境">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-22T14:57:27.000Z">2019-07-22</time></div>
                    <a href="/2019/07/22/Ubuntu系统搭建配置Python虚拟开发环境/" class="has-link-black-ter is-size-6">Ubuntu系统搭建配置Python虚拟开发环境</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/环境配置/">环境配置</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/14/2017-11-17-垃圾回收/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Python中的垃圾回收机制">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-14T08:06:52.968Z">2019-07-14</time></div>
                    <a href="/2019/07/14/2017-11-17-垃圾回收/" class="has-link-black-ter is-size-6">Python中的垃圾回收机制</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/07/14/2017-08-14-爬取网易财经中股票的历史交易数据/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="爬取网易财经中股票的历史交易数据">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-07-14T08:06:52.967Z">2019-07-14</time></div>
                    <a href="/2019/07/14/2017-08-14-爬取网易财经中股票的历史交易数据/" class="has-link-black-ter is-size-6">爬取网易财经中股票的历史交易数据</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Spider/">Spider</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/11/2019-03-31-中断处理与系统调用/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt>
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-10T16:08:06.399Z">2019-04-11</time></div>
                    <a href="/2019/04/11/2019-03-31-中断处理与系统调用/" class="has-link-black-ter is-size-6"></a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/操作系统/">操作系统</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/ChromeDriver/" style="font-size: 10px;">ChromeDriver</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Deepin/" style="font-size: 11.43px;">Deepin</a> <a href="/tags/ICPC模板/" style="font-size: 18.57px;">ICPC模板</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NTT/" style="font-size: 10px;">NTT</a> <a href="/tags/Pycharm/" style="font-size: 11.43px;">Pycharm</a> <a href="/tags/Python解释器的安装与配置/" style="font-size: 12.86px;">Python解释器的安装与配置</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/chromedriver/" style="font-size: 10px;">chromedriver</a> <a href="/tags/pymysql/" style="font-size: 10px;">pymysql</a> <a href="/tags/三维计算几何/" style="font-size: 12.86px;">三维计算几何</a> <a href="/tags/主席树/" style="font-size: 10px;">主席树</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二维计算几何/" style="font-size: 10px;">二维计算几何</a> <a href="/tags/动态开点/" style="font-size: 10px;">动态开点</a> <a href="/tags/励志/" style="font-size: 10px;">励志</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 11.43px;">单调队列</a> <a href="/tags/原根/" style="font-size: 10px;">原根</a> <a href="/tags/可持久化/" style="font-size: 11.43px;">可持久化</a> <a href="/tags/扫描线/" style="font-size: 10px;">扫描线</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 17.14px;">数据结构</a> <a href="/tags/数论/" style="font-size: 11.43px;">数论</a> <a href="/tags/无旋Treap/" style="font-size: 14.29px;">无旋Treap</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最短路/" style="font-size: 10px;">最短路</a> <a href="/tags/树状数组/" style="font-size: 10px;">树状数组</a> <a href="/tags/环境配置/" style="font-size: 20px;">环境配置</a> <a href="/tags/珂朵莉树/" style="font-size: 11.43px;">珂朵莉树</a> <a href="/tags/系统配置/" style="font-size: 10px;">系统配置</a> <a href="/tags/线段树/" style="font-size: 15.71px;">线段树</a> <a href="/tags/老司机树/" style="font-size: 11.43px;">老司机树</a> <a href="/tags/莫比乌斯反演/" style="font-size: 10px;">莫比乌斯反演</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/虚拟环境/" style="font-size: 10px;">虚拟环境</a> <a href="/tags/谷歌输入法/" style="font-size: 10px;">谷歌输入法</a>
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">27</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">20</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Anaconda/">
                        <span class="tag">Anaconda</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ChromeDriver/">
                        <span class="tag">ChromeDriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DP/">
                        <span class="tag">DP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Deepin/">
                        <span class="tag">Deepin</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ICPC模板/">
                        <span class="tag">ICPC模板</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LCA/">
                        <span class="tag">LCA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NTT/">
                        <span class="tag">NTT</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Pycharm/">
                        <span class="tag">Pycharm</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Python解释器的安装与配置/">
                        <span class="tag">Python解释器的安装与配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/VMware/">
                        <span class="tag">VMware</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chrome/">
                        <span class="tag">chrome</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chromedriver/">
                        <span class="tag">chromedriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pymysql/">
                        <span class="tag">pymysql</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/三维计算几何/">
                        <span class="tag">三维计算几何</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/主席树/">
                        <span class="tag">主席树</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二分/">
                        <span class="tag">二分</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二维计算几何/">
                        <span class="tag">二维计算几何</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态开点/">
                        <span class="tag">动态开点</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/励志/">
                        <span class="tag">励志</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调栈/">
                        <span class="tag">单调栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调队列/">
                        <span class="tag">单调队列</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/原根/">
                        <span class="tag">原根</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/可持久化/">
                        <span class="tag">可持久化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扫描线/">
                        <span class="tag">扫描线</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/拓扑排序/">
                        <span class="tag">拓扑排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/搜索/">
                        <span class="tag">搜索</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数论/">
                        <span class="tag">数论</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无旋Treap/">
                        <span class="tag">无旋Treap</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最大流/">
                        <span class="tag">最大流</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最短路/">
                        <span class="tag">最短路</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/树状数组/">
                        <span class="tag">树状数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/珂朵莉树/">
                        <span class="tag">珂朵莉树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统配置/">
                        <span class="tag">系统配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线段树/">
                        <span class="tag">线段树</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/老司机树/">
                        <span class="tag">老司机树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/莫比乌斯反演/">
                        <span class="tag">莫比乌斯反演</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟机/">
                        <span class="tag">虚拟机</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟环境/">
                        <span class="tag">虚拟环境</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/谷歌输入法/">
                        <span class="tag">谷歌输入法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
            

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/jiaxiaochu" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/Anaconda/" style="font-size: 10px;">Anaconda</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/ChromeDriver/" style="font-size: 10px;">ChromeDriver</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Deepin/" style="font-size: 11.43px;">Deepin</a> <a href="/tags/ICPC模板/" style="font-size: 18.57px;">ICPC模板</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/MongoDB数据库/" style="font-size: 10px;">MongoDB数据库</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NTT/" style="font-size: 10px;">NTT</a> <a href="/tags/Pycharm/" style="font-size: 11.43px;">Pycharm</a> <a href="/tags/Python解释器的安装与配置/" style="font-size: 12.86px;">Python解释器的安装与配置</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/VMware/" style="font-size: 10px;">VMware</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/chromedriver/" style="font-size: 10px;">chromedriver</a> <a href="/tags/pymysql/" style="font-size: 10px;">pymysql</a> <a href="/tags/三维计算几何/" style="font-size: 12.86px;">三维计算几何</a> <a href="/tags/主席树/" style="font-size: 10px;">主席树</a> <a href="/tags/二分/" style="font-size: 10px;">二分</a> <a href="/tags/二维计算几何/" style="font-size: 10px;">二维计算几何</a> <a href="/tags/动态开点/" style="font-size: 10px;">动态开点</a> <a href="/tags/励志/" style="font-size: 10px;">励志</a> <a href="/tags/单调栈/" style="font-size: 10px;">单调栈</a> <a href="/tags/单调队列/" style="font-size: 11.43px;">单调队列</a> <a href="/tags/原根/" style="font-size: 10px;">原根</a> <a href="/tags/可持久化/" style="font-size: 11.43px;">可持久化</a> <a href="/tags/扫描线/" style="font-size: 10px;">扫描线</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/数据结构/" style="font-size: 17.14px;">数据结构</a> <a href="/tags/数论/" style="font-size: 11.43px;">数论</a> <a href="/tags/无旋Treap/" style="font-size: 14.29px;">无旋Treap</a> <a href="/tags/最大流/" style="font-size: 10px;">最大流</a> <a href="/tags/最短路/" style="font-size: 10px;">最短路</a> <a href="/tags/树状数组/" style="font-size: 10px;">树状数组</a> <a href="/tags/环境配置/" style="font-size: 20px;">环境配置</a> <a href="/tags/珂朵莉树/" style="font-size: 11.43px;">珂朵莉树</a> <a href="/tags/系统配置/" style="font-size: 10px;">系统配置</a> <a href="/tags/线段树/" style="font-size: 15.71px;">线段树</a> <a href="/tags/老司机树/" style="font-size: 11.43px;">老司机树</a> <a href="/tags/莫比乌斯反演/" style="font-size: 10px;">莫比乌斯反演</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/虚拟环境/" style="font-size: 10px;">虚拟环境</a> <a href="/tags/谷歌输入法/" style="font-size: 10px;">谷歌输入法</a>
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/02/">
                <span class="level-start">
                    <span class="level-item">二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">27</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">13</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">20</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">九月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">八月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">七月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/06/">
                <span class="level-start">
                    <span class="level-item">六月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">五月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">三月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">十月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Anaconda/">
                        <span class="tag">Anaconda</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Bug/">
                        <span class="tag">Bug</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ChromeDriver/">
                        <span class="tag">ChromeDriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DP/">
                        <span class="tag">DP</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Deepin/">
                        <span class="tag">Deepin</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ICPC模板/">
                        <span class="tag">ICPC模板</span>
                        <span class="tag is-grey">10</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/LCA/">
                        <span class="tag">LCA</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MongoDB数据库/">
                        <span class="tag">MongoDB数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/MySQL/">
                        <span class="tag">MySQL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NTT/">
                        <span class="tag">NTT</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Pycharm/">
                        <span class="tag">Pycharm</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Python解释器的安装与配置/">
                        <span class="tag">Python解释器的安装与配置</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Ubuntu/">
                        <span class="tag">Ubuntu</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/VMware/">
                        <span class="tag">VMware</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chrome/">
                        <span class="tag">chrome</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/chromedriver/">
                        <span class="tag">chromedriver</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pymysql/">
                        <span class="tag">pymysql</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/三维计算几何/">
                        <span class="tag">三维计算几何</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/主席树/">
                        <span class="tag">主席树</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二分/">
                        <span class="tag">二分</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/二维计算几何/">
                        <span class="tag">二维计算几何</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/动态开点/">
                        <span class="tag">动态开点</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/励志/">
                        <span class="tag">励志</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调栈/">
                        <span class="tag">单调栈</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/单调队列/">
                        <span class="tag">单调队列</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/原根/">
                        <span class="tag">原根</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/可持久化/">
                        <span class="tag">可持久化</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/扫描线/">
                        <span class="tag">扫描线</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/拓扑排序/">
                        <span class="tag">拓扑排序</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/搜索/">
                        <span class="tag">搜索</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据库/">
                        <span class="tag">数据库</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数据结构/">
                        <span class="tag">数据结构</span>
                        <span class="tag is-grey">8</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/数论/">
                        <span class="tag">数论</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/无旋Treap/">
                        <span class="tag">无旋Treap</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最大流/">
                        <span class="tag">最大流</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/最短路/">
                        <span class="tag">最短路</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/树状数组/">
                        <span class="tag">树状数组</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/环境配置/">
                        <span class="tag">环境配置</span>
                        <span class="tag is-grey">14</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/珂朵莉树/">
                        <span class="tag">珂朵莉树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/系统配置/">
                        <span class="tag">系统配置</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/线段树/">
                        <span class="tag">线段树</span>
                        <span class="tag is-grey">5</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/老司机树/">
                        <span class="tag">老司机树</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/莫比乌斯反演/">
                        <span class="tag">莫比乌斯反演</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟机/">
                        <span class="tag">虚拟机</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/虚拟环境/">
                        <span class="tag">虚拟环境</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/谷歌输入法/">
                        <span class="tag">谷歌输入法</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.jianshu.com/u/bf4c0b4a8c83" target="_blank">
                    <span class="level-left">
                        <span class="level-item">简书</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.jianshu.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/jiaxiaochu" target="_blank">
                    <span class="level-left">
                        <span class="level-item">GitHub</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="贾志翔的博客" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 jiazhixiang&nbsp;
                Powered &#10084; YH · Lin
                </p>
            </div>
            
            <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

            
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/jiaxiaochu/jiaxiaochu.github.io">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        <div align="center">
            <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
            <script>
                var now = new Date(); 
                function createtime() { 
                    var grt= new Date("4/1/2019 12:49:00");//此处修改你的建站时间或者网站上线时间 
                    now.setTime(now.getTime()+250); 
                    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
                    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
                    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
                    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
                    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
                    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
                    document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
                    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
                } 
            setInterval("createtime()",250);
            </script>
            <div align="center">
            <span id="busuanzi_container_site_pv" class="theme-info">本站总访问量-<span id="busuanzi_value_site_pv"></span>-次|
              </span>
              <span id="busuanzi_container_site_uv" class="theme-info">您是第-<span id="busuanzi_value_site_uv"></span>-位小伙伴</span>

            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            </div>
        </div>
        <span>
        <script type="text/javascript" src="//rf.revolvermaps.com/0/0/0.js?i=0xetp0d4rdh&amp;d=2&amp;p=1&amp;b=8&amp;w=193&amp;g=2&amp;f=arial&amp;fs=12&amp;r=0&amp;c0=000000&amp;c1=00a99d&amp;c2=000000&amp;ic0=0&amp;ic1=0" async="async"></script>
        </span>
        </div>

    </div>

    <script>
        (function(){
            var bp = document.createElement('script');
            bp.src = '//push.zhanzhang.baidu.com/push.js';
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
</script>
<script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
        <!-- 雪花特效 -->
    <script type="text/javascript">
      var windowWidth = $(window).width();
      if (windowWidth > 480) {
        document.write('<script type="text/javascript" src="/js/src/snow.js"><\/script>');
      }
    </script>

    <script src="//code.tidio.co/wgmwb2zlxrcti0crizzmumshwbxpums2.js"></script>
    
</body>
</html>